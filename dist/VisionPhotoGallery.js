!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VisionPhotoGallery=e():t.VisionPhotoGallery=e()}(this,(function(){return function(){"use strict";var t={d:function(e,o){for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};t.d(e,{default:function(){return M}});var o="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==o&&o,n="URLSearchParams"in o,r="Symbol"in o&&"iterator"in Symbol,i="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch(t){return!1}}(),s="FormData"in o,a="ArrayBuffer"in o;if(a)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&u.indexOf(Object.prototype.toString.call(t))>-1};function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function c(t){return"string"!=typeof t&&(t=String(t)),t}function d(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function f(t){this.map={},t instanceof f?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(t){return new Promise((function(e,o){t.onload=function(){e(t.result)},t.onerror=function(){o(t.error)}}))}function m(t){var e=new FileReader,o=y(e);return e.readAsArrayBuffer(t),o}function v(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&i&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=v(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=v(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(m)}),this.text=function(){var t,e,o,n=p(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,o=y(e=new FileReader),e.readAsText(t),o;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),o=new Array(e.length),n=0;n<e.length;n++)o[n]=String.fromCharCode(e[n]);return o.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(t,e){t=h(t),e=c(e);var o=this.map[t];this.map[t]=o?o+", "+e:e},f.prototype.delete=function(t){delete this.map[h(t)]},f.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},f.prototype.set=function(t,e){this.map[h(t)]=c(e)},f.prototype.forEach=function(t,e){for(var o in this.map)this.map.hasOwnProperty(o)&&t.call(e,this.map[o],o,this)},f.prototype.keys=function(){var t=[];return this.forEach((function(e,o){t.push(o)})),d(t)},f.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),d(t)},f.prototype.entries=function(){var t=[];return this.forEach((function(e,o){t.push([o,e])})),d(t)},r&&(f.prototype[Symbol.iterator]=f.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function E(t,e){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var o,n,r=(e=e||{}).body;if(t instanceof E){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(n=(o=e.method||this.method||"GET").toUpperCase(),b.indexOf(n)>-1?n:o),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var i=/([?&])_=[^&]*/;i.test(this.url)?this.url=this.url.replace(i,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function w(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var o=t.split("="),n=o.shift().replace(/\+/g," "),r=o.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(r))}})),e}function _(t,e){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},g.call(E.prototype),g.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},_.error=function(){var t=new _(null,{status:0,statusText:""});return t.type="error",t};var P=[301,302,303,307,308];_.redirect=function(t,e){if(-1===P.indexOf(e))throw new RangeError("Invalid status code");return new _(null,{status:e,headers:{location:t}})};var O=o.DOMException;try{new O}catch(t){(O=function(t,e){this.message=t,this.name=e;var o=Error(t);this.stack=o.stack}).prototype=Object.create(Error.prototype),O.prototype.constructor=O}function T(t,e){return new Promise((function(n,r){var s=new E(t,e);if(s.signal&&s.signal.aborted)return r(new O("Aborted","AbortError"));var u=new XMLHttpRequest;function l(){u.abort()}u.onload=function(){var t,e,o={status:u.status,statusText:u.statusText,headers:(t=u.getAllResponseHeaders()||"",e=new f,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var o=t.split(":"),n=o.shift().trim();if(n){var r=o.join(":").trim();e.append(n,r)}})),e)};o.url="responseURL"in u?u.responseURL:o.headers.get("X-Request-URL");var r="response"in u?u.response:u.responseText;setTimeout((function(){n(new _(r,o))}),0)},u.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},u.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},u.onabort=function(){setTimeout((function(){r(new O("Aborted","AbortError"))}),0)},u.open(s.method,function(t){try{return""===t&&o.location.href?o.location.href:t}catch(e){return t}}(s.url),!0),"include"===s.credentials?u.withCredentials=!0:"omit"===s.credentials&&(u.withCredentials=!1),"responseType"in u&&(i?u.responseType="blob":a&&s.headers.get("Content-Type")&&-1!==s.headers.get("Content-Type").indexOf("application/octet-stream")&&(u.responseType="arraybuffer")),!e||"object"!=typeof e.headers||e.headers instanceof f?s.headers.forEach((function(t,e){u.setRequestHeader(e,t)})):Object.getOwnPropertyNames(e.headers).forEach((function(t){u.setRequestHeader(t,c(e.headers[t]))})),s.signal&&(s.signal.addEventListener("abort",l),u.onreadystatechange=function(){4===u.readyState&&s.signal.removeEventListener("abort",l)}),u.send(void 0===s._bodyInit?null:s._bodyInit)}))}function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function I(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function B(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?I(Object(o),!0).forEach((function(e){j(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):I(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function k(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function j(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}T.polyfill=!0,o.fetch||(o.fetch=T,o.Headers=f,o.Request=E,o.Response=_);var M=function(){function t(e){var o=this,n=e.actionType,r=e.root,i=e.employeeId,s=e.visionPersonId,a=e.personId,u=e.token,l=e.controls,h=e.masterAlbum,c=void 0===h||h;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,"galleryContainer",null),j(this,"rootElement",null),j(this,"token",null),j(this,"controls",{disableAll:!1,update:!0,upload:!0,remove:!0}),j(this,"masterAlbum",!0),j(this,"actionType",""),j(this,"errorFunction",null),j(this,"successFunction",null),j(this,"router",{"upload-photo":function(t){var e=o.rootElement.querySelector('input[type="file"]');e.addEventListener("change",o.router["file-input-changed"]),e.click()},"file-input-changed":function(t){var e=t.target.files[0],n=new FileReader;n.readAsDataURL(e),n.onload=function(){o.addPhoto(n.result).then((function(t){if(t.ok)o.draw({action:"PHOTO_BIOMETRY_ADD",actionType:"upload_photo"});else if(200!==t.status)return t.json()}),(function(t){o.handleError({message:t})}))},n.onerror=function(){o.handleError({message:n.error,blockingErrorMessage:"Ошибка загрузки фотографии (-ий): ".concat(n.error)})}},"remove-photo":function(t){var e=t.target.closest(".vg-photo"),n=e.dataset.photoId,r=e.classList.contains("vg-photo--main");n&&o.deletePhoto(+n).then((function(t){if(t.ok)o.draw({action:"PHOTO_BIOMETRY_REMOVE",isMainPhoto:r});else if(200!==t.status)return t.json()}),(function(t){o.handleError({message:t})}))},"update-photo":function(t){var e=t.target.closest(".vg-photo"),n=e.dataset.photoId,r=e.querySelectorAll("button");n&&(r.forEach((function(t){return t.setAttribute("disabled","disabled")})),o.setAsMainPhoto(+n).then((function(t){if(t.ok)o.draw({action:"PHOTO_BIOMETRY_ADD",actionType:"photo_album"});else if(200!==t.status)return t.json()}),(function(t){o.handleError({message:t})})))}}),!r)throw new Error("Не указан ID корневого элемента для галереи!");var d=document.getElementById(r);if(!d)throw new Error("Проверьте указанный ID корневого элемента для галереи!");if(this.rootElement=d,!i&&!s&&!a)throw new Error("Не указан ID пользователя на портале Vision");n&&(this.actionType=n),this.employee={id:null,personId:null,visionPersonId:null},this.employeeId=i,this.visionPersonId=s,this.personId=a,this.token=u,this.controls=l,this.masterAlbum=c,this.draw()}var e,o;return e=t,o=[{key:"errorFunction",get:function(){return this.errorFunction},set:function(t){t&&(this.errorFunction=t)}},{key:"successFunction",get:function(){return this.successFunction},set:function(t){t&&(this.successFunction=t)}},{key:"update",value:function(t){var e=t.employeeId,o=t.token;this.employeeId=e,this.token=o,this.draw()}},{key:"employeeId",get:function(){return this.employee.id},set:function(t){t&&(this.employee.id=t)}},{key:"visionPersonId",get:function(){return this.employee.visionPersonId},set:function(t){t&&(this.employee.visionPersonId=t)}},{key:"personId",get:function(){return this.employee.personId},set:function(t){t&&(this.employee.personId=t)}},{key:"rootElement",get:function(){return this.rootElement}},{key:"token",get:function(){return this.token},set:function(t){t&&(this.token=t)}},{key:"controls",get:function(){return this.controls},set:function(t){this.controls=B(B({},this.controls),t)}},{key:"masterAlbum",get:function(){return this.masterAlbum},set:function(t){this.masterAlbum=t}},{key:"handleError",value:function(t){var e=t.message,o=t.blockingErrorMessage;if(this.errorFunction){var n="";"object"===A(e)&&(e.faultstring?n=e.faultstring:Object.keys(e).reverse().forEach((function(t){n+="".concat(e[t],"<br/>")})));var r=n.length?n:JSON.stringify(e);this.errorFunction(r,"Ошибка")}else{if(o)throw new Error(o);console.log(e)}}},{key:"handleSuccess",value:function(t,e){this.successFunction&&this.successFunction(t,e)}},{key:"request",value:function(t){var e=t.requestPath,o=t.requestBody,n={method:"POST",mode:"same-origin",credentials:"same-origin",headers:{"Content-Type":"application/json","X-CSRFToken":this.token},body:JSON.stringify(o)};return fetch("/api/v2/vision/".concat(e,"/"),n)}},{key:"getPhotos",value:function(){var t={};return this.employeeId&&!this.visionPersonId?t.employeeId=this.employeeId:this.visionPersonId?t.vision_person_id=this.visionPersonId:this.personId&&(t.personId=this.personId),this.request({requestPath:"get_photos",requestBody:B(B({},t),{},{masterAlbum:this.masterAlbum})})}},{key:"addPhoto",value:function(t){return this.toggleOverlayMessage("Загрузка..."),this.request({requestPath:"add_photo",requestBody:{employeeId:this.employeeId,image:t}})}},{key:"deletePhoto",value:function(t){this.toggleOverlayMessage("Удаление фотографии...");var e=this.employeeId;return this.request({requestPath:"delete_photo",requestBody:{employee_id:e,photo_id:t}})}},{key:"updatePhoto",value:function(t){return this.toggleOverlayMessage("Обновление фотографии..."),this.request({requestPath:"update_photo",requestBody:{employeeId:this.employeeId,photo_id:t}})}},{key:"setAsMainPhoto",value:function(t){return this.toggleOverlayMessage("Обновление основной фотографии..."),this.request({requestPath:"set_main_photo",requestBody:{employeeId:this.employeeId,photoId:t}})}},{key:"toggleOverlayMessage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.galleryContainer;if(!e)throw new Error("Не найдена корневой элемент галереи");t?(e.dataset.message=t,e.classList.add("vision-photo-gallery--message")):(e.classList.remove("vision-photo-gallery--message"),e.dataset.message="")}},{key:"draw",value:function(t){var e=this,o=this.rootElement;o.innerHTML='\n      <div class="vision-photo-gallery">\n        <input type="file" class="vision-photo-gallery__file-field" tabindex="-1">\n        <div class="vision-photo-gallery__item vision-photo-gallery__item--main">\n          <div class="vg-main-photo"></div>\n        </div>\n        <div class="vision-photo-gallery__item">\n          <div class="vg-gallery"></div>\n        </div>\n      </div>\n    ';var n=document.querySelector(".vision-photo-gallery");this.galleryContainer=n,this.toggleOverlayMessage("Загрузка...");var r=o.querySelector(".vg-main-photo"),i=o.querySelector(".vg-gallery"),s=this.controls.upload;this.getPhotos().then((function(t){if(r.innerHTML=e.createPhotoElement({main:!0,empty:!0,photoId:null}),s&&(i.innerHTML=e.createPhotoElement({main:!1,empty:!0,photoId:null})),t.ok)return t.json();r.innerHTML=e.createNoPhotoElement(),e.initEvents(),e.toggleOverlayMessage()}),(function(t){e.toggleOverlayMessage(),e.handleError({message:t}),e.initEvents()})).then((function(o){if(!o||!o.length)return r.innerHTML=e.createNoPhotoElement(),i.parentElement.classList.add("hidden"),void e.toggleOverlayMessage();var n=o.find((function(t){return t.main})),a=o.filter((function(t){return!t.main}));if(n?r.innerHTML=e.createPhotoElement(n):r.parentElement.classList.add("hidden"),a.length){var u="";a.forEach((function(t){return u+=e.createPhotoElement(t)})),s&&(u+=e.createPhotoElement({main:!1,empty:!0,photoId:null})),i.innerHTML=u}else s||i.parentElement.classList.add("hidden");var l={};"PHOTO_BIOMETRY_ADD"===t.action?l={add_photo_type:t.actionType?t.actionType:e.actionType,main_photo_replaced:o.length>0}:"PHOTO_BIOMETRY_REMOVE"===t.action&&(l={main_photo:t.isMainPhoto}),e.initEvents(),e.toggleOverlayMessage(),e.handleSuccess(t.action,l)}),(function(t){e.handleError({message:t}),e.toggleOverlayMessage(),e.initEvents()})).catch((function(t){e.toggleOverlayMessage(),e.handleError({message:t}),e.initEvents()})),this.initEvents()}},{key:"createPhotoElement",value:function(t){var e=t.photoId,o=t.main,n=t.empty,r=t.path,i=t.avatarUrl,s=this.controls,a=s.disableAll,u=s.upload,l=s.update,h=s.remove,c=void 0===h?!n:h,d="",f="",p="",y="";return!i&&r&&(p='style="background-image: url('.concat(r,')"')),i&&(p='style="background-image: url('.concat(i,')"')),o?(y='data-main="'.concat(o,'"'),n?(f="vg-photo vg-photo--main",d=this.getPhotoButtons({upload:u})):(f="vg-photo vg-photo--main",d=this.getPhotoButtons({remove:c}))):n?(f="vg-gallery__item vg-photo vg-photo--upload",d=this.getPhotoButtons({uploadIcon:u})):(f="vg-gallery__item vg-photo",d=this.getPhotoButtons({update:l,remove:c})),'\n      <div class="'.concat(f,'"\n        ').concat(p,'\n        data-photo-id="').concat(e,'"\n        ').concat(y,">\n        ").concat(a?"":d,"\n        </div>\n      ")}},{key:"createNoPhotoElement",value:function(){return'\n      <div class="vg-photo vg-photo--main">\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="-256 -256 1024 1024">\n          <path fill="#4a5266"\n            d="M437 310.8c-28.4-28.4-62.2-49.2-99.1-61.7 34.1-25.2 56.2-65.6 56.2-111.1C394.1 61.9 332.1 0 256 0S117.9 61.9 117.9 138.1c0 45.5 22.1 85.9 56.2 111.1 -36.9 12.4-70.8 33.3-99.1 61.7C26.6 359.2 0 423.5 0 491.8 0 503 9 512 20.2 512h471.7c11.1 0 20.2-9 20.2-20.2C512 423.5 485.4 359.2 437 310.8zM158.2 138.1c0-53.9 43.9-97.8 97.8-97.8 53.9 0 97.8 43.9 97.8 97.8 0 53.9-43.9 97.8-97.8 97.8C202.1 235.8 158.2 192 158.2 138.1zM41.2 471.7C51.4 362.2 143.9 276.2 256 276.2s204.6 86 214.8 195.5H41.2z"/>\n        </svg>\n      </div>\n    '}},{key:"getPhotoButtons",value:function(t){if(t.disableAll)return"";var e={remove:'<button class="vg-photo__button vg-button vg-button--red" data-action="remove-photo">Удалить</button>',upload:'<button class="vg-photo__button vg-button" data-action="upload-photo">Загрузить</button>',uploadIcon:'<button class="vg-photo__button vg-button vg-button--upload" data-action="upload-photo">&#43;</button>',update:'<button class="vg-photo__button vg-button vg-button--green" data-action="update-photo">Выбрать</button>'};return Object.keys(t).reduce((function(o,n){return t[n]&&(o+=e[n]),o}),"")}},{key:"initEvents",value:function(){var t=this;this.rootElement.querySelectorAll("button").forEach((function(e){e.addEventListener("click",t.router[e.dataset.action],!1)}))}}],o&&k(e.prototype,o),t}();return e.default}()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVmlzaW9uUGhvdG9HYWxsZXJ5LmpzIiwibWFwcGluZ3MiOiJDQUFBLFNBQTJDQSxFQUFNQyxHQUMxQixpQkFBWkMsU0FBMEMsaUJBQVhDLE9BQ3hDQSxPQUFPRCxRQUFVRCxJQUNRLG1CQUFYRyxRQUF5QkEsT0FBT0MsSUFDOUNELE9BQU8sR0FBSUgsR0FDZSxpQkFBWkMsUUFDZEEsUUFBNEIsbUJBQUlELElBRWhDRCxFQUF5QixtQkFBSUMsSUFSL0IsQ0FTR0ssTUFBTSxXQUNULE8sd0JDVEEsSUFBSUMsRUFBc0IsQ0NBMUJBLEVBQXdCLFNBQVNMLEVBQVNNLEdBQ3pDLElBQUksSUFBSUMsS0FBT0QsRUFDWEQsRUFBb0JHLEVBQUVGLEVBQVlDLEtBQVNGLEVBQW9CRyxFQUFFUixFQUFTTyxJQUM1RUUsT0FBT0MsZUFBZVYsRUFBU08sRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLE1DSjNFRixFQUF3QixTQUFTUSxFQUFLQyxHQUFRLE9BQU9MLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEssMkNDQS9GLElBQUlJLEVBQ3FCLG9CQUFmQyxZQUE4QkEsWUFDckIsb0JBQVRDLE1BQXdCQSxXQUNiLElBQVhGLEdBQTBCQSxFQUVoQ0csRUFDWSxvQkFBcUJILEVBRGpDRyxFQUVRLFdBQVlILEdBQVUsYUFBY0ksT0FGNUNELEVBSUEsZUFBZ0JILEdBQ2hCLFNBQVVBLEdBQ1YsV0FDRSxJQUVFLE9BREEsSUFBSUssTUFDRyxFQUNQLE1BQU9DLEdBQ1AsT0FBTyxHQUxYLEdBTkFILEVBY1EsYUFBY0gsRUFkdEJHLEVBZVcsZ0JBQWlCSCxFQU9oQyxHQUFJRyxFQUNGLElBQUlJLEVBQWMsQ0FDaEIscUJBQ0Esc0JBQ0EsNkJBQ0Esc0JBQ0EsdUJBQ0Esc0JBQ0EsdUJBQ0Esd0JBQ0EseUJBR0VDLEVBQ0ZDLFlBQVlDLFFBQ1osU0FBU2YsR0FDUCxPQUFPQSxHQUFPWSxFQUFZSSxRQUFRcEIsT0FBT00sVUFBVWUsU0FBU2IsS0FBS0osS0FBUyxHQUloRixTQUFTa0IsRUFBY0MsR0FJckIsR0FIb0IsaUJBQVRBLElBQ1RBLEVBQU9DLE9BQU9ELElBRVosNkJBQTZCRSxLQUFLRixJQUFrQixLQUFUQSxFQUM3QyxNQUFNLElBQUlHLFVBQVUsNENBQThDSCxFQUFPLEtBRTNFLE9BQU9BLEVBQUtJLGNBR2QsU0FBU0MsRUFBZUMsR0FJdEIsTUFIcUIsaUJBQVZBLElBQ1RBLEVBQVFMLE9BQU9LLElBRVZBLEVBSVQsU0FBU0MsRUFBWUMsR0FDbkIsSUFBSUMsRUFBVyxDQUNiQyxLQUFNLFdBQ0osSUFBSUosRUFBUUUsRUFBTUcsUUFDbEIsTUFBTyxDQUFDQyxVQUFnQkMsSUFBVlAsRUFBcUJBLE1BQU9BLEtBVTlDLE9BTklqQixJQUNGb0IsRUFBU25CLE9BQU9tQixVQUFZLFdBQzFCLE9BQU9BLElBSUpBLEVBR0YsU0FBU0ssRUFBUUMsR0FDdEIzQyxLQUFLNEMsSUFBTSxHQUVQRCxhQUFtQkQsRUFDckJDLEVBQVFFLFNBQVEsU0FBU1gsRUFBT04sR0FDOUI1QixLQUFLOEMsT0FBT2xCLEVBQU1NLEtBQ2pCbEMsTUFDTStDLE1BQU1DLFFBQVFMLEdBQ3ZCQSxFQUFRRSxTQUFRLFNBQVNJLEdBQ3ZCakQsS0FBSzhDLE9BQU9HLEVBQU8sR0FBSUEsRUFBTyxNQUM3QmpELE1BQ00yQyxHQUNUdEMsT0FBTzZDLG9CQUFvQlAsR0FBU0UsU0FBUSxTQUFTakIsR0FDbkQ1QixLQUFLOEMsT0FBT2xCLEVBQU1lLEVBQVFmLE1BQ3pCNUIsTUFnRVAsU0FBU21ELEVBQVNDLEdBQ2hCLEdBQUlBLEVBQUtDLFNBQ1AsT0FBT0MsUUFBUUMsT0FBTyxJQUFJeEIsVUFBVSxpQkFFdENxQixFQUFLQyxVQUFXLEVBR2xCLFNBQVNHLEVBQWdCQyxHQUN2QixPQUFPLElBQUlILFNBQVEsU0FBU0ksRUFBU0gsR0FDbkNFLEVBQU9FLE9BQVMsV0FDZEQsRUFBUUQsRUFBT0csU0FFakJILEVBQU9JLFFBQVUsV0FDZk4sRUFBT0UsRUFBT0ssV0FLcEIsU0FBU0MsRUFBc0JDLEdBQzdCLElBQUlQLEVBQVMsSUFBSVEsV0FDYkMsRUFBVVYsRUFBZ0JDLEdBRTlCLE9BREFBLEVBQU9VLGtCQUFrQkgsR0FDbEJFLEVBb0JULFNBQVNFLEVBQVlDLEdBQ25CLEdBQUlBLEVBQUlDLE1BQ04sT0FBT0QsRUFBSUMsTUFBTSxHQUVqQixJQUFJQyxFQUFPLElBQUlDLFdBQVdILEVBQUlJLFlBRTlCLE9BREFGLEVBQUtHLElBQUksSUFBSUYsV0FBV0gsSUFDakJFLEVBQUtJLE9BSWhCLFNBQVNDLElBa0hQLE9BakhBNUUsS0FBS3FELFVBQVcsRUFFaEJyRCxLQUFLNkUsVUFBWSxTQUFTekIsR0FoTTVCLElBQW9CM0MsRUEyTWhCVCxLQUFLcUQsU0FBV3JELEtBQUtxRCxTQUNyQnJELEtBQUs4RSxVQUFZMUIsRUFDWkEsRUFFc0IsaUJBQVRBLEVBQ2hCcEQsS0FBSytFLFVBQVkzQixFQUNSbkMsR0FBZ0JFLEtBQUtSLFVBQVVxRSxjQUFjNUIsR0FDdERwRCxLQUFLaUYsVUFBWTdCLEVBQ1JuQyxHQUFvQmlFLFNBQVN2RSxVQUFVcUUsY0FBYzVCLEdBQzlEcEQsS0FBS21GLGNBQWdCL0IsRUFDWm5DLEdBQXdCbUUsZ0JBQWdCekUsVUFBVXFFLGNBQWM1QixHQUN6RXBELEtBQUsrRSxVQUFZM0IsRUFBSzFCLFdBQ2JULEdBQXVCQSxJQXZObEJSLEVBdU42QzJDLElBdE5qRGlDLFNBQVMxRSxVQUFVcUUsY0FBY3ZFLElBdU4zQ1QsS0FBS3NGLGlCQUFtQmxCLEVBQVloQixFQUFLdUIsUUFFekMzRSxLQUFLOEUsVUFBWSxJQUFJM0QsS0FBSyxDQUFDbkIsS0FBS3NGLG9CQUN2QnJFLElBQXdCTSxZQUFZWixVQUFVcUUsY0FBYzVCLElBQVM5QixFQUFrQjhCLElBQ2hHcEQsS0FBS3NGLGlCQUFtQmxCLEVBQVloQixHQUVwQ3BELEtBQUsrRSxVQUFZM0IsRUFBTy9DLE9BQU9NLFVBQVVlLFNBQVNiLEtBQUt1QyxHQWhCdkRwRCxLQUFLK0UsVUFBWSxHQW1CZC9FLEtBQUsyQyxRQUFRbkMsSUFBSSxrQkFDQSxpQkFBVDRDLEVBQ1RwRCxLQUFLMkMsUUFBUStCLElBQUksZUFBZ0IsNEJBQ3hCMUUsS0FBS2lGLFdBQWFqRixLQUFLaUYsVUFBVU0sS0FDMUN2RixLQUFLMkMsUUFBUStCLElBQUksZUFBZ0IxRSxLQUFLaUYsVUFBVU0sTUFDdkN0RSxHQUF3Qm1FLGdCQUFnQnpFLFVBQVVxRSxjQUFjNUIsSUFDekVwRCxLQUFLMkMsUUFBUStCLElBQUksZUFBZ0IscURBS25DekQsSUFDRmpCLEtBQUtnRSxLQUFPLFdBQ1YsSUFBSXdCLEVBQVdyQyxFQUFTbkQsTUFDeEIsR0FBSXdGLEVBQ0YsT0FBT0EsRUFHVCxHQUFJeEYsS0FBS2lGLFVBQ1AsT0FBTzNCLFFBQVFJLFFBQVExRCxLQUFLaUYsV0FDdkIsR0FBSWpGLEtBQUtzRixpQkFDZCxPQUFPaEMsUUFBUUksUUFBUSxJQUFJdkMsS0FBSyxDQUFDbkIsS0FBS3NGLG9CQUNqQyxHQUFJdEYsS0FBS21GLGNBQ2QsTUFBTSxJQUFJTSxNQUFNLHdDQUVoQixPQUFPbkMsUUFBUUksUUFBUSxJQUFJdkMsS0FBSyxDQUFDbkIsS0FBSytFLGNBSTFDL0UsS0FBSzBGLFlBQWMsV0FDakIsT0FBSTFGLEtBQUtzRixpQkFDVW5DLEVBQVNuRCxRQUl0QnVCLFlBQVlDLE9BQU94QixLQUFLc0Ysa0JBQ25CaEMsUUFBUUksUUFDYjFELEtBQUtzRixpQkFBaUJYLE9BQU9MLE1BQzNCdEUsS0FBS3NGLGlCQUFpQkssV0FDdEIzRixLQUFLc0YsaUJBQWlCSyxXQUFhM0YsS0FBS3NGLGlCQUFpQmIsYUFJdERuQixRQUFRSSxRQUFRMUQsS0FBS3NGLG1CQUd2QnRGLEtBQUtnRSxPQUFPNEIsS0FBSzdCLEtBSzlCL0QsS0FBSzZGLEtBQU8sV0FDVixJQW5Ib0I3QixFQUNsQlAsRUFDQVMsRUFpSEVzQixFQUFXckMsRUFBU25ELE1BQ3hCLEdBQUl3RixFQUNGLE9BQU9BLEVBR1QsR0FBSXhGLEtBQUtpRixVQUNQLE9BekhrQmpCLEVBeUhJaEUsS0FBS2lGLFVBdkgzQmYsRUFBVVYsRUFEVkMsRUFBUyxJQUFJUSxZQUVqQlIsRUFBT3FDLFdBQVc5QixHQUNYRSxFQXNIRSxHQUFJbEUsS0FBS3NGLGlCQUNkLE9BQU9oQyxRQUFRSSxRQXBIckIsU0FBK0JXLEdBSTdCLElBSEEsSUFBSUUsRUFBTyxJQUFJQyxXQUFXSCxHQUN0QjBCLEVBQVEsSUFBSWhELE1BQU13QixFQUFLeUIsUUFFbEJDLEVBQUksRUFBR0EsRUFBSTFCLEVBQUt5QixPQUFRQyxJQUMvQkYsRUFBTUUsR0FBS3BFLE9BQU9xRSxhQUFhM0IsRUFBSzBCLElBRXRDLE9BQU9GLEVBQU1JLEtBQUssSUE2R1NDLENBQXNCcEcsS0FBS3NGLG1CQUM3QyxHQUFJdEYsS0FBS21GLGNBQ2QsTUFBTSxJQUFJTSxNQUFNLHdDQUVoQixPQUFPbkMsUUFBUUksUUFBUTFELEtBQUsrRSxZQUk1QjlELElBQ0ZqQixLQUFLcUcsU0FBVyxXQUNkLE9BQU9yRyxLQUFLNkYsT0FBT0QsS0FBS1UsS0FJNUJ0RyxLQUFLdUcsS0FBTyxXQUNWLE9BQU92RyxLQUFLNkYsT0FBT0QsS0FBS1ksS0FBS0MsUUFHeEJ6RyxLQWxPVDBDLEVBQVEvQixVQUFVbUMsT0FBUyxTQUFTbEIsRUFBTU0sR0FDeENOLEVBQU9ELEVBQWNDLEdBQ3JCTSxFQUFRRCxFQUFlQyxHQUN2QixJQUFJd0UsRUFBVzFHLEtBQUs0QyxJQUFJaEIsR0FDeEI1QixLQUFLNEMsSUFBSWhCLEdBQVE4RSxFQUFXQSxFQUFXLEtBQU94RSxFQUFRQSxHQUd4RFEsRUFBUS9CLFVBQWtCLE9BQUksU0FBU2lCLFVBQzlCNUIsS0FBSzRDLElBQUlqQixFQUFjQyxLQUdoQ2MsRUFBUS9CLFVBQVVILElBQU0sU0FBU29CLEdBRS9CLE9BREFBLEVBQU9ELEVBQWNDLEdBQ2Q1QixLQUFLMkcsSUFBSS9FLEdBQVE1QixLQUFLNEMsSUFBSWhCLEdBQVEsTUFHM0NjLEVBQVEvQixVQUFVZ0csSUFBTSxTQUFTL0UsR0FDL0IsT0FBTzVCLEtBQUs0QyxJQUFJaEMsZUFBZWUsRUFBY0MsS0FHL0NjLEVBQVEvQixVQUFVK0QsSUFBTSxTQUFTOUMsRUFBTU0sR0FDckNsQyxLQUFLNEMsSUFBSWpCLEVBQWNDLElBQVNLLEVBQWVDLElBR2pEUSxFQUFRL0IsVUFBVWtDLFFBQVUsU0FBUytELEVBQVVDLEdBQzdDLElBQUssSUFBSWpGLEtBQVE1QixLQUFLNEMsSUFDaEI1QyxLQUFLNEMsSUFBSWhDLGVBQWVnQixJQUMxQmdGLEVBQVMvRixLQUFLZ0csRUFBUzdHLEtBQUs0QyxJQUFJaEIsR0FBT0EsRUFBTTVCLE9BS25EMEMsRUFBUS9CLFVBQVVtRyxLQUFPLFdBQ3ZCLElBQUkxRSxFQUFRLEdBSVosT0FIQXBDLEtBQUs2QyxTQUFRLFNBQVNYLEVBQU9OLEdBQzNCUSxFQUFNMkUsS0FBS25GLE1BRU5PLEVBQVlDLElBR3JCTSxFQUFRL0IsVUFBVXFHLE9BQVMsV0FDekIsSUFBSTVFLEVBQVEsR0FJWixPQUhBcEMsS0FBSzZDLFNBQVEsU0FBU1gsR0FDcEJFLEVBQU0yRSxLQUFLN0UsTUFFTkMsRUFBWUMsSUFHckJNLEVBQVEvQixVQUFVc0csUUFBVSxXQUMxQixJQUFJN0UsRUFBUSxHQUlaLE9BSEFwQyxLQUFLNkMsU0FBUSxTQUFTWCxFQUFPTixHQUMzQlEsRUFBTTJFLEtBQUssQ0FBQ25GLEVBQU1NLE9BRWJDLEVBQVlDLElBR2pCbkIsSUFDRnlCLEVBQVEvQixVQUFVTyxPQUFPbUIsVUFBWUssRUFBUS9CLFVBQVVzRyxTQTZLekQsSUFBSUMsRUFBVSxDQUFDLFNBQVUsTUFBTyxPQUFRLFVBQVcsT0FBUSxPQU9wRCxTQUFTQyxFQUFRQyxFQUFPQyxHQUM3QixLQUFNckgsZ0JBQWdCbUgsR0FDcEIsTUFBTSxJQUFJcEYsVUFBVSw4RkFJdEIsSUFYdUJ1RixFQUNuQkMsRUFVQW5FLEdBREppRSxFQUFVQSxHQUFXLElBQ0ZqRSxLQUVuQixHQUFJZ0UsYUFBaUJELEVBQVMsQ0FDNUIsR0FBSUMsRUFBTS9ELFNBQ1IsTUFBTSxJQUFJdEIsVUFBVSxnQkFFdEIvQixLQUFLd0gsSUFBTUosRUFBTUksSUFDakJ4SCxLQUFLeUgsWUFBY0wsRUFBTUssWUFDcEJKLEVBQVExRSxVQUNYM0MsS0FBSzJDLFFBQVUsSUFBSUQsRUFBUTBFLEVBQU16RSxVQUVuQzNDLEtBQUtzSCxPQUFTRixFQUFNRSxPQUNwQnRILEtBQUswSCxLQUFPTixFQUFNTSxLQUNsQjFILEtBQUsySCxPQUFTUCxFQUFNTyxPQUNmdkUsR0FBMkIsTUFBbkJnRSxFQUFNdEMsWUFDakIxQixFQUFPZ0UsRUFBTXRDLFVBQ2JzQyxFQUFNL0QsVUFBVyxRQUduQnJELEtBQUt3SCxJQUFNM0YsT0FBT3VGLEdBWXBCLEdBVEFwSCxLQUFLeUgsWUFBY0osRUFBUUksYUFBZXpILEtBQUt5SCxhQUFlLGVBQzFESixFQUFRMUUsU0FBWTNDLEtBQUsyQyxVQUMzQjNDLEtBQUsyQyxRQUFVLElBQUlELEVBQVEyRSxFQUFRMUUsVUFFckMzQyxLQUFLc0gsUUFwQ0RDLEdBRG1CRCxFQXFDT0QsRUFBUUMsUUFBVXRILEtBQUtzSCxRQUFVLE9BcEMxQ00sY0FDZFYsRUFBUXpGLFFBQVE4RixJQUFZLEVBQUlBLEVBQVVELEdBb0NqRHRILEtBQUswSCxLQUFPTCxFQUFRSyxNQUFRMUgsS0FBSzBILE1BQVEsS0FDekMxSCxLQUFLMkgsT0FBU04sRUFBUU0sUUFBVTNILEtBQUsySCxPQUNyQzNILEtBQUs2SCxTQUFXLE1BRUssUUFBaEI3SCxLQUFLc0gsUUFBb0MsU0FBaEJ0SCxLQUFLc0gsU0FBc0JsRSxFQUN2RCxNQUFNLElBQUlyQixVQUFVLDZDQUl0QixHQUZBL0IsS0FBSzZFLFVBQVV6QixLQUVLLFFBQWhCcEQsS0FBS3NILFFBQW9DLFNBQWhCdEgsS0FBS3NILFFBQ1YsYUFBbEJELEVBQVFTLE9BQTBDLGFBQWxCVCxFQUFRUyxPQUFzQixDQUVoRSxJQUFJQyxFQUFnQixnQkFDaEJBLEVBQWNqRyxLQUFLOUIsS0FBS3dILEtBRTFCeEgsS0FBS3dILElBQU14SCxLQUFLd0gsSUFBSVEsUUFBUUQsRUFBZSxRQUFTLElBQUlFLE1BQU9DLFdBSS9EbEksS0FBS3dILE1BRGUsS0FDTzFGLEtBQUs5QixLQUFLd0gsS0FBTyxJQUFNLEtBQU8sTUFBTyxJQUFJUyxNQUFPQyxXQVVuRixTQUFTNUIsRUFBT2xELEdBQ2QsSUFBSStFLEVBQU8sSUFBSWpELFNBWWYsT0FYQTlCLEVBQ0dnRixPQUNBQyxNQUFNLEtBQ054RixTQUFRLFNBQVN5RixHQUNoQixHQUFJQSxFQUFPLENBQ1QsSUFBSUQsRUFBUUMsRUFBTUQsTUFBTSxLQUNwQnpHLEVBQU95RyxFQUFNOUYsUUFBUXlGLFFBQVEsTUFBTyxLQUNwQzlGLEVBQVFtRyxFQUFNbEMsS0FBSyxLQUFLNkIsUUFBUSxNQUFPLEtBQzNDRyxFQUFLckYsT0FBT3lGLG1CQUFtQjNHLEdBQU8yRyxtQkFBbUJyRyxRQUd4RGlHLEVBNkJGLFNBQVNLLEVBQVNDLEVBQVVwQixHQUNqQyxLQUFNckgsZ0JBQWdCd0ksR0FDcEIsTUFBTSxJQUFJekcsVUFBVSw4RkFFakJzRixJQUNIQSxFQUFVLElBR1pySCxLQUFLdUYsS0FBTyxVQUNadkYsS0FBSzBJLFlBQTRCakcsSUFBbkI0RSxFQUFRcUIsT0FBdUIsSUFBTXJCLEVBQVFxQixPQUMzRDFJLEtBQUsySSxHQUFLM0ksS0FBSzBJLFFBQVUsS0FBTzFJLEtBQUswSSxPQUFTLElBQzlDMUksS0FBSzRJLGdCQUFvQ25HLElBQXZCNEUsRUFBUXVCLFdBQTJCLEdBQUssR0FBS3ZCLEVBQVF1QixXQUN2RTVJLEtBQUsyQyxRQUFVLElBQUlELEVBQVEyRSxFQUFRMUUsU0FDbkMzQyxLQUFLd0gsSUFBTUgsRUFBUUcsS0FBTyxHQUMxQnhILEtBQUs2RSxVQUFVNEQsR0E1RGpCdEIsRUFBUXhHLFVBQVVrSSxNQUFRLFdBQ3hCLE9BQU8sSUFBSTFCLEVBQVFuSCxLQUFNLENBQUNvRCxLQUFNcEQsS0FBSzhFLGFBMkN2Q0YsRUFBSy9ELEtBQUtzRyxFQUFReEcsV0FtQmxCaUUsRUFBSy9ELEtBQUsySCxFQUFTN0gsV0FFbkI2SCxFQUFTN0gsVUFBVWtJLE1BQVEsV0FDekIsT0FBTyxJQUFJTCxFQUFTeEksS0FBSzhFLFVBQVcsQ0FDbEM0RCxPQUFRMUksS0FBSzBJLE9BQ2JFLFdBQVk1SSxLQUFLNEksV0FDakJqRyxRQUFTLElBQUlELEVBQVExQyxLQUFLMkMsU0FDMUI2RSxJQUFLeEgsS0FBS3dILE9BSWRnQixFQUFTMUUsTUFBUSxXQUNmLElBQUlnRixFQUFXLElBQUlOLEVBQVMsS0FBTSxDQUFDRSxPQUFRLEVBQUdFLFdBQVksS0FFMUQsT0FEQUUsRUFBU3ZELEtBQU8sUUFDVHVELEdBR1QsSUFBSUMsRUFBbUIsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLEtBRTVDUCxFQUFTUSxTQUFXLFNBQVN4QixFQUFLa0IsR0FDaEMsSUFBMEMsSUFBdENLLEVBQWlCdEgsUUFBUWlILEdBQzNCLE1BQU0sSUFBSU8sV0FBVyx1QkFHdkIsT0FBTyxJQUFJVCxFQUFTLEtBQU0sQ0FBQ0UsT0FBUUEsRUFBUS9GLFFBQVMsQ0FBQ3VHLFNBQVUxQixNQUcxRCxJQUFJMkIsRUFBZXJJLEVBQU9xSSxhQUNqQyxJQUNFLElBQUlBLEVBQ0osTUFBT0MsSUFDUEQsRUFBZSxTQUFTRSxFQUFTekgsR0FDL0I1QixLQUFLcUosUUFBVUEsRUFDZnJKLEtBQUs0QixLQUFPQSxFQUNaLElBQUlrQyxFQUFRMkIsTUFBTTRELEdBQ2xCckosS0FBS3NKLE1BQVF4RixFQUFNd0YsUUFFUjNJLFVBQVlOLE9BQU9rSixPQUFPOUQsTUFBTTlFLFdBQzdDd0ksRUFBYXhJLFVBQVU2SSxZQUFjTCxFQUdoQyxTQUFTLEVBQU0vQixFQUFPcUMsR0FDM0IsT0FBTyxJQUFJbkcsU0FBUSxTQUFTSSxFQUFTSCxHQUNuQyxJQUFJbUcsRUFBVSxJQUFJdkMsRUFBUUMsRUFBT3FDLEdBRWpDLEdBQUlDLEVBQVEvQixRQUFVK0IsRUFBUS9CLE9BQU9nQyxRQUNuQyxPQUFPcEcsRUFBTyxJQUFJNEYsRUFBYSxVQUFXLGVBRzVDLElBQUlTLEVBQU0sSUFBSUMsZUFFZCxTQUFTQyxJQUNQRixFQUFJRyxRQUdOSCxFQUFJakcsT0FBUyxXQUNYLElBbkdnQnFHLEVBQ2hCckgsRUFrR0kwRSxFQUFVLENBQ1pxQixPQUFRa0IsRUFBSWxCLE9BQ1pFLFdBQVlnQixFQUFJaEIsV0FDaEJqRyxTQXRHY3FILEVBc0dRSixFQUFJSyx5QkFBMkIsR0FyR3ZEdEgsRUFBVSxJQUFJRCxFQUdRc0gsRUFBV2hDLFFBQVEsZUFBZ0IsS0FLMURLLE1BQU0sTUFDTnpGLEtBQUksU0FBU0ssR0FDWixPQUFnQyxJQUF6QkEsRUFBT3hCLFFBQVEsTUFBY3dCLEVBQU9pSCxPQUFPLEVBQUdqSCxFQUFPK0MsUUFBVS9DLEtBRXZFSixTQUFRLFNBQVNzSCxHQUNoQixJQUFJQyxFQUFRRCxFQUFLOUIsTUFBTSxLQUNuQmxJLEVBQU1pSyxFQUFNN0gsUUFBUTZGLE9BQ3hCLEdBQUlqSSxFQUFLLENBQ1AsSUFBSStCLEVBQVFrSSxFQUFNakUsS0FBSyxLQUFLaUMsT0FDNUJ6RixFQUFRRyxPQUFPM0MsRUFBSytCLE9BR25CUyxJQW1GSDBFLEVBQVFHLElBQU0sZ0JBQWlCb0MsRUFBTUEsRUFBSVMsWUFBY2hELEVBQVExRSxRQUFRbkMsSUFBSSxpQkFDM0UsSUFBSTRDLEVBQU8sYUFBY3dHLEVBQU1BLEVBQUlkLFNBQVdjLEVBQUlVLGFBQ2xEQyxZQUFXLFdBQ1Q3RyxFQUFRLElBQUk4RSxFQUFTcEYsRUFBTWlFLE1BQzFCLElBR0x1QyxFQUFJL0YsUUFBVSxXQUNaMEcsWUFBVyxXQUNUaEgsRUFBTyxJQUFJeEIsVUFBVSw2QkFDcEIsSUFHTDZILEVBQUlZLFVBQVksV0FDZEQsWUFBVyxXQUNUaEgsRUFBTyxJQUFJeEIsVUFBVSw2QkFDcEIsSUFHTDZILEVBQUlhLFFBQVUsV0FDWkYsWUFBVyxXQUNUaEgsRUFBTyxJQUFJNEYsRUFBYSxVQUFXLGlCQUNsQyxJQVdMUyxFQUFJYyxLQUFLaEIsRUFBUXBDLE9BUmpCLFNBQWdCRSxHQUNkLElBQ0UsTUFBZSxLQUFSQSxHQUFjMUcsRUFBT29JLFNBQVN5QixLQUFPN0osRUFBT29JLFNBQVN5QixLQUFPbkQsRUFDbkUsTUFBT3BHLEdBQ1AsT0FBT29HLEdBSWNvRCxDQUFPbEIsRUFBUWxDLE1BQU0sR0FFbEIsWUFBeEJrQyxFQUFRakMsWUFDVm1DLEVBQUlpQixpQkFBa0IsRUFDVyxTQUF4Qm5CLEVBQVFqQyxjQUNqQm1DLEVBQUlpQixpQkFBa0IsR0FHcEIsaUJBQWtCakIsSUFDaEIzSSxFQUNGMkksRUFBSWtCLGFBQWUsT0FFbkI3SixHQUNBeUksRUFBUS9HLFFBQVFuQyxJQUFJLGtCQUN5RCxJQUE3RWtKLEVBQVEvRyxRQUFRbkMsSUFBSSxnQkFBZ0JpQixRQUFRLDhCQUU1Q21JLEVBQUlrQixhQUFlLGlCQUluQnJCLEdBQWdDLGlCQUFqQkEsRUFBSzlHLFNBQTBCOEcsRUFBSzlHLG1CQUFtQkQsRUFLeEVnSCxFQUFRL0csUUFBUUUsU0FBUSxTQUFTWCxFQUFPTixHQUN0Q2dJLEVBQUltQixpQkFBaUJuSixFQUFNTSxNQUw3QjdCLE9BQU82QyxvQkFBb0J1RyxFQUFLOUcsU0FBU0UsU0FBUSxTQUFTakIsR0FDeERnSSxFQUFJbUIsaUJBQWlCbkosRUFBTUssRUFBZXdILEVBQUs5RyxRQUFRZixRQVF2RDhILEVBQVEvQixTQUNWK0IsRUFBUS9CLE9BQU9xRCxpQkFBaUIsUUFBU2xCLEdBRXpDRixFQUFJcUIsbUJBQXFCLFdBRUEsSUFBbkJyQixFQUFJc0IsWUFDTnhCLEVBQVEvQixPQUFPd0Qsb0JBQW9CLFFBQVNyQixLQUtsREYsRUFBSXdCLFVBQWtDLElBQXRCMUIsRUFBUTVFLFVBQTRCLEtBQU80RSxFQUFRNUUsYyxta0NBSXZFLEVBQU11RyxVQUFXLEVBRVp2SyxFQUFPd0ssUUFDVnhLLEVBQU93SyxNQUFRLEVBQ2Z4SyxFQUFPNEIsUUFBVUEsRUFDakI1QixFQUFPcUcsUUFBVUEsRUFDakJyRyxFQUFPMEgsU0FBV0EsRyxJQ25sQkMrQyxFQUFBQSxXQTRCbkIsY0FTZSxXQVJEQyxFQVFDLEVBUkRBLFdBQ0E5TCxFQU9DLEVBUERBLEtBQ0ErTCxFQU1DLEVBTkRBLFdBQ0FDLEVBS0MsRUFMREEsZUFDQUMsRUFJQyxFQUpEQSxTQUNBQyxFQUdDLEVBSERBLE1BQ0FDLEVBRUMsRUFGREEsU0FFQyxJQUREQyxZQUFBQSxPQUNDLFNBQ2IsRyw0RkFEYSxtQ0FwQ0ksTUFvQ0oscUJBbkNELE1BbUNDLGVBbENQLE1Ba0NPLGtCQWpDSixDQUNUQyxZQUFZLEVBQ1pDLFFBQVEsRUFDUkMsUUFBUSxFQUNSQyxRQUFRLElBNkJLLHNCQTNCRCxHQTJCQyxvQkExQkYsSUEwQkUsdUJBeUNDLE1BekNELHlCQTBDRyxNQTFDSCxnQkFncEJOLENBS1AsZUFBZ0IsU0FBQUMsR0FDZCxJQUFNQyxFQUFZLEVBQUtDLFlBQVlDLGNBQWMsc0JBRWpERixFQUFVcEIsaUJBQWlCLFNBQVUsRUFBS3VCLE9BQU8sdUJBQ2pESCxFQUFVSSxTQU1aLHFCQUFzQixTQUFBTCxHQUNwQixJQUFNTSxFQUFPTixFQUFNTyxPQUFPQyxNQUFNLEdBQzFCbEosRUFBUyxJQUFJUSxXQUVuQlIsRUFBT21KLGNBQWNILEdBRXJCaEosRUFBT0UsT0FBUyxXQUNkLEVBQUtrSixTQUFTcEosRUFBT0csUUFBUWdDLE1BQzNCLFNBQUFrRCxHQUNFLEdBQUlBLEVBQVNILEdBQ1gsRUFBS21FLEtBQUssQ0FBQ0MsT0FBUSxxQkFBc0J2QixXQUFZLHNCQUNoRCxHQUF3QixNQUFwQjFDLEVBQVNKLE9BQ2xCLE9BQU9JLEVBQVN2QyxVQUdwQixTQUFBekMsR0FDRSxFQUFLa0osWUFBWSxDQUNmM0QsUUFBU3ZGLFFBTWpCTCxFQUFPSSxRQUFVLFdBQ2YsRUFBS21KLFlBQVksQ0FDZjNELFFBQVM1RixFQUFPSyxNQUNoQm1KLHFCQUFzQixxQ0FBRixPQUF1Q3hKLEVBQU9LLFdBUXhFLGVBQWdCLFNBQUFxSSxHQUNkLElBQU1lLEVBQWVmLEVBQU1PLE9BQU9TLFFBQVEsYUFDbkNDLEVBQVdGLEVBQWFHLFFBQXhCRCxRQUNERSxFQUFjSixFQUFhSyxVQUFVQyxTQUFTLGtCQUU5Q0osR0FDSixFQUFLSyxhQUFhTCxHQUFTeEgsTUFDekIsU0FBQWtELEdBQ0UsR0FBSUEsRUFBU0gsR0FDWCxFQUFLbUUsS0FBSyxDQUFDQyxPQUFRLHdCQUF5Qk8sWUFBQUEsU0FDdkMsR0FBd0IsTUFBcEJ4RSxFQUFTSixPQUNsQixPQUFPSSxFQUFTdkMsVUFHcEIsU0FBQXpDLEdBQ0UsRUFBS2tKLFlBQVksQ0FDZjNELFFBQVN2RixRQVVuQixlQUFnQixTQUFBcUksR0FDZCxJQUFNZSxFQUFlZixFQUFNTyxPQUFPUyxRQUFRLGFBQ25DQyxFQUFXRixFQUFhRyxRQUF4QkQsUUFDRE0sRUFBVVIsRUFBYVMsaUJBQWlCLFVBRXhDUCxJQUNKTSxFQUFRN0ssU0FBUSxTQUFBK0ssR0FBTSxPQUFJQSxFQUFPQyxhQUFhLFdBQVksZUFFMUQsRUFBS0MsZ0JBQWdCVixHQUFTeEgsTUFDNUIsU0FBQWtELEdBQ0UsR0FBSUEsRUFBU0gsR0FDWCxFQUFLbUUsS0FBSyxDQUFDQyxPQUFRLHFCQUFzQnZCLFdBQVkscUJBQ2hELEdBQXdCLE1BQXBCMUMsRUFBU0osT0FDbEIsT0FBT0ksRUFBU3ZDLFVBR3BCLFNBQUF6QyxHQUNFLEVBQUtrSixZQUFZLENBQ2YzRCxRQUFTdkYsWUE1dUJkcEUsRUFDSCxNQUFNLElBQUkrRixNQUFNLGdEQUdsQixJQUFNNEcsRUFBYzBCLFNBQVNDLGVBQWV0TyxHQUU1QyxJQUFNMk0sRUFHSixNQUFNLElBQUk1RyxNQUFNLDBEQUdsQixHQUxFekYsS0FBS3FNLFlBQWNBLEdBS2hCWixJQUFlQyxJQUFtQkMsRUFDckMsTUFBTSxJQUFJbEcsTUFBTSwrQ0FHZitGLElBQ0R4TCxLQUFLd0wsV0FBYUEsR0FHcEJ4TCxLQUFLaU8sU0FBVyxDQUNkQyxHQUFJLEtBQ0p2QyxTQUFVLEtBQ1ZELGVBQWdCLE1BR2xCMUwsS0FBS3lMLFdBQWFBLEVBQ2xCekwsS0FBSzBMLGVBQWlCQSxFQUN0QjFMLEtBQUsyTCxTQUFXQSxFQUNoQjNMLEtBQUs0TCxNQUFRQSxFQUNiNUwsS0FBSzZMLFNBQVdBLEVBQ2hCN0wsS0FBSzhMLFlBQWNBLEVBRW5COUwsS0FBSzhNLE8sK0NBY1AsV0FDRSxPQUFPOU0sS0FBS21PLGUsSUFPZCxTQUFrQkEsR0FDWkEsSUFDRm5PLEtBQUttTyxjQUFnQkEsSywyQkFRekIsV0FDRSxPQUFPbk8sS0FBS29PLGlCLElBT2QsU0FBb0JBLEdBQ2RBLElBQ0ZwTyxLQUFLb08sZ0JBQWtCQSxLLG9CQVMzQixZQUE0QixJQUFwQjNDLEVBQW9CLEVBQXBCQSxXQUFZRyxFQUFRLEVBQVJBLE1BQ2xCNUwsS0FBS3lMLFdBQWFBLEVBQ2xCekwsS0FBSzRMLE1BQVFBLEVBRWI1TCxLQUFLOE0sUyxzQkFPUCxXQUNFLE9BQU85TSxLQUFLaU8sU0FBU0MsSSxJQU92QixTQUFlekMsR0FDVEEsSUFDRnpMLEtBQUtpTyxTQUFTQyxHQUFLekMsSywwQkFRdkIsV0FDRSxPQUFPekwsS0FBS2lPLFNBQVN2QyxnQixJQU92QixTQUFtQkEsR0FDYkEsSUFDRjFMLEtBQUtpTyxTQUFTdkMsZUFBaUJBLEssb0JBUW5DLFdBQ0UsT0FBTzFMLEtBQUtpTyxTQUFTdEMsVSxJQU92QixTQUFhQSxHQUNQQSxJQUNGM0wsS0FBS2lPLFNBQVN0QyxTQUFXQSxLLHVCQVE3QixXQUNFLE9BQU8zTCxLQUFLcU0sYyxpQkFPZCxXQUNFLE9BQU9yTSxLQUFLNEwsTyxJQU9kLFNBQVVBLEdBQ0pBLElBQ0Y1TCxLQUFLNEwsTUFBUUEsSyxvQkFRakIsV0FDRSxPQUFPNUwsS0FBSzZMLFUsSUFPZCxTQUFhM0osR0FDWGxDLEtBQUs2TCxTQUFMLE9BQ0s3TCxLQUFLNkwsVUFDTDNKLEssdUJBUVAsV0FDRSxPQUFPbEMsS0FBSzhMLGEsSUFPZCxTQUFnQjVKLEdBQ2RsQyxLQUFLOEwsWUFBYzVKLEkseUJBUXJCLFNBQVltTSxHQUNWLElBQU9oRixFQUFpQ2dGLEVBQWpDaEYsUUFBUzRELEVBQXdCb0IsRUFBeEJwQixxQkFFaEIsR0FBSWpOLEtBQUttTyxjQUFlLENBQ3RCLElBQUlHLEVBQWdCLEdBRUcsV0FBbkIsRUFBT2pGLEtBQ0xBLEVBQVFrRixZQUNWRCxFQUFnQmpGLEVBQVFrRixZQUV4QmxPLE9BQU95RyxLQUFLdUMsR0FDVG1GLFVBQ0EzTCxTQUFRLFNBQUExQyxHQUNQbU8sR0FBaUIsR0FBSixPQUFPakYsRUFBUWxKLEdBQWYsYUFLckIsSUFBTXNPLEVBQWVILEVBQWN0SSxPQUMvQnNJLEVBQ0E5SCxLQUFLa0ksVUFBVXJGLEdBRW5CckosS0FBS21PLGNBQWNNLEVBQWMsY0FDNUIsSUFBSXhCLEVBQ1QsTUFBTSxJQUFJeEgsTUFBTXdILEdBRWhCMEIsUUFBUUMsSUFBSXZGLE0sMkJBU2hCLFNBQWMwRCxFQUFROEIsR0FDakI3TyxLQUFLb08saUJBQ05wTyxLQUFLb08sZ0JBQWdCckIsRUFBUThCLEsscUJBVWpDLFlBQW9DLElBQTNCQyxFQUEyQixFQUEzQkEsWUFBYUMsRUFBYyxFQUFkQSxZQUNkQyxFQUFrQixDQUN0QjFILE9BQVEsT0FDUkksS0FBTSxjQUNORCxZQUFhLGNBQ2I5RSxRQUFTLENBQ1AsZUFBZ0IsbUJBQ2hCLGNBQWUzQyxLQUFLNEwsT0FFdEJ4SSxLQUFNb0QsS0FBS2tJLFVBQVVLLElBR3ZCLE9BQU96RCxNQUFNLGtCQUFELE9BQW1Cd0QsRUFBbkIsS0FBbUNFLEssdUJBT2pELFdBQ0UsSUFBTWYsRUFBVyxHQVVqQixPQVJJak8sS0FBS3lMLGFBQWV6TCxLQUFLMEwsZUFDM0J1QyxFQUFTeEMsV0FBYXpMLEtBQUt5TCxXQUNsQnpMLEtBQUswTCxlQUNkdUMsRUFBU2dCLGlCQUFtQmpQLEtBQUswTCxlQUN4QjFMLEtBQUsyTCxXQUNkc0MsRUFBU3RDLFNBQVczTCxLQUFLMkwsVUFHcEIzTCxLQUFLMEosUUFBUSxDQUNsQm9GLFlBQWEsYUFDYkMsWUFBYSxFQUFGLEtBQ05kLEdBRE0sSUFFVG5DLFlBQWE5TCxLQUFLOEwsa0Isc0JBVXhCLFNBQVNvRCxHQUdQLE9BRkFsUCxLQUFLbVAscUJBQXFCLGVBRW5CblAsS0FBSzBKLFFBQVEsQ0FDbEJvRixZQUFhLFlBQ2JDLFlBQWEsQ0FDWHRELFdBQVl6TCxLQUFLeUwsV0FDakJ5RCxNQUFBQSxPLHlCQVVOLFNBQVk5QixHQUNWcE4sS0FBS21QLHFCQUFxQiwwQkFFMUIsSUFBTTFELEVBQWF6TCxLQUFLeUwsV0FFeEIsT0FBT3pMLEtBQUswSixRQUFRLENBQ2xCb0YsWUFBYSxlQUNiQyxZQUFhLENBQ1hLLFlBQWEzRCxFQUNiNEQsU0FBVWpDLE8seUJBVWhCLFNBQVlBLEdBR1YsT0FGQXBOLEtBQUttUCxxQkFBcUIsNEJBRW5CblAsS0FBSzBKLFFBQVEsQ0FDbEJvRixZQUFhLGVBQ2JDLFlBQWEsQ0FDWHRELFdBQVl6TCxLQUFLeUwsV0FDakI0RCxTQUFVakMsTyw0QkFVaEIsU0FBZUEsR0FHYixPQUZBcE4sS0FBS21QLHFCQUFxQixxQ0FFbkJuUCxLQUFLMEosUUFBUSxDQUNsQm9GLFlBQWEsaUJBQ2JDLFlBQWEsQ0FDWHRELFdBQVl6TCxLQUFLeUwsV0FDakIyQixRQUFTQSxPLGtDQVNmLFdBQXFDLElBQWhCL0QsRUFBZ0IsdURBQU4sS0FDdEJpRyxFQUFvQnRQLEtBQXBCc1AsaUJBRVAsSUFBS0EsRUFDSCxNQUFNLElBQUk3SixNQUFNLHVDQUdkNEQsR0FDRmlHLEVBQWlCakMsUUFBUWhFLFFBQVVBLEVBQ25DaUcsRUFBaUIvQixVQUFVZ0MsSUFBSSxtQ0FFL0JELEVBQWlCL0IsVUFBVXJCLE9BQU8saUNBQ2xDb0QsRUFBaUJqQyxRQUFRaEUsUUFBVSxNLGtCQU92QyxTQUFLZ0YsR0FBUSxXQUNMaEMsRUFBY3JNLEtBQUtxTSxZQUV6QkEsRUFBWW1ELFVBQVosaVpBWUEsSUFBTUYsRUFBbUJ2QixTQUFTekIsY0FBYyx5QkFFaER0TSxLQUFLc1AsaUJBQW1CQSxFQUN4QnRQLEtBQUttUCxxQkFBcUIsZUFFMUIsSUFBTU0sRUFBcUJwRCxFQUFZQyxjQUFjLGtCQUMvQ29ELEVBQVVyRCxFQUFZQyxjQUFjLGVBQ25DTCxFQUFVak0sS0FBSzZMLFNBQWZJLE9BRVBqTSxLQUFLMlAsWUFDRi9KLE1BQ0MsU0FBQWtELEdBZUUsR0FkQTJHLEVBQW1CRCxVQUFZLEVBQUtJLG1CQUFtQixDQUNyREMsTUFBTSxFQUNOQyxPQUFPLEVBQ1AxQyxRQUFTLE9BR1BuQixJQUNGeUQsRUFBUUYsVUFBWSxFQUFLSSxtQkFBbUIsQ0FDMUNDLE1BQU0sRUFDTkMsT0FBTyxFQUNQMUMsUUFBUyxRQUlUdEUsRUFBU0gsR0FDWCxPQUFPRyxFQUFTdkMsT0FFaEJrSixFQUFtQkQsVUFBWSxFQUFLTyx1QkFHdEMsRUFBS0MsYUFDTCxFQUFLYiwwQkFFUCxTQUFBckwsR0FDRSxFQUFLcUwsdUJBQ0wsRUFBS25DLFlBQVksQ0FDZjNELFFBQVN2RixJQUVYLEVBQUtrTSxnQkFHUnBLLE1BQ0MsU0FBQXFLLEdBQ0UsSUFBS0EsSUFBaUJBLEVBQWFqSyxPQUtqQyxPQUpBeUosRUFBbUJELFVBQVksRUFBS08sdUJBQ3BDTCxFQUFRUSxjQUFjM0MsVUFBVWdDLElBQUksZUFDcEMsRUFBS0osdUJBS1AsSUFBTWdCLEVBQWdCRixFQUFhRyxNQUFLLHFCQUFFUCxRQUNwQ1EsRUFBb0JKLEVBQWFLLFFBQU8scUJBQUVULFFBVWhELEdBUk1NLEVBQ0pWLEVBQW1CRCxVQUFZLEVBQUtJLG1CQUNsQ08sR0FHRlYsRUFBbUJTLGNBQWMzQyxVQUFVZ0MsSUFBSSxVQUc3Q2MsRUFBa0JySyxPQUFRLENBQzVCLElBQUl1SyxFQUFvQixHQUV4QkYsRUFBa0J4TixTQUNoQixTQUFBMk4sR0FBUyxPQUNORCxHQUFxQixFQUFLWCxtQkFBbUJZLE1BRzlDdkUsSUFDRnNFLEdBQXFCLEVBQUtYLG1CQUFtQixDQUMzQ0MsTUFBTSxFQUNOQyxPQUFPLEVBQ1AxQyxRQUFTLFFBSWJzQyxFQUFRRixVQUFZZSxPQUNWdEUsR0FDVnlELEVBQVFRLGNBQWMzQyxVQUFVZ0MsSUFBSSxVQUd0QyxJQUFJa0IsRUFBYyxHQUVHLHVCQUFsQnBDLEVBQU90QixPQUNSMEQsRUFBYyxDQUNaQyxlQUFnQnJDLEVBQU83QyxXQUFhNkMsRUFBTzdDLFdBQWEsRUFBS0EsV0FDN0RtRixvQkFBcUJWLEVBQWFqSyxPQUFTLEdBRWxCLDBCQUFsQnFJLEVBQU90QixTQUNoQjBELEVBQWMsQ0FDWkcsV0FBWXZDLEVBQU9mLGNBS3ZCLEVBQUswQyxhQUNMLEVBQUtiLHVCQUNMLEVBQUswQixjQUFjeEMsRUFBT3RCLE9BQVEwRCxNQUVwQyxTQUFBM00sR0FDRSxFQUFLa0osWUFBWSxDQUNmM0QsUUFBU3ZGLElBRVgsRUFBS3FMLHVCQUNMLEVBQUthLGdCQUdSYyxPQUFNLFNBQUFoTixHQUNMLEVBQUtxTCx1QkFDTCxFQUFLbkMsWUFBWSxDQUNmM0QsUUFBU3ZGLElBRVgsRUFBS2tNLGdCQUdUaFEsS0FBS2dRLGUsZ0NBWVAsU0FBbUIzQixHQUNqQixJQUFPakIsRUFBeUNpQixFQUF6Q2pCLFFBQVN5QyxFQUFnQ3hCLEVBQWhDd0IsS0FBTUMsRUFBMEJ6QixFQUExQnlCLE1BQU9pQixFQUFtQjFDLEVBQW5CMEMsS0FBTUMsRUFBYTNDLEVBQWIyQyxVQUNuQyxFQUFzRGhSLEtBQUs2TCxTQUFwREUsRUFBUCxFQUFPQSxXQUFZRSxFQUFuQixFQUFtQkEsT0FBUUQsRUFBM0IsRUFBMkJBLE9BQTNCLElBQW1DRSxPQUFBQSxPQUFuQyxPQUE2QzRELEVBQTdDLEVBQ0lwQyxFQUFVLEdBQ1Z1RCxFQUFpQixHQUNqQkMsRUFBa0IsR0FDbEJDLEVBQWdCLEdBdUNwQixPQXJDS0gsR0FBYUQsSUFDaEJHLEVBQWtCLGdDQUFILE9BQW1DSCxFQUFuQyxPQUdiQyxJQUNGRSxFQUFrQixnQ0FBSCxPQUFtQ0YsRUFBbkMsT0FHYm5CLEdBQ0ZzQixFQUFnQixjQUFILE9BQWlCdEIsRUFBakIsS0FFVEMsR0FDRm1CLEVBQWlCLDBCQUNqQnZELEVBQVUxTixLQUFLb1IsZ0JBQWdCLENBQzdCbkYsT0FBQUEsTUFHRmdGLEVBQWlCLDBCQUNqQnZELEVBQVUxTixLQUFLb1IsZ0JBQWdCLENBQzdCbEYsT0FBQUEsTUFJQTRELEdBQ0ZtQixFQUFpQiw2Q0FDakJ2RCxFQUFVMU4sS0FBS29SLGdCQUFnQixDQUM3QkMsV0FBWXBGLE1BR2RnRixFQUFpQiw0QkFDakJ2RCxFQUFVMU4sS0FBS29SLGdCQUFnQixDQUM3QnBGLE9BQUFBLEVBQ0FFLE9BQUFBLEtBS04sOEJBQ2dCK0UsRUFEaEIsc0JBRU1DLEVBRk4sb0NBR3FCOUQsRUFIckIsc0JBSU0rRCxFQUpOLHNCQUtNcEYsRUFBYSxHQUFLMkIsRUFMeEIsOEIsa0NBY0YsV0FDRSx5c0IsNkJBa0JGLFNBQWdCVyxHQUNkLEdBQUlBLEVBQU90QyxXQUNULE1BQU8sR0FHVCxJQUFNMkIsRUFBVSxDQUNkeEIsT0FBUSx3R0FDUkQsT0FBUSwyRkFDUm9GLFdBQVkseUdBQ1pyRixPQUFRLDJHQUdWLE9BQU8zTCxPQUFPeUcsS0FBS3VILEdBQVFpRCxRQUFPLFNBQUNDLEVBQWVwUixHQUtoRCxPQUpJa08sRUFBT2xPLEtBQ1RvUixHQUFpQjdELEVBQVF2TixJQUdwQm9SLElBQ04sTSx3QkFNTCxXQUFhLFdBQ1d2UixLQUFmcU0sWUFDcUJzQixpQkFBaUIsVUFFckM5SyxTQUFRLFNBQUErSyxHQUNkQSxFQUFPNUMsaUJBQ0wsUUFDQSxFQUFLdUIsT0FBT3FCLEVBQU9QLFFBQVFOLFNBQzNCLFMsc0JBNXFCYXhCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9WaXNpb25QaG90b0dhbGxlcnkvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL1Zpc2lvblBob3RvR2FsbGVyeS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9WaXNpb25QaG90b0dhbGxlcnkvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL1Zpc2lvblBob3RvR2FsbGVyeS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL1Zpc2lvblBob3RvR2FsbGVyeS8uL25vZGVfbW9kdWxlcy93aGF0d2ctZmV0Y2gvZmV0Y2guanMiLCJ3ZWJwYWNrOi8vVmlzaW9uUGhvdG9HYWxsZXJ5Ly4vVmlzaW9uUGhvdG9HYWxsZXJ5L2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIlZpc2lvblBob3RvR2FsbGVyeVwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJWaXNpb25QaG90b0dhbGxlcnlcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgZGVmaW5pdGlvbikge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmosIHByb3ApIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOyB9IiwidmFyIGdsb2JhbCA9XG4gICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsVGhpcykgfHxcbiAgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiBzZWxmKSB8fFxuICAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsKVxuXG52YXIgc3VwcG9ydCA9IHtcbiAgc2VhcmNoUGFyYW1zOiAnVVJMU2VhcmNoUGFyYW1zJyBpbiBnbG9iYWwsXG4gIGl0ZXJhYmxlOiAnU3ltYm9sJyBpbiBnbG9iYWwgJiYgJ2l0ZXJhdG9yJyBpbiBTeW1ib2wsXG4gIGJsb2I6XG4gICAgJ0ZpbGVSZWFkZXInIGluIGdsb2JhbCAmJlxuICAgICdCbG9iJyBpbiBnbG9iYWwgJiZcbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICB0cnkge1xuICAgICAgICBuZXcgQmxvYigpXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0pKCksXG4gIGZvcm1EYXRhOiAnRm9ybURhdGEnIGluIGdsb2JhbCxcbiAgYXJyYXlCdWZmZXI6ICdBcnJheUJ1ZmZlcicgaW4gZ2xvYmFsXG59XG5cbmZ1bmN0aW9uIGlzRGF0YVZpZXcob2JqKSB7XG4gIHJldHVybiBvYmogJiYgRGF0YVZpZXcucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yob2JqKVxufVxuXG5pZiAoc3VwcG9ydC5hcnJheUJ1ZmZlcikge1xuICB2YXIgdmlld0NsYXNzZXMgPSBbXG4gICAgJ1tvYmplY3QgSW50OEFycmF5XScsXG4gICAgJ1tvYmplY3QgVWludDhBcnJheV0nLFxuICAgICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuICAgICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG4gICAgJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgICdbb2JqZWN0IFVpbnQzMkFycmF5XScsXG4gICAgJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG4gICAgJ1tvYmplY3QgRmxvYXQ2NEFycmF5XSdcbiAgXVxuXG4gIHZhciBpc0FycmF5QnVmZmVyVmlldyA9XG4gICAgQXJyYXlCdWZmZXIuaXNWaWV3IHx8XG4gICAgZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIHZpZXdDbGFzc2VzLmluZGV4T2YoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikpID4gLTFcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZU5hbWUobmFtZSkge1xuICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgbmFtZSA9IFN0cmluZyhuYW1lKVxuICB9XG4gIGlmICgvW15hLXowLTlcXC0jJCUmJyorLl5fYHx+IV0vaS50ZXN0KG5hbWUpIHx8IG5hbWUgPT09ICcnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBjaGFyYWN0ZXIgaW4gaGVhZGVyIGZpZWxkIG5hbWU6IFwiJyArIG5hbWUgKyAnXCInKVxuICB9XG4gIHJldHVybiBuYW1lLnRvTG93ZXJDYXNlKClcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSlcbiAgfVxuICByZXR1cm4gdmFsdWVcbn1cblxuLy8gQnVpbGQgYSBkZXN0cnVjdGl2ZSBpdGVyYXRvciBmb3IgdGhlIHZhbHVlIGxpc3RcbmZ1bmN0aW9uIGl0ZXJhdG9yRm9yKGl0ZW1zKSB7XG4gIHZhciBpdGVyYXRvciA9IHtcbiAgICBuZXh0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGl0ZW1zLnNoaWZ0KClcbiAgICAgIHJldHVybiB7ZG9uZTogdmFsdWUgPT09IHVuZGVmaW5lZCwgdmFsdWU6IHZhbHVlfVxuICAgIH1cbiAgfVxuXG4gIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gICAgaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGl0ZXJhdG9yXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGl0ZXJhdG9yXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBIZWFkZXJzKGhlYWRlcnMpIHtcbiAgdGhpcy5tYXAgPSB7fVxuXG4gIGlmIChoZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycykge1xuICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgdGhpcy5hcHBlbmQobmFtZSwgdmFsdWUpXG4gICAgfSwgdGhpcylcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGhlYWRlcnMpKSB7XG4gICAgaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKGhlYWRlcikge1xuICAgICAgdGhpcy5hcHBlbmQoaGVhZGVyWzBdLCBoZWFkZXJbMV0pXG4gICAgfSwgdGhpcylcbiAgfSBlbHNlIGlmIChoZWFkZXJzKSB7XG4gICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICB0aGlzLmFwcGVuZChuYW1lLCBoZWFkZXJzW25hbWVdKVxuICAgIH0sIHRoaXMpXG4gIH1cbn1cblxuSGVhZGVycy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcbiAgdmFsdWUgPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSlcbiAgdmFyIG9sZFZhbHVlID0gdGhpcy5tYXBbbmFtZV1cbiAgdGhpcy5tYXBbbmFtZV0gPSBvbGRWYWx1ZSA/IG9sZFZhbHVlICsgJywgJyArIHZhbHVlIDogdmFsdWVcbn1cblxuSGVhZGVycy5wcm90b3R5cGVbJ2RlbGV0ZSddID0gZnVuY3Rpb24obmFtZSkge1xuICBkZWxldGUgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV1cbn1cblxuSGVhZGVycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICBuYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKVxuICByZXR1cm4gdGhpcy5oYXMobmFtZSkgPyB0aGlzLm1hcFtuYW1lXSA6IG51bGxcbn1cblxuSGVhZGVycy5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24obmFtZSkge1xuICByZXR1cm4gdGhpcy5tYXAuaGFzT3duUHJvcGVydHkobm9ybWFsaXplTmFtZShuYW1lKSlcbn1cblxuSGVhZGVycy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV0gPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSlcbn1cblxuSGVhZGVycy5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gIGZvciAodmFyIG5hbWUgaW4gdGhpcy5tYXApIHtcbiAgICBpZiAodGhpcy5tYXAuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdGhpcy5tYXBbbmFtZV0sIG5hbWUsIHRoaXMpXG4gICAgfVxuICB9XG59XG5cbkhlYWRlcnMucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGl0ZW1zID0gW11cbiAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgaXRlbXMucHVzaChuYW1lKVxuICB9KVxuICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG59XG5cbkhlYWRlcnMucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgaXRlbXMgPSBbXVxuICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpdGVtcy5wdXNoKHZhbHVlKVxuICB9KVxuICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG59XG5cbkhlYWRlcnMucHJvdG90eXBlLmVudHJpZXMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGl0ZW1zID0gW11cbiAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgaXRlbXMucHVzaChbbmFtZSwgdmFsdWVdKVxuICB9KVxuICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG59XG5cbmlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gIEhlYWRlcnMucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBIZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzXG59XG5cbmZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcbiAgaWYgKGJvZHkuYm9keVVzZWQpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJykpXG4gIH1cbiAgYm9keS5ib2R5VXNlZCA9IHRydWVcbn1cblxuZnVuY3Rpb24gZmlsZVJlYWRlclJlYWR5KHJlYWRlcikge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0KVxuICAgIH1cbiAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmVqZWN0KHJlYWRlci5lcnJvcilcbiAgICB9XG4gIH0pXG59XG5cbmZ1bmN0aW9uIHJlYWRCbG9iQXNBcnJheUJ1ZmZlcihibG9iKSB7XG4gIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gIHZhciBwcm9taXNlID0gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcbiAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpXG4gIHJldHVybiBwcm9taXNlXG59XG5cbmZ1bmN0aW9uIHJlYWRCbG9iQXNUZXh0KGJsb2IpIHtcbiAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgdmFyIHByb21pc2UgPSBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuICByZWFkZXIucmVhZEFzVGV4dChibG9iKVxuICByZXR1cm4gcHJvbWlzZVxufVxuXG5mdW5jdGlvbiByZWFkQXJyYXlCdWZmZXJBc1RleHQoYnVmKSB7XG4gIHZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmKVxuICB2YXIgY2hhcnMgPSBuZXcgQXJyYXkodmlldy5sZW5ndGgpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgY2hhcnNbaV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHZpZXdbaV0pXG4gIH1cbiAgcmV0dXJuIGNoYXJzLmpvaW4oJycpXG59XG5cbmZ1bmN0aW9uIGJ1ZmZlckNsb25lKGJ1Zikge1xuICBpZiAoYnVmLnNsaWNlKSB7XG4gICAgcmV0dXJuIGJ1Zi5zbGljZSgwKVxuICB9IGVsc2Uge1xuICAgIHZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmLmJ5dGVMZW5ndGgpXG4gICAgdmlldy5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmKSlcbiAgICByZXR1cm4gdmlldy5idWZmZXJcbiAgfVxufVxuXG5mdW5jdGlvbiBCb2R5KCkge1xuICB0aGlzLmJvZHlVc2VkID0gZmFsc2VcblxuICB0aGlzLl9pbml0Qm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAvKlxuICAgICAgZmV0Y2gtbW9jayB3cmFwcyB0aGUgUmVzcG9uc2Ugb2JqZWN0IGluIGFuIEVTNiBQcm94eSB0b1xuICAgICAgcHJvdmlkZSB1c2VmdWwgdGVzdCBoYXJuZXNzIGZlYXR1cmVzIHN1Y2ggYXMgZmx1c2guIEhvd2V2ZXIsIG9uXG4gICAgICBFUzUgYnJvd3NlcnMgd2l0aG91dCBmZXRjaCBvciBQcm94eSBzdXBwb3J0IHBvbGx5ZmlsbHMgbXVzdCBiZSB1c2VkO1xuICAgICAgdGhlIHByb3h5LXBvbGx5ZmlsbCBpcyB1bmFibGUgdG8gcHJveHkgYW4gYXR0cmlidXRlIHVubGVzcyBpdCBleGlzdHNcbiAgICAgIG9uIHRoZSBvYmplY3QgYmVmb3JlIHRoZSBQcm94eSBpcyBjcmVhdGVkLiBUaGlzIGNoYW5nZSBlbnN1cmVzXG4gICAgICBSZXNwb25zZS5ib2R5VXNlZCBleGlzdHMgb24gdGhlIGluc3RhbmNlLCB3aGlsZSBtYWludGFpbmluZyB0aGVcbiAgICAgIHNlbWFudGljIG9mIHNldHRpbmcgUmVxdWVzdC5ib2R5VXNlZCBpbiB0aGUgY29uc3RydWN0b3IgYmVmb3JlXG4gICAgICBfaW5pdEJvZHkgaXMgY2FsbGVkLlxuICAgICovXG4gICAgdGhpcy5ib2R5VXNlZCA9IHRoaXMuYm9keVVzZWRcbiAgICB0aGlzLl9ib2R5SW5pdCA9IGJvZHlcbiAgICBpZiAoIWJvZHkpIHtcbiAgICAgIHRoaXMuX2JvZHlUZXh0ID0gJydcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5XG4gICAgfSBlbHNlIGlmIChzdXBwb3J0LmJsb2IgJiYgQmxvYi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgdGhpcy5fYm9keUJsb2IgPSBib2R5XG4gICAgfSBlbHNlIGlmIChzdXBwb3J0LmZvcm1EYXRhICYmIEZvcm1EYXRhLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICB0aGlzLl9ib2R5Rm9ybURhdGEgPSBib2R5XG4gICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keS50b1N0cmluZygpXG4gICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIHN1cHBvcnQuYmxvYiAmJiBpc0RhdGFWaWV3KGJvZHkpKSB7XG4gICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIgPSBidWZmZXJDbG9uZShib2R5LmJ1ZmZlcilcbiAgICAgIC8vIElFIDEwLTExIGNhbid0IGhhbmRsZSBhIERhdGFWaWV3IGJvZHkuXG4gICAgICB0aGlzLl9ib2R5SW5pdCA9IG5ldyBCbG9iKFt0aGlzLl9ib2R5QXJyYXlCdWZmZXJdKVxuICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiAoQXJyYXlCdWZmZXIucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkgfHwgaXNBcnJheUJ1ZmZlclZpZXcoYm9keSkpKSB7XG4gICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIgPSBidWZmZXJDbG9uZShib2R5KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHkgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYm9keSlcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpKSB7XG4gICAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsICd0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLTgnKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QmxvYiAmJiB0aGlzLl9ib2R5QmxvYi50eXBlKSB7XG4gICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsIHRoaXMuX2JvZHlCbG9iLnR5cGUpXG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuc2VhcmNoUGFyYW1zICYmIFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgnKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChzdXBwb3J0LmJsb2IpIHtcbiAgICB0aGlzLmJsb2IgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG4gICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHJlamVjdGVkXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlCbG9iKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSkpXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlGb3JtRGF0YSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5VGV4dF0pKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuYXJyYXlCdWZmZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgICAgdmFyIGlzQ29uc3VtZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgICBpZiAoaXNDb25zdW1lZCkge1xuICAgICAgICAgIHJldHVybiBpc0NvbnN1bWVkXG4gICAgICAgIH1cbiAgICAgICAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShcbiAgICAgICAgICAgIHRoaXMuX2JvZHlBcnJheUJ1ZmZlci5idWZmZXIuc2xpY2UoXG4gICAgICAgICAgICAgIHRoaXMuX2JvZHlBcnJheUJ1ZmZlci5ieXRlT2Zmc2V0LFxuICAgICAgICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIuYnl0ZU9mZnNldCArIHRoaXMuX2JvZHlBcnJheUJ1ZmZlci5ieXRlTGVuZ3RoXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUFycmF5QnVmZmVyKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5ibG9iKCkudGhlbihyZWFkQmxvYkFzQXJyYXlCdWZmZXIpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdGhpcy50ZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcbiAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgIHJldHVybiByZWplY3RlZFxuICAgIH1cblxuICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgcmV0dXJuIHJlYWRCbG9iQXNUZXh0KHRoaXMuX2JvZHlCbG9iKVxuICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUFycmF5QnVmZmVyKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlYWRBcnJheUJ1ZmZlckFzVGV4dCh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpKVxuICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgdGV4dCcpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpXG4gICAgfVxuICB9XG5cbiAgaWYgKHN1cHBvcnQuZm9ybURhdGEpIHtcbiAgICB0aGlzLmZvcm1EYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihkZWNvZGUpXG4gICAgfVxuICB9XG5cbiAgdGhpcy5qc29uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oSlNPTi5wYXJzZSlcbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG5cbi8vIEhUVFAgbWV0aG9kcyB3aG9zZSBjYXBpdGFsaXphdGlvbiBzaG91bGQgYmUgbm9ybWFsaXplZFxudmFyIG1ldGhvZHMgPSBbJ0RFTEVURScsICdHRVQnLCAnSEVBRCcsICdPUFRJT05TJywgJ1BPU1QnLCAnUFVUJ11cblxuZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKG1ldGhvZCkge1xuICB2YXIgdXBjYXNlZCA9IG1ldGhvZC50b1VwcGVyQ2FzZSgpXG4gIHJldHVybiBtZXRob2RzLmluZGV4T2YodXBjYXNlZCkgPiAtMSA/IHVwY2FzZWQgOiBtZXRob2Rcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJlcXVlc3QoaW5wdXQsIG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFJlcXVlc3QpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUGxlYXNlIHVzZSB0aGUgXCJuZXdcIiBvcGVyYXRvciwgdGhpcyBET00gb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4nKVxuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cbiAgdmFyIGJvZHkgPSBvcHRpb25zLmJvZHlcblxuICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBSZXF1ZXN0KSB7XG4gICAgaWYgKGlucHV0LmJvZHlVc2VkKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKVxuICAgIH1cbiAgICB0aGlzLnVybCA9IGlucHV0LnVybFxuICAgIHRoaXMuY3JlZGVudGlhbHMgPSBpbnB1dC5jcmVkZW50aWFsc1xuICAgIGlmICghb3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhpbnB1dC5oZWFkZXJzKVxuICAgIH1cbiAgICB0aGlzLm1ldGhvZCA9IGlucHV0Lm1ldGhvZFxuICAgIHRoaXMubW9kZSA9IGlucHV0Lm1vZGVcbiAgICB0aGlzLnNpZ25hbCA9IGlucHV0LnNpZ25hbFxuICAgIGlmICghYm9keSAmJiBpbnB1dC5fYm9keUluaXQgIT0gbnVsbCkge1xuICAgICAgYm9keSA9IGlucHV0Ll9ib2R5SW5pdFxuICAgICAgaW5wdXQuYm9keVVzZWQgPSB0cnVlXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRoaXMudXJsID0gU3RyaW5nKGlucHV0KVxuICB9XG5cbiAgdGhpcy5jcmVkZW50aWFscyA9IG9wdGlvbnMuY3JlZGVudGlhbHMgfHwgdGhpcy5jcmVkZW50aWFscyB8fCAnc2FtZS1vcmlnaW4nXG4gIGlmIChvcHRpb25zLmhlYWRlcnMgfHwgIXRoaXMuaGVhZGVycykge1xuICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcbiAgfVxuICB0aGlzLm1ldGhvZCA9IG5vcm1hbGl6ZU1ldGhvZChvcHRpb25zLm1ldGhvZCB8fCB0aGlzLm1ldGhvZCB8fCAnR0VUJylcbiAgdGhpcy5tb2RlID0gb3B0aW9ucy5tb2RlIHx8IHRoaXMubW9kZSB8fCBudWxsXG4gIHRoaXMuc2lnbmFsID0gb3B0aW9ucy5zaWduYWwgfHwgdGhpcy5zaWduYWxcbiAgdGhpcy5yZWZlcnJlciA9IG51bGxcblxuICBpZiAoKHRoaXMubWV0aG9kID09PSAnR0VUJyB8fCB0aGlzLm1ldGhvZCA9PT0gJ0hFQUQnKSAmJiBib2R5KSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9keSBub3QgYWxsb3dlZCBmb3IgR0VUIG9yIEhFQUQgcmVxdWVzdHMnKVxuICB9XG4gIHRoaXMuX2luaXRCb2R5KGJvZHkpXG5cbiAgaWYgKHRoaXMubWV0aG9kID09PSAnR0VUJyB8fCB0aGlzLm1ldGhvZCA9PT0gJ0hFQUQnKSB7XG4gICAgaWYgKG9wdGlvbnMuY2FjaGUgPT09ICduby1zdG9yZScgfHwgb3B0aW9ucy5jYWNoZSA9PT0gJ25vLWNhY2hlJykge1xuICAgICAgLy8gU2VhcmNoIGZvciBhICdfJyBwYXJhbWV0ZXIgaW4gdGhlIHF1ZXJ5IHN0cmluZ1xuICAgICAgdmFyIHJlUGFyYW1TZWFyY2ggPSAvKFs/Jl0pXz1bXiZdKi9cbiAgICAgIGlmIChyZVBhcmFtU2VhcmNoLnRlc3QodGhpcy51cmwpKSB7XG4gICAgICAgIC8vIElmIGl0IGFscmVhZHkgZXhpc3RzIHRoZW4gc2V0IHRoZSB2YWx1ZSB3aXRoIHRoZSBjdXJyZW50IHRpbWVcbiAgICAgICAgdGhpcy51cmwgPSB0aGlzLnVybC5yZXBsYWNlKHJlUGFyYW1TZWFyY2gsICckMV89JyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlIGFkZCBhIG5ldyAnXycgcGFyYW1ldGVyIHRvIHRoZSBlbmQgd2l0aCB0aGUgY3VycmVudCB0aW1lXG4gICAgICAgIHZhciByZVF1ZXJ5U3RyaW5nID0gL1xcPy9cbiAgICAgICAgdGhpcy51cmwgKz0gKHJlUXVlcnlTdHJpbmcudGVzdCh0aGlzLnVybCkgPyAnJicgOiAnPycpICsgJ189JyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cblJlcXVlc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgUmVxdWVzdCh0aGlzLCB7Ym9keTogdGhpcy5fYm9keUluaXR9KVxufVxuXG5mdW5jdGlvbiBkZWNvZGUoYm9keSkge1xuICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpXG4gIGJvZHlcbiAgICAudHJpbSgpXG4gICAgLnNwbGl0KCcmJylcbiAgICAuZm9yRWFjaChmdW5jdGlvbihieXRlcykge1xuICAgICAgaWYgKGJ5dGVzKSB7XG4gICAgICAgIHZhciBzcGxpdCA9IGJ5dGVzLnNwbGl0KCc9JylcbiAgICAgICAgdmFyIG5hbWUgPSBzcGxpdC5zaGlmdCgpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG4gICAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJz0nKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgICAgICBmb3JtLmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQobmFtZSksIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpXG4gICAgICB9XG4gICAgfSlcbiAgcmV0dXJuIGZvcm1cbn1cblxuZnVuY3Rpb24gcGFyc2VIZWFkZXJzKHJhd0hlYWRlcnMpIHtcbiAgdmFyIGhlYWRlcnMgPSBuZXcgSGVhZGVycygpXG4gIC8vIFJlcGxhY2UgaW5zdGFuY2VzIG9mIFxcclxcbiBhbmQgXFxuIGZvbGxvd2VkIGJ5IGF0IGxlYXN0IG9uZSBzcGFjZSBvciBob3Jpem9udGFsIHRhYiB3aXRoIGEgc3BhY2VcbiAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzcyMzAjc2VjdGlvbi0zLjJcbiAgdmFyIHByZVByb2Nlc3NlZEhlYWRlcnMgPSByYXdIZWFkZXJzLnJlcGxhY2UoL1xccj9cXG5bXFx0IF0rL2csICcgJylcbiAgLy8gQXZvaWRpbmcgc3BsaXQgdmlhIHJlZ2V4IHRvIHdvcmsgYXJvdW5kIGEgY29tbW9uIElFMTEgYnVnIHdpdGggdGhlIGNvcmUtanMgMy42LjAgcmVnZXggcG9seWZpbGxcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dpdGh1Yi9mZXRjaC9pc3N1ZXMvNzQ4XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy83NTFcbiAgcHJlUHJvY2Vzc2VkSGVhZGVyc1xuICAgIC5zcGxpdCgnXFxyJylcbiAgICAubWFwKGZ1bmN0aW9uKGhlYWRlcikge1xuICAgICAgcmV0dXJuIGhlYWRlci5pbmRleE9mKCdcXG4nKSA9PT0gMCA/IGhlYWRlci5zdWJzdHIoMSwgaGVhZGVyLmxlbmd0aCkgOiBoZWFkZXJcbiAgICB9KVxuICAgIC5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHZhciBwYXJ0cyA9IGxpbmUuc3BsaXQoJzonKVxuICAgICAgdmFyIGtleSA9IHBhcnRzLnNoaWZ0KCkudHJpbSgpXG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHBhcnRzLmpvaW4oJzonKS50cmltKClcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoa2V5LCB2YWx1ZSlcbiAgICAgIH1cbiAgICB9KVxuICByZXR1cm4gaGVhZGVyc1xufVxuXG5Cb2R5LmNhbGwoUmVxdWVzdC5wcm90b3R5cGUpXG5cbmV4cG9ydCBmdW5jdGlvbiBSZXNwb25zZShib2R5SW5pdCwgb3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVzcG9uc2UpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUGxlYXNlIHVzZSB0aGUgXCJuZXdcIiBvcGVyYXRvciwgdGhpcyBET00gb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4nKVxuICB9XG4gIGlmICghb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSB7fVxuICB9XG5cbiAgdGhpcy50eXBlID0gJ2RlZmF1bHQnXG4gIHRoaXMuc3RhdHVzID0gb3B0aW9ucy5zdGF0dXMgPT09IHVuZGVmaW5lZCA/IDIwMCA6IG9wdGlvbnMuc3RhdHVzXG4gIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDBcbiAgdGhpcy5zdGF0dXNUZXh0ID0gb3B0aW9ucy5zdGF0dXNUZXh0ID09PSB1bmRlZmluZWQgPyAnJyA6ICcnICsgb3B0aW9ucy5zdGF0dXNUZXh0XG4gIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcbiAgdGhpcy51cmwgPSBvcHRpb25zLnVybCB8fCAnJ1xuICB0aGlzLl9pbml0Qm9keShib2R5SW5pdClcbn1cblxuQm9keS5jYWxsKFJlc3BvbnNlLnByb3RvdHlwZSlcblxuUmVzcG9uc2UucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgUmVzcG9uc2UodGhpcy5fYm9keUluaXQsIHtcbiAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxuICAgIHN0YXR1c1RleHQ6IHRoaXMuc3RhdHVzVGV4dCxcbiAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpLFxuICAgIHVybDogdGhpcy51cmxcbiAgfSlcbn1cblxuUmVzcG9uc2UuZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IDAsIHN0YXR1c1RleHQ6ICcnfSlcbiAgcmVzcG9uc2UudHlwZSA9ICdlcnJvcidcbiAgcmV0dXJuIHJlc3BvbnNlXG59XG5cbnZhciByZWRpcmVjdFN0YXR1c2VzID0gWzMwMSwgMzAyLCAzMDMsIDMwNywgMzA4XVxuXG5SZXNwb25zZS5yZWRpcmVjdCA9IGZ1bmN0aW9uKHVybCwgc3RhdHVzKSB7XG4gIGlmIChyZWRpcmVjdFN0YXR1c2VzLmluZGV4T2Yoc3RhdHVzKSA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBzdGF0dXMgY29kZScpXG4gIH1cblxuICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IHN0YXR1cywgaGVhZGVyczoge2xvY2F0aW9uOiB1cmx9fSlcbn1cblxuZXhwb3J0IHZhciBET01FeGNlcHRpb24gPSBnbG9iYWwuRE9NRXhjZXB0aW9uXG50cnkge1xuICBuZXcgRE9NRXhjZXB0aW9uKClcbn0gY2F0Y2ggKGVycikge1xuICBET01FeGNlcHRpb24gPSBmdW5jdGlvbihtZXNzYWdlLCBuYW1lKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZVxuICAgIHRoaXMubmFtZSA9IG5hbWVcbiAgICB2YXIgZXJyb3IgPSBFcnJvcihtZXNzYWdlKVxuICAgIHRoaXMuc3RhY2sgPSBlcnJvci5zdGFja1xuICB9XG4gIERPTUV4Y2VwdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSlcbiAgRE9NRXhjZXB0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IERPTUV4Y2VwdGlvblxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2goaW5wdXQsIGluaXQpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoaW5wdXQsIGluaXQpXG5cbiAgICBpZiAocmVxdWVzdC5zaWduYWwgJiYgcmVxdWVzdC5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgcmV0dXJuIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdBYm9ydGVkJywgJ0Fib3J0RXJyb3InKSlcbiAgICB9XG5cbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcblxuICAgIGZ1bmN0aW9uIGFib3J0WGhyKCkge1xuICAgICAgeGhyLmFib3J0KClcbiAgICB9XG5cbiAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgc3RhdHVzOiB4aHIuc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dCxcbiAgICAgICAgaGVhZGVyczogcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSB8fCAnJylcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMudXJsID0gJ3Jlc3BvbnNlVVJMJyBpbiB4aHIgPyB4aHIucmVzcG9uc2VVUkwgOiBvcHRpb25zLmhlYWRlcnMuZ2V0KCdYLVJlcXVlc3QtVVJMJylcbiAgICAgIHZhciBib2R5ID0gJ3Jlc3BvbnNlJyBpbiB4aHIgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNvbHZlKG5ldyBSZXNwb25zZShib2R5LCBvcHRpb25zKSlcbiAgICAgIH0sIDApXG4gICAgfVxuXG4gICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG4gICAgICB9LCAwKVxuICAgIH1cblxuICAgIHhoci5vbnRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG4gICAgICB9LCAwKVxuICAgIH1cblxuICAgIHhoci5vbmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IERPTUV4Y2VwdGlvbignQWJvcnRlZCcsICdBYm9ydEVycm9yJykpXG4gICAgICB9LCAwKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZpeFVybCh1cmwpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB1cmwgPT09ICcnICYmIGdsb2JhbC5sb2NhdGlvbi5ocmVmID8gZ2xvYmFsLmxvY2F0aW9uLmhyZWYgOiB1cmxcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHVybFxuICAgICAgfVxuICAgIH1cblxuICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCBmaXhVcmwocmVxdWVzdC51cmwpLCB0cnVlKVxuXG4gICAgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdpbmNsdWRlJykge1xuICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWVcbiAgICB9IGVsc2UgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdvbWl0Jykge1xuICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCdyZXNwb25zZVR5cGUnIGluIHhocikge1xuICAgICAgaWYgKHN1cHBvcnQuYmxvYikge1xuICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBzdXBwb3J0LmFycmF5QnVmZmVyICYmXG4gICAgICAgIHJlcXVlc3QuaGVhZGVycy5nZXQoJ0NvbnRlbnQtVHlwZScpICYmXG4gICAgICAgIHJlcXVlc3QuaGVhZGVycy5nZXQoJ0NvbnRlbnQtVHlwZScpLmluZGV4T2YoJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScpICE9PSAtMVxuICAgICAgKSB7XG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGluaXQgJiYgdHlwZW9mIGluaXQuaGVhZGVycyA9PT0gJ29iamVjdCcgJiYgIShpbml0LmhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSkge1xuICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaW5pdC5oZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSwgbm9ybWFsaXplVmFsdWUoaW5pdC5oZWFkZXJzW25hbWVdKSlcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcXVlc3QuaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHZhbHVlKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdC5zaWduYWwpIHtcbiAgICAgIHJlcXVlc3Quc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgYWJvcnRYaHIpXG5cbiAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gRE9ORSAoc3VjY2VzcyBvciBmYWlsdXJlKVxuICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICByZXF1ZXN0LnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGFib3J0WGhyKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgeGhyLnNlbmQodHlwZW9mIHJlcXVlc3QuX2JvZHlJbml0ID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiByZXF1ZXN0Ll9ib2R5SW5pdClcbiAgfSlcbn1cblxuZmV0Y2gucG9seWZpbGwgPSB0cnVlXG5cbmlmICghZ2xvYmFsLmZldGNoKSB7XG4gIGdsb2JhbC5mZXRjaCA9IGZldGNoXG4gIGdsb2JhbC5IZWFkZXJzID0gSGVhZGVyc1xuICBnbG9iYWwuUmVxdWVzdCA9IFJlcXVlc3RcbiAgZ2xvYmFsLlJlc3BvbnNlID0gUmVzcG9uc2Vcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgXCIuL2FwcC5zY3NzXCI7XG5pbXBvcnQgJ3doYXR3Zy1mZXRjaCc7XG5cbi8qKlxuICog0JrQu9Cw0YHRgSDQs9Cw0LvQtdGA0LXQuC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlzaW9uUGhvdG9HYWxsZXJ5IHtcbiAgZ2FsbGVyeUNvbnRhaW5lciA9IG51bGw7XG4gIHJvb3RFbGVtZW50ID0gbnVsbDtcbiAgdG9rZW4gPSBudWxsO1xuICBjb250cm9scyA9IHtcbiAgICBkaXNhYmxlQWxsOiBmYWxzZSxcbiAgICB1cGRhdGU6IHRydWUsXG4gICAgdXBsb2FkOiB0cnVlLFxuICAgIHJlbW92ZTogdHJ1ZVxuICB9O1xuICBtYXN0ZXJBbGJ1bSA9IHRydWU7XG4gIGFjdGlvblR5cGUgPSAnJztcblxuICAvKipcbiAgICog0JrQvtC90YHRgtGA0YPQutGC0L7RgCDRjdC60LfQtdC80L/Qu9GP0YDQsCDQutC70LDRgdGB0LAg0LPQsNC70LXRgNC10LguXG4gICAqIEBwYXJhbSBhY3Rpb25UeXBlIHtzdHJpbmd9INGC0LjQvyDRgdC+0LHRi9GC0LjRjywg0LLRi9C30LLQsNCy0YjQtdCz0L4g0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y4g0LPQsNC70LXRgNC10LhcbiAgICogQHBhcmFtIHJvb3Qge3N0cmluZ30gSUQg0LrQvtGA0L3QtdCy0L7Qs9C+INGN0LvQtdC80LXQvdGC0LAsINC60YPQtNCwINCx0YPQtNC10YIg0YDQtdC90LTQtdGA0LjRgtGM0YHRjyDQs9Cw0LvQtdGA0LXRjy5cbiAgICogQHBhcmFtIGVtcGxveWVlSWQge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwLlxuICAgKiBAcGFyYW0gdmlzaW9uUGVyc29uSWQge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKiBAcGFyYW0gcGVyc29uSWQge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKiBAcGFyYW0gdG9rZW4ge3N0cmluZ30gQ1NSRi3RgtC+0LrQtdC9INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjy5cbiAgICogQHBhcmFtIGNvbnRyb2xzIHtvYmplY3R9INCd0LDRgdGC0YDQvtC50LrQsCDQvtGC0L7QsdGA0LDQttC10L3QuNGPINGN0LvQtdC80LXQvdGC0L7QsiDRg9C/0YDQsNCy0LvQtdC90LjRjy5cbiAgICogQHBhcmFtIGNvbnRyb2xzLmRpc2FibGVBbGwge2Jvb2xlYW59INCe0YLQutC70Y7Rh9C40YLRjCDQstGB0LUg0Y3Qu9C10LzQtdC90YLRiyDRg9C/0YDQsNCy0LvQtdC90LjRjy5cbiAgICogQHBhcmFtIGNvbnRyb2xzLnVwZGF0ZSB7Ym9vbGVhbn0g0J7RgtC+0LHRgNCw0LbQtdC90LjQtSDQutC90L7Qv9C60Lgg0L7QsdC90L7QstC70LXQvdC40Y8g0YTQvtGC0L7Qs9GA0LDRhNC40LggKNGD0YHRgtCw0L3QvtCy0LrQsCDQvtGB0L3QvtCy0L3QvtC5KS5cbiAgICogQHBhcmFtIGNvbnRyb2xzLnVwbG9hZCB7Ym9vbGVhbn0g0J7RgtC+0LHRgNCw0LbQtdC90LjQtSDQutC90L7Qv9C60Lgg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YLQvtCz0YDQsNGE0LjQuC5cbiAgICogQHBhcmFtIGNvbnRyb2xzLnJlbW92ZSB7Ym9vbGVhbn0g0J7RgtC+0LHRgNCw0LbQtdC90LjQtSDQutC90L7Qv9C60Lgg0YPQtNCw0LvQtdC90LjRjyDRhNC+0YLQvtCz0YDQsNGE0LjQuC5cbiAgICogQHBhcmFtIG1hc3RlckFsYnVtIHtib29sZWFufSDQl9Cw0LPRgNGD0LfQutCwINGE0L7RgtC+0LPRgNCw0YTQuNC5INC40Lcg0LzQsNGB0YLQtdGALdCw0LvQsdC+0LzQsC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHtcbiAgICAgICAgICAgICAgICBhY3Rpb25UeXBlLFxuICAgICAgICAgICAgICAgIHJvb3QsXG4gICAgICAgICAgICAgICAgZW1wbG95ZWVJZCxcbiAgICAgICAgICAgICAgICB2aXNpb25QZXJzb25JZCxcbiAgICAgICAgICAgICAgICBwZXJzb25JZCxcbiAgICAgICAgICAgICAgICB0b2tlbixcbiAgICAgICAgICAgICAgICBjb250cm9scyxcbiAgICAgICAgICAgICAgICBtYXN0ZXJBbGJ1bSA9IHRydWVcbiAgICAgICAgICAgICAgfSkge1xuICAgIGlmICghcm9vdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwi0J3QtSDRg9C60LDQt9Cw0L0gSUQg0LrQvtGA0L3QtdCy0L7Qs9C+INGN0LvQtdC80LXQvdGC0LAg0LTQu9GPINCz0LDQu9C10YDQtdC4IVwiKTtcbiAgICB9XG5cbiAgICBjb25zdCByb290RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHJvb3QpO1xuXG4gICAgaWYgKCEhcm9vdEVsZW1lbnQpIHtcbiAgICAgIHRoaXMucm9vdEVsZW1lbnQgPSByb290RWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwi0J/RgNC+0LLQtdGA0YzRgtC1INGD0LrQsNC30LDQvdC90YvQuSBJRCDQutC+0YDQvdC10LLQvtCz0L4g0Y3Qu9C10LzQtdC90YLQsCDQtNC70Y8g0LPQsNC70LXRgNC10LghXCIpO1xuICAgIH1cblxuICAgIGlmICghZW1wbG95ZWVJZCAmJiAhdmlzaW9uUGVyc29uSWQgJiYgIXBlcnNvbklkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCLQndC1INGD0LrQsNC30LDQvSBJRCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0L3QsCDQv9C+0YDRgtCw0LvQtSBWaXNpb25cIik7XG4gICAgfVxuXG4gICAgaWYoYWN0aW9uVHlwZSkge1xuICAgICAgdGhpcy5hY3Rpb25UeXBlID0gYWN0aW9uVHlwZTtcbiAgICB9XG5cbiAgICB0aGlzLmVtcGxveWVlID0ge1xuICAgICAgaWQ6IG51bGwsXG4gICAgICBwZXJzb25JZDogbnVsbCxcbiAgICAgIHZpc2lvblBlcnNvbklkOiBudWxsLFxuICAgIH07XG5cbiAgICB0aGlzLmVtcGxveWVlSWQgPSBlbXBsb3llZUlkO1xuICAgIHRoaXMudmlzaW9uUGVyc29uSWQgPSB2aXNpb25QZXJzb25JZDtcbiAgICB0aGlzLnBlcnNvbklkID0gcGVyc29uSWQ7XG4gICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgIHRoaXMuY29udHJvbHMgPSBjb250cm9scztcbiAgICB0aGlzLm1hc3RlckFsYnVtID0gbWFzdGVyQWxidW07XG5cbiAgICB0aGlzLmRyYXcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQndCw0LfQvdCw0YfQsNC10LzRi9C5INC80LXRgtC+0LQg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0L7RiNC40LHQvtC6LlxuICAgKiBAdHlwZSB7bnVsbHxGdW5jdGlvbn0g0KTRg9C90LrRhtC40Y8g0L7QsdGA0LDQsdC+0YLRh9C40Log0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDQvtGI0LjQsdC+0LouXG4gICAqL1xuICBlcnJvckZ1bmN0aW9uID0gbnVsbDtcbiAgc3VjY2Vzc0Z1bmN0aW9uID0gbnVsbDtcblxuICAvKipcbiAgICog0J/QvtC70YPRh9C10L3QuNC1INC80LXRgtC+0LTQsCDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDQvtGI0LjQsdC+0LouXG4gICAqIEB0eXBlIHtudWxsfEZ1bmN0aW9ufSDQpNGD0L3QutGG0LjRjyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC+0YjQuNCx0L7Qui5cbiAgICovXG4gIGdldCBlcnJvckZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmVycm9yRnVuY3Rpb247XG4gIH1cblxuICAvKipcbiAgICog0J3QsNC30L3QsNGH0LXQvdC40LUg0LzQtdGC0L7QtNCwINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC+0YjQuNCx0L7Qui5cbiAgICogQHBhcmFtIGVycm9yRnVuY3Rpb24ge251bGx8RnVuY3Rpb259INCk0YPQvdC60YbQuNGPINC+0LHRgNCw0LHQvtGC0YfQuNC6INC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0L7RiNC40LHQvtC6LlxuICAgKi9cbiAgc2V0IGVycm9yRnVuY3Rpb24oZXJyb3JGdW5jdGlvbikge1xuICAgIGlmIChlcnJvckZ1bmN0aW9uKSB7XG4gICAgICB0aGlzLmVycm9yRnVuY3Rpb24gPSBlcnJvckZ1bmN0aW9uO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDQn9C+0LvRg9GH0LXQvdC40LUg0LzQtdGC0L7QtNCwINC00LvRjyDQvtCx0YDQsNCx0L7RgtC60Lgg0YPRgdC/0LXRiNC90L7Qs9C+INC00L7QsdCw0LLQu9C10L3QuNGPL9GD0LTQsNC70LXQvdC40Y8g0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqIEB0eXBlIHtudWxsfEZ1bmN0aW9ufSDQpNGD0L3QutGG0LjRjyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRg9GB0L/QtdGI0L3QvtCz0L4g0LTQvtCx0LDQstC70LXQvdC40Y8v0YPQtNCw0LvQtdC90LjRjyDRhNC+0YLQvtCz0YDQsNGE0LjQuC5cbiAgICovXG4gIGdldCBzdWNjZXNzRnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3VjY2Vzc0Z1bmN0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqINCd0LDQt9C90LDRh9C10L3QuNC1INC80LXRgtC+0LTQsCDQtNC70Y8g0L7QsdGA0LDQsdC+0YLQutC4INGD0YHQv9C10YjQvdC+0LPQviDQtNC+0LHQsNCy0LvQtdC90LjRjy/Rg9C00LDQu9C10L3QuNGPINGE0L7RgtC+0LPRgNCw0YTQuNC4LlxuICAgKiBAcGFyYW0gc3VjY2Vzc0Z1bmN0aW9uIHtudWxsfEZ1bmN0aW9ufSDQpNGD0L3QutGG0LjRjyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQvtCx0YDQsNCx0L7RgtC60Lgg0YPRgdC/0LXRiNC90L7Qs9C+INC00L7QsdCw0LLQu9C10L3QuNGPL9GD0LTQsNC70LXQvdC40Y8g0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqL1xuICBzZXQgc3VjY2Vzc0Z1bmN0aW9uKHN1Y2Nlc3NGdW5jdGlvbikge1xuICAgIGlmIChzdWNjZXNzRnVuY3Rpb24pIHtcbiAgICAgIHRoaXMuc3VjY2Vzc0Z1bmN0aW9uID0gc3VjY2Vzc0Z1bmN0aW9uO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDQntCx0L3QvtCy0LvQtdC90LjQtSDQv9Cw0YDQsNC80LXRgtGA0L7QsiDQs9Cw0LvQtdGA0LXQuC5cbiAgICogQHBhcmFtIGVtcGxveWVlSWQge251bWJlcnxudW1iZXJ9IElEINGB0L7RgtGA0YPQtNC90LjQutCwLlxuICAgKiBAcGFyYW0gdG9rZW4ge3N0cmluZ30gQ1NSRi3RgtC+0LrQtdC9INGB0LXRgdGB0Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPLlxuICAgKi9cbiAgdXBkYXRlKHtlbXBsb3llZUlkLCB0b2tlbn0pIHtcbiAgICB0aGlzLmVtcGxveWVlSWQgPSBlbXBsb3llZUlkO1xuICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcblxuICAgIHRoaXMuZHJhdygpO1xuICB9XG5cbiAgLyoqXG4gICAqINCf0L7Qu9GD0YfQuNGC0YwgSUQg0YHQvtGC0YDRg9C00L3QuNC60LAuXG4gICAqIEByZXR1cm4ge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwLlxuICAgKi9cbiAgZ2V0IGVtcGxveWVlSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW1wbG95ZWUuaWQ7XG4gIH1cblxuICAvKipcbiAgICog0J3QsNC30L3QsNGH0LXQvdC40LUg0Y3QutC30LXQvNC/0LvRj9GA0YMg0LPQsNC70LXRgNC10LggSUQg0YHQvtGC0YDRg9C00L3QuNC60LAuXG4gICAqIEBwYXJhbSBlbXBsb3llZUlkIHtudW1iZXJ8c3RyaW5nfSBJRCDRgdC+0YLRgNGD0LTQvdC40LrQsC5cbiAgICovXG4gIHNldCBlbXBsb3llZUlkKGVtcGxveWVlSWQpIHtcbiAgICBpZiAoZW1wbG95ZWVJZCkge1xuICAgICAgdGhpcy5lbXBsb3llZS5pZCA9IGVtcGxveWVlSWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqINCf0L7Qu9GD0YfQuNGC0YwgSUQg0YHQvtGC0YDRg9C00L3QuNC60LAg0LDRg9GC0YHQvtGA0YHQtdGA0LAuXG4gICAqIEByZXR1cm4ge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKi9cbiAgZ2V0IHZpc2lvblBlcnNvbklkKCkge1xuICAgIHJldHVybiB0aGlzLmVtcGxveWVlLnZpc2lvblBlcnNvbklkO1xuICB9XG5cbiAgLyoqXG4gICAqINCd0LDQt9C90LDRh9C10L3QuNC1INGN0LrQt9C10LzQv9C70Y/RgNGDINCz0LDQu9C10YDQtdC4IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKiBAcGFyYW0gdmlzaW9uUGVyc29uSWQge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKi9cbiAgc2V0IHZpc2lvblBlcnNvbklkKHZpc2lvblBlcnNvbklkKSB7XG4gICAgaWYgKHZpc2lvblBlcnNvbklkKSB7XG4gICAgICB0aGlzLmVtcGxveWVlLnZpc2lvblBlcnNvbklkID0gdmlzaW9uUGVyc29uSWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqINCf0L7Qu9GD0YfQuNGC0YwgSUQg0YHQvtGC0YDRg9C00L3QuNC60LAg0LDRg9GC0YHQvtGA0YHQtdGA0LAuXG4gICAqIEByZXR1cm4ge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKi9cbiAgZ2V0IHBlcnNvbklkKCkge1xuICAgIHJldHVybiB0aGlzLmVtcGxveWVlLnBlcnNvbklkO1xuICB9XG5cbiAgLyoqXG4gICAqINCd0LDQt9C90LDRh9C10L3QuNC1INGN0LrQt9C10LzQv9C70Y/RgNGDINCz0LDQu9C10YDQtdC4IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKiBAcGFyYW0gcGVyc29uSWQge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKi9cbiAgc2V0IHBlcnNvbklkKHBlcnNvbklkKSB7XG4gICAgaWYgKHBlcnNvbklkKSB7XG4gICAgICB0aGlzLmVtcGxveWVlLnBlcnNvbklkID0gcGVyc29uSWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqINCa0L7RgNC90LXQstC+0Lkg0Y3Qu9C10LzQtdC90YIsINCyINC60L7RgtC+0YDRi9C5INCx0YPQtNC10YIg0YDQtdC90LTQtdGA0LjRgtGM0YHRjyDQs9Cw0LvQtdGA0LXRjy5cbiAgICogQHJldHVybiB7bnVsbHxFbGVtZW50fSDQmtC+0YDQvdC10LLQvtC5INGN0LvQtdC80LXQvdGCINC00LvRjyDRgNC10L3QtNC10YDQsC5cbiAgICovXG4gIGdldCByb290RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5yb290RWxlbWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiDQn9C+0LvRg9GH0LjRgtGMIENTUkYt0YLQvtC60LXQvSDRgdC10YHRgdC40Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPLlxuICAgKiBAcmV0dXJuIHtudWxsfHN0cmluZ30gQ1NSRi3RgtC+0LrQtdC9INGB0LXRgdGB0LjQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8uXG4gICAqL1xuICBnZXQgdG9rZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9rZW47XG4gIH1cblxuICAvKipcbiAgICog0J3QsNC30L3QsNGH0LjRgtGMIENTUkYt0YLQvtC60LXQvSDRgdC10YHRgdC40Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPLlxuICAgKiBAcGFyYW0gdG9rZW4ge3N0cmluZ30gQ1NSRi3RgtC+0LrQtdC9INGB0LXRgdGB0LjQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8uXG4gICAqL1xuICBzZXQgdG9rZW4odG9rZW4pIHtcbiAgICBpZiAodG9rZW4pIHtcbiAgICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog0J/QvtC70YPRh9C40YLRjCDQt9C90LDRh9C10L3QuNC1INGB0L7RgdGC0L7Rj9C90LjRjyDQutC+0L3RgtGA0L7Qu9C+0LIuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59INCh0L7RgdGC0L7Rj9C90LjQtSDQutC+0L3RgtGA0L7Qu9C+0LIuXG4gICAqL1xuICBnZXQgY29udHJvbHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbHM7XG4gIH1cblxuICAvKipcbiAgICog0J3QsNC30L3QsNGH0LjRgtGMINC30L3QsNGH0LXQvdC40LUg0YHQvtGB0YLQvtGP0L3QuNGPINC60L7QvdGC0YDQvtC70L7Qsi5cbiAgICogQHBhcmFtIHZhbHVlIHtib29sZWFufSDQktC60LvRjtGH0LjRgtGML9C+0YLQutC70Y7Rh9C40YLRjCDQutC+0L3RgtGA0L7Qu9GLLlxuICAgKi9cbiAgc2V0IGNvbnRyb2xzKHZhbHVlKSB7XG4gICAgdGhpcy5jb250cm9scyA9IHtcbiAgICAgIC4uLnRoaXMuY29udHJvbHMsXG4gICAgICAuLi52YWx1ZVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICog0J/QvtC70YPRh9C40YLRjCDRhNC70LDQsyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgtC+0LPRgNCw0YTQuNC5INC40Lcg0LzQsNGB0YLQtdGALdCw0LvRjNCx0L7QvNCwLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSDQodC+0YHRgtC+0Y/QvdC40LUg0YTQu9Cw0LPQsCDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgtC+0LPRgNCw0YTQuNC5INC40Lcg0LzQsNGB0YLQtdGALdCw0LvRjNCx0L7QvNCwLlxuICAgKi9cbiAgZ2V0IG1hc3RlckFsYnVtKCkge1xuICAgIHJldHVybiB0aGlzLm1hc3RlckFsYnVtO1xuICB9XG5cbiAgLyoqXG4gICAqINCd0LDQt9C90LDRh9C40YLRjCDRhNC70LDQsyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgtC+0LPRgNCw0YTQuNC5INC40Lcg0LzQsNGB0YLQtdGALdCw0LvRjNCx0L7QvNCwLlxuICAgKiBAcGFyYW0gdmFsdWUge2Jvb2xlYW59INCS0LrQu9GO0YfQuNGC0Ywv0LLRi9C60LvRjtGH0LjRgtGMINC30LDQs9GA0YPQt9C60YMg0LjQtyDQvNCw0YHRgtC10YAt0LDQu9GM0LHQvtC80LAuXG4gICAqL1xuICBzZXQgbWFzdGVyQWxidW0odmFsdWUpIHtcbiAgICB0aGlzLm1hc3RlckFsYnVtID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICog0J7QsdGA0LDQsdC+0YLRh9C40Log0L7RiNC40LHQvtC6LlxuICAgKiBAcGFyYW0gcGFyYW1zLm1lc3NhZ2Uge3N0cmluZ30g0KHQvtC+0LHRidC10L3QuNC1INC+0LEg0L7RiNC40LHQutC1LlxuICAgKiBAcGFyYW0gcGFyYW1zLmJsb2NraW5nRXJyb3JNZXNzYWdlIHtzdHJpbmd9INCR0LvQvtC60LjRgNGD0Y7RidC10LUg0L/QvtGC0L7QuiDRgdC+0L7QsdGJ0LXQvdC40LUg0L7QsSDQvtGI0LjQsdC60LUuXG4gICAqL1xuICBoYW5kbGVFcnJvcihwYXJhbXMpIHtcbiAgICBjb25zdCB7bWVzc2FnZSwgYmxvY2tpbmdFcnJvck1lc3NhZ2V9ID0gcGFyYW1zO1xuXG4gICAgaWYgKHRoaXMuZXJyb3JGdW5jdGlvbikge1xuICAgICAgbGV0IG1lc3NhZ2VTdHJpbmcgPSBcIlwiO1xuXG4gICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZmF1bHRzdHJpbmcpIHtcbiAgICAgICAgICBtZXNzYWdlU3RyaW5nID0gbWVzc2FnZS5mYXVsdHN0cmluZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBPYmplY3Qua2V5cyhtZXNzYWdlKVxuICAgICAgICAgICAgLnJldmVyc2UoKVxuICAgICAgICAgICAgLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgbWVzc2FnZVN0cmluZyArPSBgJHttZXNzYWdlW2tleV19PGJyLz5gO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gbWVzc2FnZVN0cmluZy5sZW5ndGhcbiAgICAgICAgPyBtZXNzYWdlU3RyaW5nXG4gICAgICAgIDogSlNPTi5zdHJpbmdpZnkobWVzc2FnZSk7XG5cbiAgICAgIHRoaXMuZXJyb3JGdW5jdGlvbihlcnJvck1lc3NhZ2UsIFwi0J7RiNC40LHQutCwXCIpO1xuICAgIH0gZWxzZSBpZiAoYmxvY2tpbmdFcnJvck1lc3NhZ2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihibG9ja2luZ0Vycm9yTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRg9GB0L/QtdGI0L3QvtCz0L4g0LTQvtCx0LDQstC70LXQvdC40Y8v0YPQtNCw0LvQtdC90LjRjyDRhNC+0YLQvtCz0YDQsNGE0LjQuC5cbiAgIC8vICogQHBhcmFtIHBhcmFtcy5hY3Rpb25Db2RlIHtzdHJpbmd9INCa0L7QtCDQtNC10LnRgdGC0LLQuNGPICgzNiAtINC00L7QsdCw0LLQu9C10L3QuNC1INGE0L7RgtC+LCAzNyAtINGD0LTQsNC70LXQvdC40LUg0YTQvtGC0L4pLlxuICAgLy8gKiBAcGFyYW0gcGFyYW1zLmFjdGlvbkRlc2NyaXB0aW9uIHtvYmplY3R9INC/0LDRgNCw0LzQtdGC0YDRiyDQu9C+0LPQsFxuICAgKi9cbiAgaGFuZGxlU3VjY2VzcyhhY3Rpb24sIGFjdGlvbkRlc2NyaXB0aW9uKSB7XG4gICAgaWYodGhpcy5zdWNjZXNzRnVuY3Rpb24pIHtcbiAgICAgIHRoaXMuc3VjY2Vzc0Z1bmN0aW9uKGFjdGlvbiwgYWN0aW9uRGVzY3JpcHRpb24pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDQntCx0ZHRgNGC0LrQsCDQtNC70Y8g0LfQsNC/0YDQvtGB0L7QsiDQuiBBUEkuXG4gICAqIEBwYXJhbSByZXF1ZXN0UGF0aCB7c3RyaW5nfSDQndCw0LfQstCw0L3QuNC1INC80LXRgtC+0LTQsCBBUEkuXG4gICAqIEBwYXJhbSByZXF1ZXN0Qm9keSB7b2JqZWN0fSDQn9Cw0YDQsNC80LXRgtGA0Ysg0LfQsNC/0YDQvtGB0LAuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn0g0J/RgNC+0LzQuNGBINC30LDQv9GA0L7RgdCwLlxuICAgKi9cbiAgcmVxdWVzdCh7cmVxdWVzdFBhdGgsIHJlcXVlc3RCb2R5fSkge1xuICAgIGNvbnN0IHJlcXVlc3REZWZhdWx0cyA9IHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBtb2RlOiBcInNhbWUtb3JpZ2luXCIsXG4gICAgICBjcmVkZW50aWFsczogXCJzYW1lLW9yaWdpblwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgXCJYLUNTUkZUb2tlblwiOiB0aGlzLnRva2VuXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpXG4gICAgfTtcblxuICAgIHJldHVybiBmZXRjaChgL2FwaS92Mi92aXNpb24vJHtyZXF1ZXN0UGF0aH0vYCwgcmVxdWVzdERlZmF1bHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQktGL0LPRgNGD0LfQutCwINCy0YHQtdGFINGE0L7RgtC+0LPRgNCw0YTQuNC5INGBINC/0L7RgNGC0LDQu9CwIFZpc2lvbi5cbiAgICogQHJldHVybnMge1Byb21pc2U8UmVzcG9uc2U+fSDQn9GA0L7QvNC40YEg0YEg0YDQtdC30YPQu9GM0YLQsNGC0L7QvCDQstGL0L/QvtC70L3QtdC90LjRjyDQt9Cw0L/RgNC+0YHQsC5cbiAgICovXG4gIGdldFBob3RvcygpIHtcbiAgICBjb25zdCBlbXBsb3llZSA9IHt9O1xuXG4gICAgaWYgKHRoaXMuZW1wbG95ZWVJZCAmJiAhdGhpcy52aXNpb25QZXJzb25JZCkge1xuICAgICAgZW1wbG95ZWUuZW1wbG95ZWVJZCA9IHRoaXMuZW1wbG95ZWVJZDtcbiAgICB9IGVsc2UgaWYgKHRoaXMudmlzaW9uUGVyc29uSWQpIHtcbiAgICAgIGVtcGxveWVlLnZpc2lvbl9wZXJzb25faWQgPSB0aGlzLnZpc2lvblBlcnNvbklkO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wZXJzb25JZCkge1xuICAgICAgZW1wbG95ZWUucGVyc29uSWQgPSB0aGlzLnBlcnNvbklkO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgcmVxdWVzdFBhdGg6IFwiZ2V0X3Bob3Rvc1wiLFxuICAgICAgcmVxdWVzdEJvZHk6IHtcbiAgICAgICAgLi4uZW1wbG95ZWUsXG4gICAgICAgIG1hc3RlckFsYnVtOiB0aGlzLm1hc3RlckFsYnVtXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog0JfQsNC/0YDQvtGBINC90LAg0LTQvtCx0LDQstC70LXQvdC40LUgKNC30LDQs9GA0YPQt9C60YMpINGE0L7RgtC+0LPRgNCw0YTQuNC4LlxuICAgKiBAcGFyYW0gaW1hZ2Uge0J1ZmZlckVuY29kaW5nfSDQpNC+0YLQvtCz0YDQsNGE0LjQuCDQsiDRhNC+0YDQvNCw0YLQtSBCYXNlNjQuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn0g0J/RgNC+0LzQuNGBINGBINGA0LXQt9GD0LvRjNGC0LDRgtC+0Lwg0LLRi9C/0L7Qu9C90LXQvdC40Y8g0LfQsNC/0YDQvtGB0LAuXG4gICAqL1xuICBhZGRQaG90byhpbWFnZSkge1xuICAgIHRoaXMudG9nZ2xlT3ZlcmxheU1lc3NhZ2UoJ9CX0LDQs9GA0YPQt9C60LAuLi4nKTtcblxuICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgcmVxdWVzdFBhdGg6IFwiYWRkX3Bob3RvXCIsXG4gICAgICByZXF1ZXN0Qm9keToge1xuICAgICAgICBlbXBsb3llZUlkOiB0aGlzLmVtcGxveWVlSWQsXG4gICAgICAgIGltYWdlXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog0JfQsNC/0YDQvtGBINC90LAg0YPQtNCw0LvQtdC90LjQtSDRhNC+0YLQvtCz0YDQsNGE0LjQuC5cbiAgICogQHBhcmFtIHBob3RvSWQge051bWJlcn0gSUQg0YTQvtGC0L7Qs9GA0LDRhNC40Lgg0L3QsCDQv9C+0YDRgtCw0LvQtSBWaXNpb24uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn0g0J/RgNC+0LzQuNGBINGBINGA0LXQt9GD0LvRjNGC0LDRgtC+0Lwg0LLRi9C/0L7Qu9C90LXQvdC40Y8g0LfQsNC/0YDQvtGB0LAuXG4gICAqL1xuICBkZWxldGVQaG90byhwaG90b0lkKSB7XG4gICAgdGhpcy50b2dnbGVPdmVybGF5TWVzc2FnZSgn0KPQtNCw0LvQtdC90LjQtSDRhNC+0YLQvtCz0YDQsNGE0LjQuC4uLicpO1xuXG4gICAgY29uc3QgZW1wbG95ZWVJZCA9IHRoaXMuZW1wbG95ZWVJZDtcblxuICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgcmVxdWVzdFBhdGg6IFwiZGVsZXRlX3Bob3RvXCIsXG4gICAgICByZXF1ZXN0Qm9keToge1xuICAgICAgICBlbXBsb3llZV9pZDogZW1wbG95ZWVJZCxcbiAgICAgICAgcGhvdG9faWQ6IHBob3RvSWRcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQl9Cw0L/RgNC+0YEg0L3QsCDQvtCx0L3QvtCy0LvQtdC90LjQtSDRhNC+0YLQvtCz0YDQsNGE0LjQuC5cbiAgICogQHBhcmFtIHBob3RvSWQge051bWJlcn0gSUQg0YTQvtGC0L7Qs9GA0LDRhNC40Lgg0L3QsCDQv9C+0YDRgtCw0LvQtSBWaXNpb24uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn0g0J/RgNC+0LzQuNGBINGBINGA0LXQt9GD0LvRjNGC0LDRgtC+0Lwg0LLRi9C/0L7Qu9C90LXQvdC40Y8g0LfQsNC/0YDQvtGB0LAuXG4gICAqL1xuICB1cGRhdGVQaG90byhwaG90b0lkKSB7XG4gICAgdGhpcy50b2dnbGVPdmVybGF5TWVzc2FnZSgn0J7QsdC90L7QstC70LXQvdC40LUg0YTQvtGC0L7Qs9GA0LDRhNC40LguLi4nKTtcblxuICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgcmVxdWVzdFBhdGg6IFwidXBkYXRlX3Bob3RvXCIsXG4gICAgICByZXF1ZXN0Qm9keToge1xuICAgICAgICBlbXBsb3llZUlkOiB0aGlzLmVtcGxveWVlSWQsXG4gICAgICAgIHBob3RvX2lkOiBwaG90b0lkXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog0JfQsNC/0YDQvtGBINC90LAg0YPRgdGC0LDQvdC+0LLQutGDINGE0L7RgtC+0LPRgNCw0YTQuNC4INC60LDQuiDQvtGB0L3QvtCy0L3QvtC5INC00LvRjyDRgdC+0YLRgNGD0LTQvdC40LrQsC5cbiAgICogQHBhcmFtIHBob3RvSWQge051bWJlcn0gSUQg0YTQvtGC0L7Qs9GA0LDRhNC40Lgg0L3QsCDQv9C+0YDRgtCw0LvQtSBWaXNpb24uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn0g0J/RgNC+0LzQuNGBINGBINGA0LXQt9GD0LvRjNGC0LDRgtC+0Lwg0LLRi9C/0L7Qu9C90LXQvdC40Y8g0LfQsNC/0YDQvtGB0LAuXG4gICAqL1xuICBzZXRBc01haW5QaG90byhwaG90b0lkKSB7XG4gICAgdGhpcy50b2dnbGVPdmVybGF5TWVzc2FnZSgn0J7QsdC90L7QstC70LXQvdC40LUg0L7RgdC90L7QstC90L7QuSDRhNC+0YLQvtCz0YDQsNGE0LjQuC4uLicpO1xuXG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7XG4gICAgICByZXF1ZXN0UGF0aDogXCJzZXRfbWFpbl9waG90b1wiLFxuICAgICAgcmVxdWVzdEJvZHk6IHtcbiAgICAgICAgZW1wbG95ZWVJZDogdGhpcy5lbXBsb3llZUlkLFxuICAgICAgICBwaG90b0lkOiBwaG90b0lkXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog0J/QtdGA0LXQutC70Y7Rh9Cw0YLQtdC70Ywg0LHQu9C+0LrQuNGA0YPRjtGJ0LXQs9C+INGB0L7QvtCx0YnQtdC90LjRjy5cbiAgICogQHBhcmFtIG1lc3NhZ2Uge3N0cmluZ3x1bmRlZmluZWR8bnVsbH0g0KHQvtC+0LHRidC10L3QuNC1LlxuICAgKi9cbiAgdG9nZ2xlT3ZlcmxheU1lc3NhZ2UobWVzc2FnZSA9IG51bGwpIHtcbiAgICBjb25zdCB7Z2FsbGVyeUNvbnRhaW5lcn0gPSB0aGlzO1xuXG4gICAgaWYgKCFnYWxsZXJ5Q29udGFpbmVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ9Cd0LUg0L3QsNC50LTQtdC90LAg0LrQvtGA0L3QtdCy0L7QuSDRjdC70LXQvNC10L3RgiDQs9Cw0LvQtdGA0LXQuCcpO1xuICAgIH1cblxuICAgIGlmIChtZXNzYWdlKSB7XG4gICAgICBnYWxsZXJ5Q29udGFpbmVyLmRhdGFzZXQubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICBnYWxsZXJ5Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3Zpc2lvbi1waG90by1nYWxsZXJ5LS1tZXNzYWdlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdhbGxlcnlDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgndmlzaW9uLXBob3RvLWdhbGxlcnktLW1lc3NhZ2UnKTtcbiAgICAgIGdhbGxlcnlDb250YWluZXIuZGF0YXNldC5tZXNzYWdlID0gJyc7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqINCe0YLRgNC40YHQvtCy0LrQsCBET00g0LPQsNC70LXRgNC10LjQuC5cbiAgICovXG4gIGRyYXcocGFyYW1zKSB7XG4gICAgY29uc3Qgcm9vdEVsZW1lbnQgPSB0aGlzLnJvb3RFbGVtZW50O1xuXG4gICAgcm9vdEVsZW1lbnQuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cInZpc2lvbi1waG90by1nYWxsZXJ5XCI+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwiZmlsZVwiIGNsYXNzPVwidmlzaW9uLXBob3RvLWdhbGxlcnlfX2ZpbGUtZmllbGRcIiB0YWJpbmRleD1cIi0xXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2aXNpb24tcGhvdG8tZ2FsbGVyeV9faXRlbSB2aXNpb24tcGhvdG8tZ2FsbGVyeV9faXRlbS0tbWFpblwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2Zy1tYWluLXBob3RvXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidmlzaW9uLXBob3RvLWdhbGxlcnlfX2l0ZW1cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidmctZ2FsbGVyeVwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICBjb25zdCBnYWxsZXJ5Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi52aXNpb24tcGhvdG8tZ2FsbGVyeVwiKTtcblxuICAgIHRoaXMuZ2FsbGVyeUNvbnRhaW5lciA9IGdhbGxlcnlDb250YWluZXI7XG4gICAgdGhpcy50b2dnbGVPdmVybGF5TWVzc2FnZSgn0JfQsNCz0YDRg9C30LrQsC4uLicpO1xuXG4gICAgY29uc3QgbWFpblBob3RvQ29udGFpbmVyID0gcm9vdEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi52Zy1tYWluLXBob3RvXCIpO1xuICAgIGNvbnN0IGdhbGxlcnkgPSByb290RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnZnLWdhbGxlcnlcIik7XG4gICAgY29uc3Qge3VwbG9hZH0gPSB0aGlzLmNvbnRyb2xzO1xuXG4gICAgdGhpcy5nZXRQaG90b3MoKVxuICAgICAgLnRoZW4oXG4gICAgICAgIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICBtYWluUGhvdG9Db250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5jcmVhdGVQaG90b0VsZW1lbnQoe1xuICAgICAgICAgICAgbWFpbjogdHJ1ZSxcbiAgICAgICAgICAgIGVtcHR5OiB0cnVlLFxuICAgICAgICAgICAgcGhvdG9JZDogbnVsbFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKHVwbG9hZCkge1xuICAgICAgICAgICAgZ2FsbGVyeS5pbm5lckhUTUwgPSB0aGlzLmNyZWF0ZVBob3RvRWxlbWVudCh7XG4gICAgICAgICAgICAgIG1haW46IGZhbHNlLFxuICAgICAgICAgICAgICBlbXB0eTogdHJ1ZSxcbiAgICAgICAgICAgICAgcGhvdG9JZDogbnVsbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtYWluUGhvdG9Db250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5jcmVhdGVOb1Bob3RvRWxlbWVudCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuaW5pdEV2ZW50cygpO1xuICAgICAgICAgIHRoaXMudG9nZ2xlT3ZlcmxheU1lc3NhZ2UoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgIHRoaXMudG9nZ2xlT3ZlcmxheU1lc3NhZ2UoKTtcbiAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5pbml0RXZlbnRzKCk7XG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgIC50aGVuKFxuICAgICAgICByZXNwb25zZUpzb24gPT4ge1xuICAgICAgICAgIGlmICghcmVzcG9uc2VKc29uIHx8ICFyZXNwb25zZUpzb24ubGVuZ3RoKSB7XG4gICAgICAgICAgICBtYWluUGhvdG9Db250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5jcmVhdGVOb1Bob3RvRWxlbWVudCgpO1xuICAgICAgICAgICAgZ2FsbGVyeS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZU92ZXJsYXlNZXNzYWdlKCk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBtYWluUGhvdG9EYXRhID0gcmVzcG9uc2VKc29uLmZpbmQoKHttYWlufSkgPT4gbWFpbik7XG4gICAgICAgICAgY29uc3QgZ2FsbGVyeVBob3Rvc0RhdGEgPSByZXNwb25zZUpzb24uZmlsdGVyKCh7bWFpbn0pID0+ICFtYWluKTtcblxuICAgICAgICAgIGlmICghIW1haW5QaG90b0RhdGEpIHtcbiAgICAgICAgICAgIG1haW5QaG90b0NvbnRhaW5lci5pbm5lckhUTUwgPSB0aGlzLmNyZWF0ZVBob3RvRWxlbWVudChcbiAgICAgICAgICAgICAgbWFpblBob3RvRGF0YVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWFpblBob3RvQ29udGFpbmVyLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZ2FsbGVyeVBob3Rvc0RhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgZ2FsbGVyeVBob3Rvc0h0bWwgPSBcIlwiO1xuXG4gICAgICAgICAgICBnYWxsZXJ5UGhvdG9zRGF0YS5mb3JFYWNoKFxuICAgICAgICAgICAgICBwaG90b0RhdGEgPT5cbiAgICAgICAgICAgICAgICAoZ2FsbGVyeVBob3Rvc0h0bWwgKz0gdGhpcy5jcmVhdGVQaG90b0VsZW1lbnQocGhvdG9EYXRhKSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmICh1cGxvYWQpIHtcbiAgICAgICAgICAgICAgZ2FsbGVyeVBob3Rvc0h0bWwgKz0gdGhpcy5jcmVhdGVQaG90b0VsZW1lbnQoe1xuICAgICAgICAgICAgICAgIG1haW46IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVtcHR5OiB0cnVlLFxuICAgICAgICAgICAgICAgIHBob3RvSWQ6IG51bGxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGdhbGxlcnkuaW5uZXJIVE1MID0gZ2FsbGVyeVBob3Rvc0h0bWw7XG4gICAgICAgICAgfSBlbHNlIGlmICghdXBsb2FkKSB7XG4gICAgICAgICAgICBnYWxsZXJ5LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsZXQgYWN0aW9uVmFsdWUgPSB7fTtcblxuICAgICAgICAgIGlmKHBhcmFtcy5hY3Rpb24gPT09ICdQSE9UT19CSU9NRVRSWV9BREQnKSB7XG4gICAgICAgICAgICBhY3Rpb25WYWx1ZSA9IHtcbiAgICAgICAgICAgICAgYWRkX3Bob3RvX3R5cGU6IHBhcmFtcy5hY3Rpb25UeXBlID8gcGFyYW1zLmFjdGlvblR5cGUgOiB0aGlzLmFjdGlvblR5cGUsXG4gICAgICAgICAgICAgIG1haW5fcGhvdG9fcmVwbGFjZWQ6IHJlc3BvbnNlSnNvbi5sZW5ndGggPiAwLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAocGFyYW1zLmFjdGlvbiA9PT0gJ1BIT1RPX0JJT01FVFJZX1JFTU9WRScpIHtcbiAgICAgICAgICAgIGFjdGlvblZhbHVlID0ge1xuICAgICAgICAgICAgICBtYWluX3Bob3RvOiBwYXJhbXMuaXNNYWluUGhvdG8sXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG5cbiAgICAgICAgICB0aGlzLmluaXRFdmVudHMoKTtcbiAgICAgICAgICB0aGlzLnRvZ2dsZU92ZXJsYXlNZXNzYWdlKCk7XG4gICAgICAgICAgdGhpcy5oYW5kbGVTdWNjZXNzKHBhcmFtcy5hY3Rpb24sIGFjdGlvblZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLnRvZ2dsZU92ZXJsYXlNZXNzYWdlKCk7XG4gICAgICAgICAgdGhpcy5pbml0RXZlbnRzKCk7XG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIHRoaXMudG9nZ2xlT3ZlcmxheU1lc3NhZ2UoKTtcbiAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XG4gICAgICAgICAgbWVzc2FnZTogZXJyb3JcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdEV2ZW50cygpO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLmluaXRFdmVudHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQo9C90LjQstC10YDRgdCw0LvRjNC90YvQuSDQvNC10YLQvtC0INC00LvRjyDRgdC+0LfQtNCw0L3QuNGPINGN0LvQtdC80LXQvdGC0LAg0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqIEBwYXJhbSBwYXJhbXMucGhvdG9JZCB7bnVtYmVyfSBJRCDRhNC+0YLQvtCz0YDQsNGE0LjQuCDQvdCwINC/0L7RgNGC0LDQu9C1IFZpc2lvbi5cbiAgICogQHBhcmFtIHBhcmFtcy5tYWluIHtib29sZWFufSAg0KTQu9Cw0LMg0L7RgdC90L7QstC90L7Qs9C+INGE0L7RgtC+LlxuICAgKiBAcGFyYW0gcGFyYW1zLmVtcHR5IHtib29sZWFufSDQpNC70LDQsyBcItC/0YPRgdGC0L7Qs9C+XCIg0YTQvtGC0L4sINC40YHQv9C+0LvRjNC30YPQtdGC0YHRjyDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDQutC90L7Qv9C60Lgg0LfQsNCz0YDRg9C30LrQuC5cbiAgICogQHBhcmFtIHBhcmFtcy5wYXRoIHtzdHJpbmd9INCf0YPRgtGMINC6INGE0L7RgtC+0LPRgNCw0YTQuNC4LlxuICAgKiBAcGFyYW0gcGFyYW1zLmF2YXRhclVybCB7c3RyaW5nfSDQn9GD0YLRjCDQuiDRhNC+0YLQvtCz0YDQsNGE0LjQuC5cbiAgICogQHJldHVybnMge3N0cmluZ30g0K3Qu9C10LzQtdC90YIg0YTQvtGC0L7Qs9GA0LDRhNC40Lgg0LIg0LLQuNC00LUg0YHRgtGA0L7QutC4LlxuICAgKi9cbiAgY3JlYXRlUGhvdG9FbGVtZW50KHBhcmFtcykge1xuICAgIGNvbnN0IHtwaG90b0lkLCBtYWluLCBlbXB0eSwgcGF0aCwgYXZhdGFyVXJsfSA9IHBhcmFtcztcbiAgICBjb25zdCB7ZGlzYWJsZUFsbCwgdXBsb2FkLCB1cGRhdGUsIHJlbW92ZSA9ICFlbXB0eX0gPSB0aGlzLmNvbnRyb2xzO1xuICAgIGxldCBidXR0b25zID0gXCJcIjtcbiAgICBsZXQgZWxlbWVudENsYXNzZXMgPSBcIlwiO1xuICAgIGxldCBiYWNrZ3JvdW5kSW1hZ2UgPSBcIlwiO1xuICAgIGxldCBtYWluQXR0cmlidXRlID0gXCJcIjtcblxuICAgIGlmICghYXZhdGFyVXJsICYmIHBhdGgpIHtcbiAgICAgIGJhY2tncm91bmRJbWFnZSA9IGBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgke3BhdGh9KVwiYDtcbiAgICB9XG5cbiAgICBpZiAoYXZhdGFyVXJsKSB7XG4gICAgICBiYWNrZ3JvdW5kSW1hZ2UgPSBgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHthdmF0YXJVcmx9KVwiYDtcbiAgICB9XG5cbiAgICBpZiAobWFpbikge1xuICAgICAgbWFpbkF0dHJpYnV0ZSA9IGBkYXRhLW1haW49XCIke21haW59XCJgO1xuXG4gICAgICBpZiAoZW1wdHkpIHtcbiAgICAgICAgZWxlbWVudENsYXNzZXMgPSBcInZnLXBob3RvIHZnLXBob3RvLS1tYWluXCI7XG4gICAgICAgIGJ1dHRvbnMgPSB0aGlzLmdldFBob3RvQnV0dG9ucyh7XG4gICAgICAgICAgdXBsb2FkXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudENsYXNzZXMgPSBcInZnLXBob3RvIHZnLXBob3RvLS1tYWluXCI7XG4gICAgICAgIGJ1dHRvbnMgPSB0aGlzLmdldFBob3RvQnV0dG9ucyh7XG4gICAgICAgICAgcmVtb3ZlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZW1wdHkpIHtcbiAgICAgICAgZWxlbWVudENsYXNzZXMgPSBcInZnLWdhbGxlcnlfX2l0ZW0gdmctcGhvdG8gdmctcGhvdG8tLXVwbG9hZFwiO1xuICAgICAgICBidXR0b25zID0gdGhpcy5nZXRQaG90b0J1dHRvbnMoe1xuICAgICAgICAgIHVwbG9hZEljb246IHVwbG9hZFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnRDbGFzc2VzID0gXCJ2Zy1nYWxsZXJ5X19pdGVtIHZnLXBob3RvXCI7XG4gICAgICAgIGJ1dHRvbnMgPSB0aGlzLmdldFBob3RvQnV0dG9ucyh7XG4gICAgICAgICAgdXBkYXRlLFxuICAgICAgICAgIHJlbW92ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz1cIiR7ZWxlbWVudENsYXNzZXN9XCJcbiAgICAgICAgJHtiYWNrZ3JvdW5kSW1hZ2V9XG4gICAgICAgIGRhdGEtcGhvdG8taWQ9XCIke3Bob3RvSWR9XCJcbiAgICAgICAgJHttYWluQXR0cmlidXRlfT5cbiAgICAgICAgJHtkaXNhYmxlQWxsID8gXCJcIiA6IGJ1dHRvbnN9XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgfVxuXG4gIC8qKlxuICAgKiDQqNCw0LHQu9C+0L0g0Y3Qu9C10LzQtdC90YLQsCDQs9Cw0LvQtdGA0LXQuCDQsdC10Lcg0YTQvtGC0L7Qs9GA0LDRhNC40LhcbiAgICogQHJldHVybiB7c3RyaW5nfSBIVE1MIERPTSBTdHJpbmdcbiAgICovXG4gIGNyZWF0ZU5vUGhvdG9FbGVtZW50KCkge1xuICAgIHJldHVybiBgXG4gICAgICA8ZGl2IGNsYXNzPVwidmctcGhvdG8gdmctcGhvdG8tLW1haW5cIj5cbiAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIi0yNTYgLTI1NiAxMDI0IDEwMjRcIj5cbiAgICAgICAgICA8cGF0aCBmaWxsPVwiIzRhNTI2NlwiXG4gICAgICAgICAgICBkPVwiTTQzNyAzMTAuOGMtMjguNC0yOC40LTYyLjItNDkuMi05OS4xLTYxLjcgMzQuMS0yNS4yIDU2LjItNjUuNiA1Ni4yLTExMS4xQzM5NC4xIDYxLjkgMzMyLjEgMCAyNTYgMFMxMTcuOSA2MS45IDExNy45IDEzOC4xYzAgNDUuNSAyMi4xIDg1LjkgNTYuMiAxMTEuMSAtMzYuOSAxMi40LTcwLjggMzMuMy05OS4xIDYxLjdDMjYuNiAzNTkuMiAwIDQyMy41IDAgNDkxLjggMCA1MDMgOSA1MTIgMjAuMiA1MTJoNDcxLjdjMTEuMSAwIDIwLjItOSAyMC4yLTIwLjJDNTEyIDQyMy41IDQ4NS40IDM1OS4yIDQzNyAzMTAuOHpNMTU4LjIgMTM4LjFjMC01My45IDQzLjktOTcuOCA5Ny44LTk3LjggNTMuOSAwIDk3LjggNDMuOSA5Ny44IDk3LjggMCA1My45LTQzLjkgOTcuOC05Ny44IDk3LjhDMjAyLjEgMjM1LjggMTU4LjIgMTkyIDE1OC4yIDEzOC4xek00MS4yIDQ3MS43QzUxLjQgMzYyLjIgMTQzLjkgMjc2LjIgMjU2IDI3Ni4yczIwNC42IDg2IDIxNC44IDE5NS41SDQxLjJ6XCIvPlxuICAgICAgICA8L3N2Zz5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICAvKipcbiAgICog0J/QvtC70YPRh9C40YLRjCDQutC90L7Qv9C60YMg0L/QviDQv9C10YDQtdC00LDQstCw0LXQvNGL0Lwg0L/QsNGA0LDQvNC10YLRgNCw0LwuXG4gICAqIEBwYXJhbSBwYXJhbXMuZGlzYWJsZUFsbCB7Ym9vbGVhbn0g0J7RgtC60LvRjtGH0LjRgtGMINCy0YHQtSDQutC90L7Qv9C60LguXG4gICAqIEBwYXJhbSBwYXJhbXMucmVtb3ZlIHtib29sZWFufSDQmtC90L7Qv9C60LAg0YPQtNCw0LvQtdC90LjRjy5cbiAgICogQHBhcmFtIHBhcmFtcy51cGxvYWQge2Jvb2xlYW59INCa0L3QvtC/0LrQsCDQt9Cw0LPRgNGD0LfQutC4LlxuICAgKiBAcGFyYW0gcGFyYW1zLnVwbG9hZEljb24ge2Jvb2xlYW59INCa0L3QvtC/0LrQsCDQt9Cw0LPRgNGD0LfQutC4INCyINCy0LjQtNC1INC40LrQvtC90LrQuC5cbiAgICogQHBhcmFtIHBhcmFtcy5zZWxlY3Qge2Jvb2xlYW59INCa0L3QvtC/0LrQsCDQstGL0LHQvtGA0LAg0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqL1xuICBnZXRQaG90b0J1dHRvbnMocGFyYW1zKSB7XG4gICAgaWYgKHBhcmFtcy5kaXNhYmxlQWxsKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG5cbiAgICBjb25zdCBidXR0b25zID0ge1xuICAgICAgcmVtb3ZlOiBgPGJ1dHRvbiBjbGFzcz1cInZnLXBob3RvX19idXR0b24gdmctYnV0dG9uIHZnLWJ1dHRvbi0tcmVkXCIgZGF0YS1hY3Rpb249XCJyZW1vdmUtcGhvdG9cIj7Qo9C00LDQu9C40YLRjDwvYnV0dG9uPmAsXG4gICAgICB1cGxvYWQ6IGA8YnV0dG9uIGNsYXNzPVwidmctcGhvdG9fX2J1dHRvbiB2Zy1idXR0b25cIiBkYXRhLWFjdGlvbj1cInVwbG9hZC1waG90b1wiPtCX0LDQs9GA0YPQt9C40YLRjDwvYnV0dG9uPmAsXG4gICAgICB1cGxvYWRJY29uOiBgPGJ1dHRvbiBjbGFzcz1cInZnLXBob3RvX19idXR0b24gdmctYnV0dG9uIHZnLWJ1dHRvbi0tdXBsb2FkXCIgZGF0YS1hY3Rpb249XCJ1cGxvYWQtcGhvdG9cIj4mIzQzOzwvYnV0dG9uPmAsXG4gICAgICB1cGRhdGU6IGA8YnV0dG9uIGNsYXNzPVwidmctcGhvdG9fX2J1dHRvbiB2Zy1idXR0b24gdmctYnV0dG9uLS1ncmVlblwiIGRhdGEtYWN0aW9uPVwidXBkYXRlLXBob3RvXCI+0JLRi9Cx0YDQsNGC0Yw8L2J1dHRvbj5gXG4gICAgfTtcblxuICAgIHJldHVybiBPYmplY3Qua2V5cyhwYXJhbXMpLnJlZHVjZSgoYnV0dG9uc1N0cmluZywga2V5KSA9PiB7XG4gICAgICBpZiAocGFyYW1zW2tleV0pIHtcbiAgICAgICAgYnV0dG9uc1N0cmluZyArPSBidXR0b25zW2tleV07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBidXR0b25zU3RyaW5nO1xuICAgIH0sIFwiXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINGB0L7QsdGL0YLQuNC5INC00LvRjyDQutC90L7Qv9C+0Log0LPQsNC70LXRgNC10LguXG4gICAqL1xuICBpbml0RXZlbnRzKCkge1xuICAgIGNvbnN0IHtyb290RWxlbWVudH0gPSB0aGlzO1xuICAgIGNvbnN0IGJ1dHRvbnMgPSByb290RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiYnV0dG9uXCIpO1xuXG4gICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICB0aGlzLnJvdXRlcltidXR0b24uZGF0YXNldC5hY3Rpb25dLFxuICAgICAgICBmYWxzZVxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQoNC+0YPRgtC10YAuXG4gICAqIEB0eXBlIHt7XCJyZW1vdmUtcGhvdG9cIjogZnVuY3Rpb24oKik6IHZvaWQsIFwiZmlsZS1pbnB1dC1jaGFuZ2VkXCI6IGZ1bmN0aW9uKCopOiB2b2lkLCBcInVwbG9hZC1waG90b1wiOiBmdW5jdGlvbigqKTogdm9pZCwgXCJ1cGRhdGUtcGhvdG9cIjogZnVuY3Rpb24oKik6IHZvaWR9fVxuICAgKi9cbiAgcm91dGVyID0ge1xuICAgIC8qKlxuICAgICAqINCX0LDQs9GA0YPQt9C60LAg0YTQvtGC0L7Qs9GA0LDRhNC40Lgg0YHQvtGC0YDRg9C00L3QuNC60LAuXG4gICAgICogQHBhcmFtIGV2ZW50IHtFdmVudH0g0KHQvtCx0YvRgtC40LUuXG4gICAgICovXG4gICAgXCJ1cGxvYWQtcGhvdG9cIjogZXZlbnQgPT4ge1xuICAgICAgY29uc3QgZmlsZUlucHV0ID0gdGhpcy5yb290RWxlbWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiZmlsZVwiXScpO1xuXG4gICAgICBmaWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB0aGlzLnJvdXRlcltcImZpbGUtaW5wdXQtY2hhbmdlZFwiXSk7XG4gICAgICBmaWxlSW5wdXQuY2xpY2soKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqINCh0LvRg9GI0LDRgtC10LvRjCDRgdC+0LHRi9GC0LjRjyDQuNC30LzQtdC90LXQvdC40Y8g0YTQsNC50LvQvtCy0L7Qs9C+INC/0L7Qu9GPINCy0LLQvtC00LAuXG4gICAgICogQHBhcmFtIGV2ZW50IHtldmVudH0g0KHQvtCx0YvRgtC40LUuXG4gICAgICovXG4gICAgXCJmaWxlLWlucHV0LWNoYW5nZWRcIjogZXZlbnQgPT4ge1xuICAgICAgY29uc3QgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTtcbiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuXG4gICAgICByZWFkZXIub25sb2FkID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmFkZFBob3RvKHJlYWRlci5yZXN1bHQpLnRoZW4oXG4gICAgICAgICAgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgIHRoaXMuZHJhdyh7YWN0aW9uOiAnUEhPVE9fQklPTUVUUllfQUREJywgYWN0aW9uVHlwZTogJ3VwbG9hZF9waG90byd9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmVhZGVyLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgIG1lc3NhZ2U6IHJlYWRlci5lcnJvcixcbiAgICAgICAgICBibG9ja2luZ0Vycm9yTWVzc2FnZTogYNCe0YjQuNCx0LrQsCDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgtC+0LPRgNCw0YTQuNC4ICgt0LjQuSk6ICR7cmVhZGVyLmVycm9yfWBcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICog0JfQsNC/0YDQvtGBINC90LAg0YPQtNCw0LvQtdC90LjQtSDRhNC+0YLQvtCz0YDQsNGE0LjQuCDRgdC+0YLRgNGD0LTQvdC40LrQsC5cbiAgICAgKiBAcGFyYW0gZXZlbnQge0V2ZW50fSDQodC+0LHRi9GC0LjQtS5cbiAgICAgKi9cbiAgICBcInJlbW92ZS1waG90b1wiOiBldmVudCA9PiB7XG4gICAgICBjb25zdCBwaG90b0VsZW1lbnQgPSBldmVudC50YXJnZXQuY2xvc2VzdChcIi52Zy1waG90b1wiKTtcbiAgICAgIGNvbnN0IHtwaG90b0lkfSA9IHBob3RvRWxlbWVudC5kYXRhc2V0O1xuICAgICAgY29uc3QgaXNNYWluUGhvdG8gPSBwaG90b0VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCd2Zy1waG90by0tbWFpbicpO1xuXG4gICAgICBpZiAoISFwaG90b0lkKSB7XG4gICAgICAgIHRoaXMuZGVsZXRlUGhvdG8oK3Bob3RvSWQpLnRoZW4oXG4gICAgICAgICAgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgIHRoaXMuZHJhdyh7YWN0aW9uOiAnUEhPVE9fQklPTUVUUllfUkVNT1ZFJywgaXNNYWluUGhvdG99KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICog0JfQsNC/0YDQvtGBINC90LAg0L7QsdC90L7QstC70LXQvdC40LUg0YTQvtGC0L7Qs9GA0LDRhNC40Lgg0YHQvtGC0YDRg9C00L3QuNC60LAuXG4gICAgICogQHBhcmFtIGV2ZW50IHtFdmVudH0g0KHQvtCx0YvRgtC40LUuXG4gICAgICovXG4gICAgXCJ1cGRhdGUtcGhvdG9cIjogZXZlbnQgPT4ge1xuICAgICAgY29uc3QgcGhvdG9FbGVtZW50ID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIudmctcGhvdG9cIik7XG4gICAgICBjb25zdCB7cGhvdG9JZH0gPSBwaG90b0VsZW1lbnQuZGF0YXNldDtcbiAgICAgIGNvbnN0IGJ1dHRvbnMgPSBwaG90b0VsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJyk7XG5cbiAgICAgIGlmICghIXBob3RvSWQpIHtcbiAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpKTtcblxuICAgICAgICB0aGlzLnNldEFzTWFpblBob3RvKCtwaG90b0lkKS50aGVuKFxuICAgICAgICAgIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICB0aGlzLmRyYXcoe2FjdGlvbjogJ1BIT1RPX0JJT01FVFJZX0FERCcsIGFjdGlvblR5cGU6ICdwaG90b19hbGJ1bSd9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ0aGlzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImdsb2JhbCIsImdsb2JhbFRoaXMiLCJzZWxmIiwic3VwcG9ydCIsIlN5bWJvbCIsIkJsb2IiLCJlIiwidmlld0NsYXNzZXMiLCJpc0FycmF5QnVmZmVyVmlldyIsIkFycmF5QnVmZmVyIiwiaXNWaWV3IiwiaW5kZXhPZiIsInRvU3RyaW5nIiwibm9ybWFsaXplTmFtZSIsIm5hbWUiLCJTdHJpbmciLCJ0ZXN0IiwiVHlwZUVycm9yIiwidG9Mb3dlckNhc2UiLCJub3JtYWxpemVWYWx1ZSIsInZhbHVlIiwiaXRlcmF0b3JGb3IiLCJpdGVtcyIsIml0ZXJhdG9yIiwibmV4dCIsInNoaWZ0IiwiZG9uZSIsInVuZGVmaW5lZCIsIkhlYWRlcnMiLCJoZWFkZXJzIiwibWFwIiwiZm9yRWFjaCIsImFwcGVuZCIsIkFycmF5IiwiaXNBcnJheSIsImhlYWRlciIsImdldE93blByb3BlcnR5TmFtZXMiLCJjb25zdW1lZCIsImJvZHkiLCJib2R5VXNlZCIsIlByb21pc2UiLCJyZWplY3QiLCJmaWxlUmVhZGVyUmVhZHkiLCJyZWFkZXIiLCJyZXNvbHZlIiwib25sb2FkIiwicmVzdWx0Iiwib25lcnJvciIsImVycm9yIiwicmVhZEJsb2JBc0FycmF5QnVmZmVyIiwiYmxvYiIsIkZpbGVSZWFkZXIiLCJwcm9taXNlIiwicmVhZEFzQXJyYXlCdWZmZXIiLCJidWZmZXJDbG9uZSIsImJ1ZiIsInNsaWNlIiwidmlldyIsIlVpbnQ4QXJyYXkiLCJieXRlTGVuZ3RoIiwic2V0IiwiYnVmZmVyIiwiQm9keSIsIl9pbml0Qm9keSIsIl9ib2R5SW5pdCIsIl9ib2R5VGV4dCIsImlzUHJvdG90eXBlT2YiLCJfYm9keUJsb2IiLCJGb3JtRGF0YSIsIl9ib2R5Rm9ybURhdGEiLCJVUkxTZWFyY2hQYXJhbXMiLCJEYXRhVmlldyIsIl9ib2R5QXJyYXlCdWZmZXIiLCJ0eXBlIiwicmVqZWN0ZWQiLCJFcnJvciIsImFycmF5QnVmZmVyIiwiYnl0ZU9mZnNldCIsInRoZW4iLCJ0ZXh0IiwicmVhZEFzVGV4dCIsImNoYXJzIiwibGVuZ3RoIiwiaSIsImZyb21DaGFyQ29kZSIsImpvaW4iLCJyZWFkQXJyYXlCdWZmZXJBc1RleHQiLCJmb3JtRGF0YSIsImRlY29kZSIsImpzb24iLCJKU09OIiwicGFyc2UiLCJvbGRWYWx1ZSIsImhhcyIsImNhbGxiYWNrIiwidGhpc0FyZyIsImtleXMiLCJwdXNoIiwidmFsdWVzIiwiZW50cmllcyIsIm1ldGhvZHMiLCJSZXF1ZXN0IiwiaW5wdXQiLCJvcHRpb25zIiwibWV0aG9kIiwidXBjYXNlZCIsInVybCIsImNyZWRlbnRpYWxzIiwibW9kZSIsInNpZ25hbCIsInRvVXBwZXJDYXNlIiwicmVmZXJyZXIiLCJjYWNoZSIsInJlUGFyYW1TZWFyY2giLCJyZXBsYWNlIiwiRGF0ZSIsImdldFRpbWUiLCJmb3JtIiwidHJpbSIsInNwbGl0IiwiYnl0ZXMiLCJkZWNvZGVVUklDb21wb25lbnQiLCJSZXNwb25zZSIsImJvZHlJbml0Iiwic3RhdHVzIiwib2siLCJzdGF0dXNUZXh0IiwiY2xvbmUiLCJyZXNwb25zZSIsInJlZGlyZWN0U3RhdHVzZXMiLCJyZWRpcmVjdCIsIlJhbmdlRXJyb3IiLCJsb2NhdGlvbiIsIkRPTUV4Y2VwdGlvbiIsImVyciIsIm1lc3NhZ2UiLCJzdGFjayIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwiaW5pdCIsInJlcXVlc3QiLCJhYm9ydGVkIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJhYm9ydFhociIsImFib3J0IiwicmF3SGVhZGVycyIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsInN1YnN0ciIsImxpbmUiLCJwYXJ0cyIsInJlc3BvbnNlVVJMIiwicmVzcG9uc2VUZXh0Iiwic2V0VGltZW91dCIsIm9udGltZW91dCIsIm9uYWJvcnQiLCJvcGVuIiwiaHJlZiIsImZpeFVybCIsIndpdGhDcmVkZW50aWFscyIsInJlc3BvbnNlVHlwZSIsInNldFJlcXVlc3RIZWFkZXIiLCJhZGRFdmVudExpc3RlbmVyIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZW5kIiwicG9seWZpbGwiLCJmZXRjaCIsIlZpc2lvblBob3RvR2FsbGVyeSIsImFjdGlvblR5cGUiLCJlbXBsb3llZUlkIiwidmlzaW9uUGVyc29uSWQiLCJwZXJzb25JZCIsInRva2VuIiwiY29udHJvbHMiLCJtYXN0ZXJBbGJ1bSIsImRpc2FibGVBbGwiLCJ1cGRhdGUiLCJ1cGxvYWQiLCJyZW1vdmUiLCJldmVudCIsImZpbGVJbnB1dCIsInJvb3RFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInJvdXRlciIsImNsaWNrIiwiZmlsZSIsInRhcmdldCIsImZpbGVzIiwicmVhZEFzRGF0YVVSTCIsImFkZFBob3RvIiwiZHJhdyIsImFjdGlvbiIsImhhbmRsZUVycm9yIiwiYmxvY2tpbmdFcnJvck1lc3NhZ2UiLCJwaG90b0VsZW1lbnQiLCJjbG9zZXN0IiwicGhvdG9JZCIsImRhdGFzZXQiLCJpc01haW5QaG90byIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiZGVsZXRlUGhvdG8iLCJidXR0b25zIiwicXVlcnlTZWxlY3RvckFsbCIsImJ1dHRvbiIsInNldEF0dHJpYnV0ZSIsInNldEFzTWFpblBob3RvIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImVtcGxveWVlIiwiaWQiLCJlcnJvckZ1bmN0aW9uIiwic3VjY2Vzc0Z1bmN0aW9uIiwicGFyYW1zIiwibWVzc2FnZVN0cmluZyIsImZhdWx0c3RyaW5nIiwicmV2ZXJzZSIsImVycm9yTWVzc2FnZSIsInN0cmluZ2lmeSIsImNvbnNvbGUiLCJsb2ciLCJhY3Rpb25EZXNjcmlwdGlvbiIsInJlcXVlc3RQYXRoIiwicmVxdWVzdEJvZHkiLCJyZXF1ZXN0RGVmYXVsdHMiLCJ2aXNpb25fcGVyc29uX2lkIiwiaW1hZ2UiLCJ0b2dnbGVPdmVybGF5TWVzc2FnZSIsImVtcGxveWVlX2lkIiwicGhvdG9faWQiLCJnYWxsZXJ5Q29udGFpbmVyIiwiYWRkIiwiaW5uZXJIVE1MIiwibWFpblBob3RvQ29udGFpbmVyIiwiZ2FsbGVyeSIsImdldFBob3RvcyIsImNyZWF0ZVBob3RvRWxlbWVudCIsIm1haW4iLCJlbXB0eSIsImNyZWF0ZU5vUGhvdG9FbGVtZW50IiwiaW5pdEV2ZW50cyIsInJlc3BvbnNlSnNvbiIsInBhcmVudEVsZW1lbnQiLCJtYWluUGhvdG9EYXRhIiwiZmluZCIsImdhbGxlcnlQaG90b3NEYXRhIiwiZmlsdGVyIiwiZ2FsbGVyeVBob3Rvc0h0bWwiLCJwaG90b0RhdGEiLCJhY3Rpb25WYWx1ZSIsImFkZF9waG90b190eXBlIiwibWFpbl9waG90b19yZXBsYWNlZCIsIm1haW5fcGhvdG8iLCJoYW5kbGVTdWNjZXNzIiwiY2F0Y2giLCJwYXRoIiwiYXZhdGFyVXJsIiwiZWxlbWVudENsYXNzZXMiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJtYWluQXR0cmlidXRlIiwiZ2V0UGhvdG9CdXR0b25zIiwidXBsb2FkSWNvbiIsInJlZHVjZSIsImJ1dHRvbnNTdHJpbmciXSwic291cmNlUm9vdCI6IiJ9