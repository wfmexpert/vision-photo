!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VisionPhotoGallery=e():t.VisionPhotoGallery=e()}(this,(function(){return function(){"use strict";var t={d:function(e,o){for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var e={};t.d(e,{default:function(){return x}});var o="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==t.g&&t.g||{},r="URLSearchParams"in o,n="Symbol"in o&&"iterator"in Symbol,i="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch(t){return!1}}(),s="FormData"in o,a="ArrayBuffer"in o;if(a)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&u.indexOf(Object.prototype.toString.call(t))>-1};function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function c(t){return"string"!=typeof t&&(t=String(t)),t}function d(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function f(t){this.map={},t instanceof f?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){if(2!=t.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+t.length);this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function p(t){if(!t._noBody)return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function y(t){return new Promise((function(e,o){t.onload=function(){e(t.result)},t.onerror=function(){o(t.error)}}))}function v(t){var e=new FileReader,o=y(e);return e.readAsArrayBuffer(t),o}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&i&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=m(t):this._bodyText=t=Object.prototype.toString.call(t):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return p(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(i)return this.blob().then(v);throw new Error("could not read as ArrayBuffer")},this.text=function(){var t,e,o,r,n,i=p(this);if(i)return i;if(this._bodyBlob)return t=this._bodyBlob,o=y(e=new FileReader),n=(r=/charset=([A-Za-z0-9_-]+)/.exec(t.type))?r[1]:"utf-8",e.readAsText(t,n),o;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),o=new Array(e.length),r=0;r<e.length;r++)o[r]=String.fromCharCode(e[r]);return o.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(t,e){t=h(t),e=c(e);var o=this.map[t];this.map[t]=o?o+", "+e:e},f.prototype.delete=function(t){delete this.map[h(t)]},f.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},f.prototype.set=function(t,e){this.map[h(t)]=c(e)},f.prototype.forEach=function(t,e){for(var o in this.map)this.map.hasOwnProperty(o)&&t.call(e,this.map[o],o,this)},f.prototype.keys=function(){var t=[];return this.forEach((function(e,o){t.push(o)})),d(t)},f.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),d(t)},f.prototype.entries=function(){var t=[];return this.forEach((function(e,o){t.push([o,e])})),d(t)},n&&(f.prototype[Symbol.iterator]=f.prototype.entries);var b=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function w(t,e){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,i=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(n=(r=e.method||this.method||"GET").toUpperCase(),b.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||function(){if("AbortController"in o)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var s=/([?&])_=[^&]*/;s.test(this.url)?this.url=this.url.replace(s,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function E(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var o=t.split("="),r=o.shift().replace(/\+/g," "),n=o.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(n))}})),e}function P(t,e){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},g.call(w.prototype),g.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},P.error=function(){var t=new P(null,{status:200,statusText:""});return t.ok=!1,t.status=0,t.type="error",t};var _=[301,302,303,307,308];P.redirect=function(t,e){if(-1===_.indexOf(e))throw new RangeError("Invalid status code");return new P(null,{status:e,headers:{location:t}})};var O=o.DOMException;try{new O}catch(t){(O=function(t,e){this.message=t,this.name=e;var o=Error(t);this.stack=o.stack}).prototype=Object.create(Error.prototype),O.prototype.constructor=O}function A(t,e){return new Promise((function(r,n){var s=new w(t,e);if(s.signal&&s.signal.aborted)return n(new O("Aborted","AbortError"));var u=new XMLHttpRequest;function l(){u.abort()}if(u.onload=function(){var t,e,o={statusText:u.statusText,headers:(t=u.getAllResponseHeaders()||"",e=new f,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var o=t.split(":"),r=o.shift().trim();if(r){var n=o.join(":").trim();try{e.append(r,n)}catch(t){console.warn("Response "+t.message)}}})),e)};0===s.url.indexOf("file://")&&(u.status<200||u.status>599)?o.status=200:o.status=u.status,o.url="responseURL"in u?u.responseURL:o.headers.get("X-Request-URL");var n="response"in u?u.response:u.responseText;setTimeout((function(){r(new P(n,o))}),0)},u.onerror=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},u.ontimeout=function(){setTimeout((function(){n(new TypeError("Network request timed out"))}),0)},u.onabort=function(){setTimeout((function(){n(new O("Aborted","AbortError"))}),0)},u.open(s.method,function(t){try{return""===t&&o.location.href?o.location.href:t}catch(e){return t}}(s.url),!0),"include"===s.credentials?u.withCredentials=!0:"omit"===s.credentials&&(u.withCredentials=!1),"responseType"in u&&(i?u.responseType="blob":a&&(u.responseType="arraybuffer")),e&&"object"==typeof e.headers&&!(e.headers instanceof f||o.Headers&&e.headers instanceof o.Headers)){var d=[];Object.getOwnPropertyNames(e.headers).forEach((function(t){d.push(h(t)),u.setRequestHeader(t,c(e.headers[t]))})),s.headers.forEach((function(t,e){-1===d.indexOf(e)&&u.setRequestHeader(e,t)}))}else s.headers.forEach((function(t,e){u.setRequestHeader(e,t)}));s.signal&&(s.signal.addEventListener("abort",l),u.onreadystatechange=function(){4===u.readyState&&s.signal.removeEventListener("abort",l)}),u.send(void 0===s._bodyInit?null:s._bodyInit)}))}function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function I(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function k(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?I(Object(o),!0).forEach((function(e){j(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):I(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function B(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S(r.key),r)}}function j(t,e,o){return(e=S(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function S(t){var e=function(t){if("object"!=T(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=T(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==T(e)?e:e+""}A.polyfill=!0,o.fetch||(o.fetch=A,o.Headers=f,o.Request=w,o.Response=P);var x=function(){return t=function t(e){var o=this,r=e.root,n=e.employeeId,i=e.visionPersonId,s=e.personId,a=e.token,u=e.controls,l=e.masterAlbum,h=void 0===l||l;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,"galleryContainer",null),j(this,"rootElement",null),j(this,"token",null),j(this,"controls",{disableAll:!1,update:!0,upload:!0,remove:!0}),j(this,"masterAlbum",!0),j(this,"errorFunction",null),j(this,"successFunction",null),j(this,"router",{"upload-photo":function(t){var e=o.rootElement.querySelector('input[type="file"]');e.addEventListener("change",o.router["file-input-changed"]),e.click()},"file-input-changed":function(t){var e=t.target.files[0],r=new FileReader;r.readAsDataURL(e),r.onload=function(){o.addPhoto(r.result).then((function(t){if(t.ok)o.draw({action:"uploadPhoto"});else if(200!==t.status)return t.json()})).then((function(t){t&&o.handleError({message:t})})).finally((function(){return o.toggleOverlayMessage()}))},r.onerror=function(){o.handleError({message:r.error,blockingErrorMessage:"Ошибка загрузки фотографии (-ий): ".concat(r.error)})}},"remove-photo":function(t){var e=t.target.closest(".vg-photo"),r=e.dataset.photoId,n=e.classList.contains("vg-photo--main");r&&o.deletePhoto(+r).then((function(t){if(t.faultcode)o.handleError({message:t});else if(t.ok)o.draw({action:n?"photoRemoveMain":"photoRemove"});else if(200!==t.status)return t.json()}),(function(t){o.handleError({message:t})}))},"update-photo":function(t){var e=t.target.closest(".vg-photo"),r=e.dataset.photoId,n=e.querySelectorAll("button");r&&(n.forEach((function(t){return t.setAttribute("disabled","disabled")})),o.setAsMainPhoto(+r).then((function(t){if(t.ok)o.draw({action:"photoAlbum"});else if(200!==t.status)return t.json()}),(function(t){o.handleError({message:t})})))}}),!r)throw new Error("Не указан ID корневого элемента для галереи!");var c=document.getElementById(r);if(!c)throw new Error("Проверьте указанный ID корневого элемента для галереи!");if(this.rootElement=c,!n&&!i&&!s)throw new Error("Не указан ID пользователя на портале Vision");this.employee={id:null,personId:null,visionPersonId:null},this.employeeId=n,this.visionPersonId=i,this.personId=s,this.token=a,this.controls=u,this.masterAlbum=h,this.draw()},e=[{key:"errorFunction",get:function(){return this.errorFunction},set:function(t){t&&(this.errorFunction=t)}},{key:"successFunction",get:function(){return this.successFunction},set:function(t){t&&(this.successFunction=t)}},{key:"update",value:function(t){var e=t.employeeId,o=t.token;this.employeeId=e,this.token=o,this.draw()}},{key:"employeeId",get:function(){return this.employee.id},set:function(t){t&&(this.employee.id=t)}},{key:"visionPersonId",get:function(){return this.employee.visionPersonId},set:function(t){t&&(this.employee.visionPersonId=t)}},{key:"personId",get:function(){return this.employee.personId},set:function(t){t&&(this.employee.personId=t)}},{key:"rootElement",get:function(){return this.rootElement}},{key:"token",get:function(){return this.token},set:function(t){t&&(this.token=t)}},{key:"controls",get:function(){return this.controls},set:function(t){this.controls=k(k({},this.controls),t)}},{key:"masterAlbum",get:function(){return this.masterAlbum},set:function(t){this.masterAlbum=t}},{key:"handleError",value:function(t){var e=t.message,o=void 0===e?{}:e,r=t.blockingErrorMessage;if(this.errorFunction){var n,i,s="";"object"===T(o)&&(null!==(n=o.detail)&&void 0!==n&&n.errorMessage?s=null===(i=o.detail)||void 0===i?void 0:i.errorMessage:o.faultstring?s=o.faultstring:Object.keys(o).reverse().forEach((function(t){s+="".concat(o[t],"<br/>")})));var a=s.length?s:JSON.stringify(o);this.errorFunction(a,"Ошибка")}else{if(r)throw new Error(r);console.log(o)}}},{key:"handleSuccess",value:function(t){this.successFunction&&this.successFunction(t)}},{key:"request",value:function(t){var e=t.requestPath,o=t.requestBody,r={method:"POST",mode:"same-origin",credentials:"same-origin",headers:{"Content-Type":"application/json","X-CSRFToken":this.token},body:JSON.stringify(o)};return fetch("/api/v2/vision/".concat(e,"/"),r)}},{key:"getPhotos",value:function(){var t={};return this.employeeId&&!this.visionPersonId?t.employeeId=this.employeeId:this.visionPersonId?t.vision_person_id=this.visionPersonId:this.personId&&(t.personId=this.personId),this.request({requestPath:"get_photos",requestBody:k(k({},t),{},{masterAlbum:this.masterAlbum})})}},{key:"addPhoto",value:function(t){return this.toggleOverlayMessage("Загрузка..."),this.request({requestPath:"add_photo",requestBody:{employeeId:this.employeeId,image:t}})}},{key:"deletePhoto",value:function(t){this.toggleOverlayMessage("Удаление фотографии...");var e=this.employeeId;return this.request({requestPath:"delete_photo",requestBody:{employee_id:e,photo_id:t}})}},{key:"updatePhoto",value:function(t){return this.toggleOverlayMessage("Обновление фотографии..."),this.request({requestPath:"update_photo",requestBody:{employeeId:this.employeeId,photo_id:t}})}},{key:"setAsMainPhoto",value:function(t){return this.toggleOverlayMessage("Обновление основной фотографии..."),this.request({requestPath:"set_main_photo",requestBody:{employeeId:this.employeeId,photoId:t}})}},{key:"toggleOverlayMessage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.galleryContainer;if(!e)throw new Error("Не найдена корневой элемент галереи");t?(e.dataset.message=t,e.classList.add("vision-photo-gallery--message")):(e.classList.remove("vision-photo-gallery--message"),e.dataset.message="")}},{key:"draw",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=this.rootElement;o.innerHTML='\n      <div class="vision-photo-gallery">\n        <input type="file" class="vision-photo-gallery__file-field" tabindex="-1">\n        <div class="vision-photo-gallery__item vision-photo-gallery__item--main">\n          <div class="vg-main-photo"></div>\n        </div>\n        <div class="vision-photo-gallery__item">\n          <div class="vg-gallery"></div>\n        </div>\n      </div>\n    ';var r=document.querySelector(".vision-photo-gallery");this.galleryContainer=r,this.toggleOverlayMessage("Загрузка...");var n=o.querySelector(".vg-main-photo"),i=o.querySelector(".vg-gallery"),s=this.controls.upload;this.getPhotos().then((function(e){if(n.innerHTML=t.createPhotoElement({main:!0,empty:!0,photoId:null}),s&&(i.innerHTML=t.createPhotoElement({main:!1,empty:!0,photoId:null})),e.ok)return e.json();n.innerHTML=t.createNoPhotoElement(),t.initEvents(),t.toggleOverlayMessage()}),(function(e){t.toggleOverlayMessage(),t.handleError({message:e}),t.initEvents()})).then((function(o){var r={action:e.action,photos:o};if(!o||!o.length)return n.innerHTML=t.createNoPhotoElement(),i.parentElement.classList.add("hidden"),t.toggleOverlayMessage(),void("photoRemoveMain"===e.action&&t.handleSuccess(r));var a=o.find((function(t){return t.main})),u=o.filter((function(t){return!t.main}));if(a?n.innerHTML=t.createPhotoElement(a):n.parentElement.classList.add("hidden"),u.length){var l="";u.forEach((function(e){return l+=t.createPhotoElement(e)})),s&&(l+=t.createPhotoElement({main:!1,empty:!0,photoId:null})),i.innerHTML=l}else s||i.parentElement.classList.add("hidden");t.initEvents(),t.toggleOverlayMessage(),t.handleSuccess(r)}),(function(e){t.handleError({message:e}),t.toggleOverlayMessage(),t.initEvents()})).catch((function(e){t.toggleOverlayMessage(),t.handleError({message:e}),t.initEvents()})),this.initEvents()}},{key:"createPhotoElement",value:function(t){var e=t.photoId,o=t.main,r=t.empty,n=t.path,i=t.avatarUrl,s=this.controls,a=s.disableAll,u=s.upload,l=s.update,h=s.remove,c=void 0===h?!r:h,d="",f="",p="",y="";return!i&&n&&(p='style="background-image: url('.concat(n,')"')),i&&(p='style="background-image: url('.concat(i,')"')),o?(y='data-main="'.concat(o,'"'),r?(f="vg-photo vg-photo--main",d=this.getPhotoButtons({upload:u})):(f="vg-photo vg-photo--main",d=this.getPhotoButtons({remove:c}))):r?(f="vg-gallery__item vg-photo vg-photo--upload",d=this.getPhotoButtons({uploadIcon:u})):(f="vg-gallery__item vg-photo",d=this.getPhotoButtons({update:l,remove:c})),'\n      <div class="'.concat(f,'"\n        ').concat(p,'\n        data-photo-id="').concat(e,'"\n        ').concat(y,">\n        ").concat(a?"":d,"\n        </div>\n      ")}},{key:"createNoPhotoElement",value:function(){return'\n      <div class="vg-photo vg-photo--main">\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="-256 -256 1024 1024">\n          <path fill="#4a5266"\n            d="M437 310.8c-28.4-28.4-62.2-49.2-99.1-61.7 34.1-25.2 56.2-65.6 56.2-111.1C394.1 61.9 332.1 0 256 0S117.9 61.9 117.9 138.1c0 45.5 22.1 85.9 56.2 111.1 -36.9 12.4-70.8 33.3-99.1 61.7C26.6 359.2 0 423.5 0 491.8 0 503 9 512 20.2 512h471.7c11.1 0 20.2-9 20.2-20.2C512 423.5 485.4 359.2 437 310.8zM158.2 138.1c0-53.9 43.9-97.8 97.8-97.8 53.9 0 97.8 43.9 97.8 97.8 0 53.9-43.9 97.8-97.8 97.8C202.1 235.8 158.2 192 158.2 138.1zM41.2 471.7C51.4 362.2 143.9 276.2 256 276.2s204.6 86 214.8 195.5H41.2z"/>\n        </svg>\n      </div>\n    '}},{key:"getPhotoButtons",value:function(t){if(t.disableAll)return"";var e={remove:'<button class="vg-photo__button vg-button vg-button--red" data-action="remove-photo">Удалить</button>',upload:'<button class="vg-photo__button vg-button" data-action="upload-photo">Загрузить</button>',uploadIcon:'<button class="vg-photo__button vg-button vg-button--upload" data-action="upload-photo">&#43;</button>',update:'<button class="vg-photo__button vg-button vg-button--green" data-action="update-photo">Выбрать</button>'};return Object.keys(t).reduce((function(o,r){return t[r]&&(o+=e[r]),o}),"")}},{key:"initEvents",value:function(){var t=this;this.rootElement.querySelectorAll("button").forEach((function(e){e.addEventListener("click",t.router[e.dataset.action],!1)}))}}],e&&B(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();return e.default}()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBRUosR0FDRixJQTVxQldoRCxHQUFBVyxFQUFBaE0sRUFBQUksVUFBQWlMLEdBQUE1TCxPQUFBQyxlQUFBTSxFQUFBLGFBQUFrTSxVQUFBLElBQUFsTSxFQUFBLElBQUFBLEVBQUFxTCxDQTRxQlYsQ0FwcUJvQyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vVmlzaW9uUGhvdG9HYWxsZXJ5L3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9WaXNpb25QaG90b0dhbGxlcnkvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vVmlzaW9uUGhvdG9HYWxsZXJ5L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9WaXNpb25QaG90b0dhbGxlcnkvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9WaXNpb25QaG90b0dhbGxlcnkvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9WaXNpb25QaG90b0dhbGxlcnkvLi9ub2RlX21vZHVsZXMvd2hhdHdnLWZldGNoL2ZldGNoLmpzIiwid2VicGFjazovL1Zpc2lvblBob3RvR2FsbGVyeS8uL1Zpc2lvblBob3RvR2FsbGVyeS9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJWaXNpb25QaG90b0dhbGxlcnlcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiVmlzaW9uUGhvdG9HYWxsZXJ5XCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmosIHByb3ApIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOyB9IiwiLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zICovXG52YXIgZyA9XG4gICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsVGhpcykgfHxcbiAgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiBzZWxmKSB8fFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbCkgfHxcbiAge31cblxudmFyIHN1cHBvcnQgPSB7XG4gIHNlYXJjaFBhcmFtczogJ1VSTFNlYXJjaFBhcmFtcycgaW4gZyxcbiAgaXRlcmFibGU6ICdTeW1ib2wnIGluIGcgJiYgJ2l0ZXJhdG9yJyBpbiBTeW1ib2wsXG4gIGJsb2I6XG4gICAgJ0ZpbGVSZWFkZXInIGluIGcgJiZcbiAgICAnQmxvYicgaW4gZyAmJlxuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG5ldyBCbG9iKClcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSkoKSxcbiAgZm9ybURhdGE6ICdGb3JtRGF0YScgaW4gZyxcbiAgYXJyYXlCdWZmZXI6ICdBcnJheUJ1ZmZlcicgaW4gZ1xufVxuXG5mdW5jdGlvbiBpc0RhdGFWaWV3KG9iaikge1xuICByZXR1cm4gb2JqICYmIERhdGFWaWV3LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKG9iailcbn1cblxuaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIpIHtcbiAgdmFyIHZpZXdDbGFzc2VzID0gW1xuICAgICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcbiAgICAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLFxuICAgICdbb2JqZWN0IEludDE2QXJyYXldJyxcbiAgICAnW29iamVjdCBVaW50MTZBcnJheV0nLFxuICAgICdbb2JqZWN0IEludDMyQXJyYXldJyxcbiAgICAnW29iamVjdCBVaW50MzJBcnJheV0nLFxuICAgICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nLFxuICAgICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nXG4gIF1cblxuICB2YXIgaXNBcnJheUJ1ZmZlclZpZXcgPVxuICAgIEFycmF5QnVmZmVyLmlzVmlldyB8fFxuICAgIGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiB2aWV3Q2xhc3Nlcy5pbmRleE9mKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopKSA+IC0xXG4gICAgfVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVOYW1lKG5hbWUpIHtcbiAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xuICAgIG5hbWUgPSBTdHJpbmcobmFtZSlcbiAgfVxuICBpZiAoL1teYS16MC05XFwtIyQlJicqKy5eX2B8fiFdL2kudGVzdChuYW1lKSB8fCBuYW1lID09PSAnJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lOiBcIicgKyBuYW1lICsgJ1wiJylcbiAgfVxuICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpXG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVZhbHVlKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpXG4gIH1cbiAgcmV0dXJuIHZhbHVlXG59XG5cbi8vIEJ1aWxkIGEgZGVzdHJ1Y3RpdmUgaXRlcmF0b3IgZm9yIHRoZSB2YWx1ZSBsaXN0XG5mdW5jdGlvbiBpdGVyYXRvckZvcihpdGVtcykge1xuICB2YXIgaXRlcmF0b3IgPSB7XG4gICAgbmV4dDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdmFsdWUgPSBpdGVtcy5zaGlmdCgpXG4gICAgICByZXR1cm4ge2RvbmU6IHZhbHVlID09PSB1bmRlZmluZWQsIHZhbHVlOiB2YWx1ZX1cbiAgICB9XG4gIH1cblxuICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuICAgIGl0ZXJhdG9yW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBpdGVyYXRvclxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpdGVyYXRvclxufVxuXG5leHBvcnQgZnVuY3Rpb24gSGVhZGVycyhoZWFkZXJzKSB7XG4gIHRoaXMubWFwID0ge31cblxuICBpZiAoaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpIHtcbiAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIHZhbHVlKVxuICAgIH0sIHRoaXMpXG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShoZWFkZXJzKSkge1xuICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpIHtcbiAgICAgIGlmIChoZWFkZXIubGVuZ3RoICE9IDIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSGVhZGVycyBjb25zdHJ1Y3RvcjogZXhwZWN0ZWQgbmFtZS92YWx1ZSBwYWlyIHRvIGJlIGxlbmd0aCAyLCBmb3VuZCcgKyBoZWFkZXIubGVuZ3RoKVxuICAgICAgfVxuICAgICAgdGhpcy5hcHBlbmQoaGVhZGVyWzBdLCBoZWFkZXJbMV0pXG4gICAgfSwgdGhpcylcbiAgfSBlbHNlIGlmIChoZWFkZXJzKSB7XG4gICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICB0aGlzLmFwcGVuZChuYW1lLCBoZWFkZXJzW25hbWVdKVxuICAgIH0sIHRoaXMpXG4gIH1cbn1cblxuSGVhZGVycy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcbiAgdmFsdWUgPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSlcbiAgdmFyIG9sZFZhbHVlID0gdGhpcy5tYXBbbmFtZV1cbiAgdGhpcy5tYXBbbmFtZV0gPSBvbGRWYWx1ZSA/IG9sZFZhbHVlICsgJywgJyArIHZhbHVlIDogdmFsdWVcbn1cblxuSGVhZGVycy5wcm90b3R5cGVbJ2RlbGV0ZSddID0gZnVuY3Rpb24obmFtZSkge1xuICBkZWxldGUgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV1cbn1cblxuSGVhZGVycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICBuYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKVxuICByZXR1cm4gdGhpcy5oYXMobmFtZSkgPyB0aGlzLm1hcFtuYW1lXSA6IG51bGxcbn1cblxuSGVhZGVycy5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24obmFtZSkge1xuICByZXR1cm4gdGhpcy5tYXAuaGFzT3duUHJvcGVydHkobm9ybWFsaXplTmFtZShuYW1lKSlcbn1cblxuSGVhZGVycy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV0gPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSlcbn1cblxuSGVhZGVycy5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gIGZvciAodmFyIG5hbWUgaW4gdGhpcy5tYXApIHtcbiAgICBpZiAodGhpcy5tYXAuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdGhpcy5tYXBbbmFtZV0sIG5hbWUsIHRoaXMpXG4gICAgfVxuICB9XG59XG5cbkhlYWRlcnMucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGl0ZW1zID0gW11cbiAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgaXRlbXMucHVzaChuYW1lKVxuICB9KVxuICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG59XG5cbkhlYWRlcnMucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgaXRlbXMgPSBbXVxuICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpdGVtcy5wdXNoKHZhbHVlKVxuICB9KVxuICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG59XG5cbkhlYWRlcnMucHJvdG90eXBlLmVudHJpZXMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGl0ZW1zID0gW11cbiAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgaXRlbXMucHVzaChbbmFtZSwgdmFsdWVdKVxuICB9KVxuICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG59XG5cbmlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gIEhlYWRlcnMucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBIZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzXG59XG5cbmZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcbiAgaWYgKGJvZHkuX25vQm9keSkgcmV0dXJuXG4gIGlmIChib2R5LmJvZHlVc2VkKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpKVxuICB9XG4gIGJvZHkuYm9keVVzZWQgPSB0cnVlXG59XG5cbmZ1bmN0aW9uIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdClcbiAgICB9XG4gICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlamVjdChyZWFkZXIuZXJyb3IpXG4gICAgfVxuICB9KVxufVxuXG5mdW5jdGlvbiByZWFkQmxvYkFzQXJyYXlCdWZmZXIoYmxvYikge1xuICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICB2YXIgcHJvbWlzZSA9IGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpXG4gIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKVxuICByZXR1cm4gcHJvbWlzZVxufVxuXG5mdW5jdGlvbiByZWFkQmxvYkFzVGV4dChibG9iKSB7XG4gIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gIHZhciBwcm9taXNlID0gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcbiAgdmFyIG1hdGNoID0gL2NoYXJzZXQ9KFtBLVphLXowLTlfLV0rKS8uZXhlYyhibG9iLnR5cGUpXG4gIHZhciBlbmNvZGluZyA9IG1hdGNoID8gbWF0Y2hbMV0gOiAndXRmLTgnXG4gIHJlYWRlci5yZWFkQXNUZXh0KGJsb2IsIGVuY29kaW5nKVxuICByZXR1cm4gcHJvbWlzZVxufVxuXG5mdW5jdGlvbiByZWFkQXJyYXlCdWZmZXJBc1RleHQoYnVmKSB7XG4gIHZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmKVxuICB2YXIgY2hhcnMgPSBuZXcgQXJyYXkodmlldy5sZW5ndGgpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgY2hhcnNbaV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHZpZXdbaV0pXG4gIH1cbiAgcmV0dXJuIGNoYXJzLmpvaW4oJycpXG59XG5cbmZ1bmN0aW9uIGJ1ZmZlckNsb25lKGJ1Zikge1xuICBpZiAoYnVmLnNsaWNlKSB7XG4gICAgcmV0dXJuIGJ1Zi5zbGljZSgwKVxuICB9IGVsc2Uge1xuICAgIHZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmLmJ5dGVMZW5ndGgpXG4gICAgdmlldy5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmKSlcbiAgICByZXR1cm4gdmlldy5idWZmZXJcbiAgfVxufVxuXG5mdW5jdGlvbiBCb2R5KCkge1xuICB0aGlzLmJvZHlVc2VkID0gZmFsc2VcblxuICB0aGlzLl9pbml0Qm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAvKlxuICAgICAgZmV0Y2gtbW9jayB3cmFwcyB0aGUgUmVzcG9uc2Ugb2JqZWN0IGluIGFuIEVTNiBQcm94eSB0b1xuICAgICAgcHJvdmlkZSB1c2VmdWwgdGVzdCBoYXJuZXNzIGZlYXR1cmVzIHN1Y2ggYXMgZmx1c2guIEhvd2V2ZXIsIG9uXG4gICAgICBFUzUgYnJvd3NlcnMgd2l0aG91dCBmZXRjaCBvciBQcm94eSBzdXBwb3J0IHBvbGx5ZmlsbHMgbXVzdCBiZSB1c2VkO1xuICAgICAgdGhlIHByb3h5LXBvbGx5ZmlsbCBpcyB1bmFibGUgdG8gcHJveHkgYW4gYXR0cmlidXRlIHVubGVzcyBpdCBleGlzdHNcbiAgICAgIG9uIHRoZSBvYmplY3QgYmVmb3JlIHRoZSBQcm94eSBpcyBjcmVhdGVkLiBUaGlzIGNoYW5nZSBlbnN1cmVzXG4gICAgICBSZXNwb25zZS5ib2R5VXNlZCBleGlzdHMgb24gdGhlIGluc3RhbmNlLCB3aGlsZSBtYWludGFpbmluZyB0aGVcbiAgICAgIHNlbWFudGljIG9mIHNldHRpbmcgUmVxdWVzdC5ib2R5VXNlZCBpbiB0aGUgY29uc3RydWN0b3IgYmVmb3JlXG4gICAgICBfaW5pdEJvZHkgaXMgY2FsbGVkLlxuICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtYXNzaWduXG4gICAgdGhpcy5ib2R5VXNlZCA9IHRoaXMuYm9keVVzZWRcbiAgICB0aGlzLl9ib2R5SW5pdCA9IGJvZHlcbiAgICBpZiAoIWJvZHkpIHtcbiAgICAgIHRoaXMuX25vQm9keSA9IHRydWU7XG4gICAgICB0aGlzLl9ib2R5VGV4dCA9ICcnXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keVxuICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5ibG9iICYmIEJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgIHRoaXMuX2JvZHlCbG9iID0gYm9keVxuICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5mb3JtRGF0YSAmJiBGb3JtRGF0YS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgdGhpcy5fYm9keUZvcm1EYXRhID0gYm9keVxuICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHkudG9TdHJpbmcoKVxuICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiBzdXBwb3J0LmJsb2IgJiYgaXNEYXRhVmlldyhib2R5KSkge1xuICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyID0gYnVmZmVyQ2xvbmUoYm9keS5idWZmZXIpXG4gICAgICAvLyBJRSAxMC0xMSBjYW4ndCBoYW5kbGUgYSBEYXRhVmlldyBib2R5LlxuICAgICAgdGhpcy5fYm9keUluaXQgPSBuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSlcbiAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIgJiYgKEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpIHx8IGlzQXJyYXlCdWZmZXJWaWV3KGJvZHkpKSkge1xuICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyID0gYnVmZmVyQ2xvbmUoYm9keSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5ID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGJvZHkpXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkge1xuICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAndGV4dC9wbGFpbjtjaGFyc2V0PVVURi04JylcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUJsb2IgJiYgdGhpcy5fYm9keUJsb2IudHlwZSkge1xuICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCB0aGlzLl9ib2R5QmxvYi50eXBlKVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04JylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoc3VwcG9ydC5ibG9iKSB7XG4gICAgdGhpcy5ibG9iID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgaWYgKHJlamVjdGVkKSB7XG4gICAgICAgIHJldHVybiByZWplY3RlZFxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QmxvYilcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUFycmF5QnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlBcnJheUJ1ZmZlcl0pKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIGJsb2InKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keVRleHRdKSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0aGlzLmFycmF5QnVmZmVyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikge1xuICAgICAgdmFyIGlzQ29uc3VtZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgaWYgKGlzQ29uc3VtZWQpIHtcbiAgICAgICAgcmV0dXJuIGlzQ29uc3VtZWRcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShcbiAgICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIuYnVmZmVyLnNsaWNlKFxuICAgICAgICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyLmJ5dGVPZmZzZXQsXG4gICAgICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIuYnl0ZU9mZnNldCArIHRoaXMuX2JvZHlBcnJheUJ1ZmZlci5ieXRlTGVuZ3RoXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcilcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYmxvYikge1xuICAgICAgcmV0dXJuIHRoaXMuYmxvYigpLnRoZW4ocmVhZEJsb2JBc0FycmF5QnVmZmVyKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIGFzIEFycmF5QnVmZmVyJylcbiAgICB9XG4gIH1cblxuICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgIGlmIChyZWplY3RlZCkge1xuICAgICAgcmV0dXJuIHJlamVjdGVkXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG4gICAgICByZXR1cm4gcmVhZEJsb2JBc1RleHQodGhpcy5fYm9keUJsb2IpXG4gICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVhZEFycmF5QnVmZmVyQXNUZXh0KHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikpXG4gICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyB0ZXh0JylcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcbiAgICB9XG4gIH1cblxuICBpZiAoc3VwcG9ydC5mb3JtRGF0YSkge1xuICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKGRlY29kZSlcbiAgICB9XG4gIH1cblxuICB0aGlzLmpzb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKVxuICB9XG5cbiAgcmV0dXJuIHRoaXNcbn1cblxuLy8gSFRUUCBtZXRob2RzIHdob3NlIGNhcGl0YWxpemF0aW9uIHNob3VsZCBiZSBub3JtYWxpemVkXG52YXIgbWV0aG9kcyA9IFsnQ09OTkVDVCcsICdERUxFVEUnLCAnR0VUJywgJ0hFQUQnLCAnT1BUSU9OUycsICdQQVRDSCcsICdQT1NUJywgJ1BVVCcsICdUUkFDRSddXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZU1ldGhvZChtZXRob2QpIHtcbiAgdmFyIHVwY2FzZWQgPSBtZXRob2QudG9VcHBlckNhc2UoKVxuICByZXR1cm4gbWV0aG9kcy5pbmRleE9mKHVwY2FzZWQpID4gLTEgPyB1cGNhc2VkIDogbWV0aG9kXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZXF1ZXN0KGlucHV0LCBvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSZXF1ZXN0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1BsZWFzZSB1c2UgdGhlIFwibmV3XCIgb3BlcmF0b3IsIHRoaXMgRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uJylcbiAgfVxuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG4gIHZhciBib2R5ID0gb3B0aW9ucy5ib2R5XG5cbiAgaWYgKGlucHV0IGluc3RhbmNlb2YgUmVxdWVzdCkge1xuICAgIGlmIChpbnB1dC5ib2R5VXNlZCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJylcbiAgICB9XG4gICAgdGhpcy51cmwgPSBpbnB1dC51cmxcbiAgICB0aGlzLmNyZWRlbnRpYWxzID0gaW5wdXQuY3JlZGVudGlhbHNcbiAgICBpZiAoIW9wdGlvbnMuaGVhZGVycykge1xuICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMoaW5wdXQuaGVhZGVycylcbiAgICB9XG4gICAgdGhpcy5tZXRob2QgPSBpbnB1dC5tZXRob2RcbiAgICB0aGlzLm1vZGUgPSBpbnB1dC5tb2RlXG4gICAgdGhpcy5zaWduYWwgPSBpbnB1dC5zaWduYWxcbiAgICBpZiAoIWJvZHkgJiYgaW5wdXQuX2JvZHlJbml0ICE9IG51bGwpIHtcbiAgICAgIGJvZHkgPSBpbnB1dC5fYm9keUluaXRcbiAgICAgIGlucHV0LmJvZHlVc2VkID0gdHJ1ZVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aGlzLnVybCA9IFN0cmluZyhpbnB1dClcbiAgfVxuXG4gIHRoaXMuY3JlZGVudGlhbHMgPSBvcHRpb25zLmNyZWRlbnRpYWxzIHx8IHRoaXMuY3JlZGVudGlhbHMgfHwgJ3NhbWUtb3JpZ2luJ1xuICBpZiAob3B0aW9ucy5oZWFkZXJzIHx8ICF0aGlzLmhlYWRlcnMpIHtcbiAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpXG4gIH1cbiAgdGhpcy5tZXRob2QgPSBub3JtYWxpemVNZXRob2Qob3B0aW9ucy5tZXRob2QgfHwgdGhpcy5tZXRob2QgfHwgJ0dFVCcpXG4gIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCB0aGlzLm1vZGUgfHwgbnVsbFxuICB0aGlzLnNpZ25hbCA9IG9wdGlvbnMuc2lnbmFsIHx8IHRoaXMuc2lnbmFsIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCdBYm9ydENvbnRyb2xsZXInIGluIGcpIHtcbiAgICAgIHZhciBjdHJsID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgcmV0dXJuIGN0cmwuc2lnbmFsO1xuICAgIH1cbiAgfSgpKTtcbiAgdGhpcy5yZWZlcnJlciA9IG51bGxcblxuICBpZiAoKHRoaXMubWV0aG9kID09PSAnR0VUJyB8fCB0aGlzLm1ldGhvZCA9PT0gJ0hFQUQnKSAmJiBib2R5KSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9keSBub3QgYWxsb3dlZCBmb3IgR0VUIG9yIEhFQUQgcmVxdWVzdHMnKVxuICB9XG4gIHRoaXMuX2luaXRCb2R5KGJvZHkpXG5cbiAgaWYgKHRoaXMubWV0aG9kID09PSAnR0VUJyB8fCB0aGlzLm1ldGhvZCA9PT0gJ0hFQUQnKSB7XG4gICAgaWYgKG9wdGlvbnMuY2FjaGUgPT09ICduby1zdG9yZScgfHwgb3B0aW9ucy5jYWNoZSA9PT0gJ25vLWNhY2hlJykge1xuICAgICAgLy8gU2VhcmNoIGZvciBhICdfJyBwYXJhbWV0ZXIgaW4gdGhlIHF1ZXJ5IHN0cmluZ1xuICAgICAgdmFyIHJlUGFyYW1TZWFyY2ggPSAvKFs/Jl0pXz1bXiZdKi9cbiAgICAgIGlmIChyZVBhcmFtU2VhcmNoLnRlc3QodGhpcy51cmwpKSB7XG4gICAgICAgIC8vIElmIGl0IGFscmVhZHkgZXhpc3RzIHRoZW4gc2V0IHRoZSB2YWx1ZSB3aXRoIHRoZSBjdXJyZW50IHRpbWVcbiAgICAgICAgdGhpcy51cmwgPSB0aGlzLnVybC5yZXBsYWNlKHJlUGFyYW1TZWFyY2gsICckMV89JyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlIGFkZCBhIG5ldyAnXycgcGFyYW1ldGVyIHRvIHRoZSBlbmQgd2l0aCB0aGUgY3VycmVudCB0aW1lXG4gICAgICAgIHZhciByZVF1ZXJ5U3RyaW5nID0gL1xcPy9cbiAgICAgICAgdGhpcy51cmwgKz0gKHJlUXVlcnlTdHJpbmcudGVzdCh0aGlzLnVybCkgPyAnJicgOiAnPycpICsgJ189JyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cblJlcXVlc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgUmVxdWVzdCh0aGlzLCB7Ym9keTogdGhpcy5fYm9keUluaXR9KVxufVxuXG5mdW5jdGlvbiBkZWNvZGUoYm9keSkge1xuICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpXG4gIGJvZHlcbiAgICAudHJpbSgpXG4gICAgLnNwbGl0KCcmJylcbiAgICAuZm9yRWFjaChmdW5jdGlvbihieXRlcykge1xuICAgICAgaWYgKGJ5dGVzKSB7XG4gICAgICAgIHZhciBzcGxpdCA9IGJ5dGVzLnNwbGl0KCc9JylcbiAgICAgICAgdmFyIG5hbWUgPSBzcGxpdC5zaGlmdCgpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG4gICAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJz0nKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgICAgICBmb3JtLmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQobmFtZSksIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpXG4gICAgICB9XG4gICAgfSlcbiAgcmV0dXJuIGZvcm1cbn1cblxuZnVuY3Rpb24gcGFyc2VIZWFkZXJzKHJhd0hlYWRlcnMpIHtcbiAgdmFyIGhlYWRlcnMgPSBuZXcgSGVhZGVycygpXG4gIC8vIFJlcGxhY2UgaW5zdGFuY2VzIG9mIFxcclxcbiBhbmQgXFxuIGZvbGxvd2VkIGJ5IGF0IGxlYXN0IG9uZSBzcGFjZSBvciBob3Jpem9udGFsIHRhYiB3aXRoIGEgc3BhY2VcbiAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzcyMzAjc2VjdGlvbi0zLjJcbiAgdmFyIHByZVByb2Nlc3NlZEhlYWRlcnMgPSByYXdIZWFkZXJzLnJlcGxhY2UoL1xccj9cXG5bXFx0IF0rL2csICcgJylcbiAgLy8gQXZvaWRpbmcgc3BsaXQgdmlhIHJlZ2V4IHRvIHdvcmsgYXJvdW5kIGEgY29tbW9uIElFMTEgYnVnIHdpdGggdGhlIGNvcmUtanMgMy42LjAgcmVnZXggcG9seWZpbGxcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dpdGh1Yi9mZXRjaC9pc3N1ZXMvNzQ4XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy83NTFcbiAgcHJlUHJvY2Vzc2VkSGVhZGVyc1xuICAgIC5zcGxpdCgnXFxyJylcbiAgICAubWFwKGZ1bmN0aW9uKGhlYWRlcikge1xuICAgICAgcmV0dXJuIGhlYWRlci5pbmRleE9mKCdcXG4nKSA9PT0gMCA/IGhlYWRlci5zdWJzdHIoMSwgaGVhZGVyLmxlbmd0aCkgOiBoZWFkZXJcbiAgICB9KVxuICAgIC5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHZhciBwYXJ0cyA9IGxpbmUuc3BsaXQoJzonKVxuICAgICAgdmFyIGtleSA9IHBhcnRzLnNoaWZ0KCkudHJpbSgpXG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHBhcnRzLmpvaW4oJzonKS50cmltKClcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBoZWFkZXJzLmFwcGVuZChrZXksIHZhbHVlKVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUud2FybignUmVzcG9uc2UgJyArIGVycm9yLm1lc3NhZ2UpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICByZXR1cm4gaGVhZGVyc1xufVxuXG5Cb2R5LmNhbGwoUmVxdWVzdC5wcm90b3R5cGUpXG5cbmV4cG9ydCBmdW5jdGlvbiBSZXNwb25zZShib2R5SW5pdCwgb3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVzcG9uc2UpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUGxlYXNlIHVzZSB0aGUgXCJuZXdcIiBvcGVyYXRvciwgdGhpcyBET00gb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4nKVxuICB9XG4gIGlmICghb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSB7fVxuICB9XG5cbiAgdGhpcy50eXBlID0gJ2RlZmF1bHQnXG4gIHRoaXMuc3RhdHVzID0gb3B0aW9ucy5zdGF0dXMgPT09IHVuZGVmaW5lZCA/IDIwMCA6IG9wdGlvbnMuc3RhdHVzXG4gIGlmICh0aGlzLnN0YXR1cyA8IDIwMCB8fCB0aGlzLnN0YXR1cyA+IDU5OSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUmVzcG9uc2UnOiBUaGUgc3RhdHVzIHByb3ZpZGVkICgwKSBpcyBvdXRzaWRlIHRoZSByYW5nZSBbMjAwLCA1OTldLlwiKVxuICB9XG4gIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDBcbiAgdGhpcy5zdGF0dXNUZXh0ID0gb3B0aW9ucy5zdGF0dXNUZXh0ID09PSB1bmRlZmluZWQgPyAnJyA6ICcnICsgb3B0aW9ucy5zdGF0dXNUZXh0XG4gIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcbiAgdGhpcy51cmwgPSBvcHRpb25zLnVybCB8fCAnJ1xuICB0aGlzLl9pbml0Qm9keShib2R5SW5pdClcbn1cblxuQm9keS5jYWxsKFJlc3BvbnNlLnByb3RvdHlwZSlcblxuUmVzcG9uc2UucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgUmVzcG9uc2UodGhpcy5fYm9keUluaXQsIHtcbiAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxuICAgIHN0YXR1c1RleHQ6IHRoaXMuc3RhdHVzVGV4dCxcbiAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpLFxuICAgIHVybDogdGhpcy51cmxcbiAgfSlcbn1cblxuUmVzcG9uc2UuZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IDIwMCwgc3RhdHVzVGV4dDogJyd9KVxuICByZXNwb25zZS5vayA9IGZhbHNlXG4gIHJlc3BvbnNlLnN0YXR1cyA9IDBcbiAgcmVzcG9uc2UudHlwZSA9ICdlcnJvcidcbiAgcmV0dXJuIHJlc3BvbnNlXG59XG5cbnZhciByZWRpcmVjdFN0YXR1c2VzID0gWzMwMSwgMzAyLCAzMDMsIDMwNywgMzA4XVxuXG5SZXNwb25zZS5yZWRpcmVjdCA9IGZ1bmN0aW9uKHVybCwgc3RhdHVzKSB7XG4gIGlmIChyZWRpcmVjdFN0YXR1c2VzLmluZGV4T2Yoc3RhdHVzKSA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBzdGF0dXMgY29kZScpXG4gIH1cblxuICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IHN0YXR1cywgaGVhZGVyczoge2xvY2F0aW9uOiB1cmx9fSlcbn1cblxuZXhwb3J0IHZhciBET01FeGNlcHRpb24gPSBnLkRPTUV4Y2VwdGlvblxudHJ5IHtcbiAgbmV3IERPTUV4Y2VwdGlvbigpXG59IGNhdGNoIChlcnIpIHtcbiAgRE9NRXhjZXB0aW9uID0gZnVuY3Rpb24obWVzc2FnZSwgbmFtZSkge1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2VcbiAgICB0aGlzLm5hbWUgPSBuYW1lXG4gICAgdmFyIGVycm9yID0gRXJyb3IobWVzc2FnZSlcbiAgICB0aGlzLnN0YWNrID0gZXJyb3Iuc3RhY2tcbiAgfVxuICBET01FeGNlcHRpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpXG4gIERPTUV4Y2VwdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBET01FeGNlcHRpb25cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoKGlucHV0LCBpbml0KSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGlucHV0LCBpbml0KVxuXG4gICAgaWYgKHJlcXVlc3Quc2lnbmFsICYmIHJlcXVlc3Quc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgIHJldHVybiByZWplY3QobmV3IERPTUV4Y2VwdGlvbignQWJvcnRlZCcsICdBYm9ydEVycm9yJykpXG4gICAgfVxuXG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG5cbiAgICBmdW5jdGlvbiBhYm9ydFhocigpIHtcbiAgICAgIHhoci5hYm9ydCgpXG4gICAgfVxuXG4gICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0LFxuICAgICAgICBoZWFkZXJzOiBwYXJzZUhlYWRlcnMoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8ICcnKVxuICAgICAgfVxuICAgICAgLy8gVGhpcyBjaGVjayBpZiBzcGVjaWZpY2FsbHkgZm9yIHdoZW4gYSB1c2VyIGZldGNoZXMgYSBmaWxlIGxvY2FsbHkgZnJvbSB0aGUgZmlsZSBzeXN0ZW1cbiAgICAgIC8vIE9ubHkgaWYgdGhlIHN0YXR1cyBpcyBvdXQgb2YgYSBub3JtYWwgcmFuZ2VcbiAgICAgIGlmIChyZXF1ZXN0LnVybC5pbmRleE9mKCdmaWxlOi8vJykgPT09IDAgJiYgKHhoci5zdGF0dXMgPCAyMDAgfHwgeGhyLnN0YXR1cyA+IDU5OSkpIHtcbiAgICAgICAgb3B0aW9ucy5zdGF0dXMgPSAyMDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zLnN0YXR1cyA9IHhoci5zdGF0dXM7XG4gICAgICB9XG4gICAgICBvcHRpb25zLnVybCA9ICdyZXNwb25zZVVSTCcgaW4geGhyID8geGhyLnJlc3BvbnNlVVJMIDogb3B0aW9ucy5oZWFkZXJzLmdldCgnWC1SZXF1ZXN0LVVSTCcpXG4gICAgICB2YXIgYm9keSA9ICdyZXNwb25zZScgaW4geGhyID8geGhyLnJlc3BvbnNlIDogeGhyLnJlc3BvbnNlVGV4dFxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZShuZXcgUmVzcG9uc2UoYm9keSwgb3B0aW9ucykpXG4gICAgICB9LCAwKVxuICAgIH1cblxuICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKVxuICAgICAgfSwgMClcbiAgICB9XG5cbiAgICB4aHIub250aW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IHRpbWVkIG91dCcpKVxuICAgICAgfSwgMClcbiAgICB9XG5cbiAgICB4aHIub25hYm9ydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ0Fib3J0ZWQnLCAnQWJvcnRFcnJvcicpKVxuICAgICAgfSwgMClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaXhVcmwodXJsKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gdXJsID09PSAnJyAmJiBnLmxvY2F0aW9uLmhyZWYgPyBnLmxvY2F0aW9uLmhyZWYgOiB1cmxcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHVybFxuICAgICAgfVxuICAgIH1cblxuICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCBmaXhVcmwocmVxdWVzdC51cmwpLCB0cnVlKVxuXG4gICAgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdpbmNsdWRlJykge1xuICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWVcbiAgICB9IGVsc2UgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdvbWl0Jykge1xuICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCdyZXNwb25zZVR5cGUnIGluIHhocikge1xuICAgICAgaWYgKHN1cHBvcnQuYmxvYikge1xuICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBzdXBwb3J0LmFycmF5QnVmZmVyXG4gICAgICApIHtcbiAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcidcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaW5pdCAmJiB0eXBlb2YgaW5pdC5oZWFkZXJzID09PSAnb2JqZWN0JyAmJiAhKGluaXQuaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMgfHwgKGcuSGVhZGVycyAmJiBpbml0LmhlYWRlcnMgaW5zdGFuY2VvZiBnLkhlYWRlcnMpKSkge1xuICAgICAgdmFyIG5hbWVzID0gW107XG4gICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhpbml0LmhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgICBuYW1lcy5wdXNoKG5vcm1hbGl6ZU5hbWUobmFtZSkpXG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIG5vcm1hbGl6ZVZhbHVlKGluaXQuaGVhZGVyc1tuYW1lXSkpXG4gICAgICB9KVxuICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgaWYgKG5hbWVzLmluZGV4T2YobmFtZSkgPT09IC0xKSB7XG4gICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSwgdmFsdWUpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcXVlc3QuaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHZhbHVlKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdC5zaWduYWwpIHtcbiAgICAgIHJlcXVlc3Quc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgYWJvcnRYaHIpXG5cbiAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gRE9ORSAoc3VjY2VzcyBvciBmYWlsdXJlKVxuICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICByZXF1ZXN0LnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGFib3J0WGhyKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgeGhyLnNlbmQodHlwZW9mIHJlcXVlc3QuX2JvZHlJbml0ID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiByZXF1ZXN0Ll9ib2R5SW5pdClcbiAgfSlcbn1cblxuZmV0Y2gucG9seWZpbGwgPSB0cnVlXG5cbmlmICghZy5mZXRjaCkge1xuICBnLmZldGNoID0gZmV0Y2hcbiAgZy5IZWFkZXJzID0gSGVhZGVyc1xuICBnLlJlcXVlc3QgPSBSZXF1ZXN0XG4gIGcuUmVzcG9uc2UgPSBSZXNwb25zZVxufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCBcIi4vYXBwLnNjc3NcIjtcbmltcG9ydCAnd2hhdHdnLWZldGNoJztcblxuLyoqXG4gKiDQmtC70LDRgdGBINCz0LDQu9C10YDQtdC4LlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaXNpb25QaG90b0dhbGxlcnkge1xuICBnYWxsZXJ5Q29udGFpbmVyID0gbnVsbDtcbiAgcm9vdEVsZW1lbnQgPSBudWxsO1xuICB0b2tlbiA9IG51bGw7XG4gIGNvbnRyb2xzID0ge1xuICAgIGRpc2FibGVBbGw6IGZhbHNlLFxuICAgIHVwZGF0ZTogdHJ1ZSxcbiAgICB1cGxvYWQ6IHRydWUsXG4gICAgcmVtb3ZlOiB0cnVlXG4gIH07XG4gIG1hc3RlckFsYnVtID0gdHJ1ZTtcblxuICAvKipcbiAgICog0JrQvtC90YHRgtGA0YPQutGC0L7RgCDRjdC60LfQtdC80L/Qu9GP0YDQsCDQutC70LDRgdGB0LAg0LPQsNC70LXRgNC10LguXG4gICAqIEBwYXJhbSByb290IHtzdHJpbmd9IElEINC60L7RgNC90LXQstC+0LPQviDRjdC70LXQvNC10L3RgtCwLCDQutGD0LTQsCDQsdGD0LTQtdGCINGA0LXQvdC00LXRgNC40YLRjNGB0Y8g0LPQsNC70LXRgNC10Y8uXG4gICAqIEBwYXJhbSBlbXBsb3llZUlkIHtudW1iZXJ8c3RyaW5nfSBJRCDRgdC+0YLRgNGD0LTQvdC40LrQsC5cbiAgICogQHBhcmFtIHZpc2lvblBlcnNvbklkIHtudW1iZXJ8c3RyaW5nfSBJRCDRgdC+0YLRgNGD0LTQvdC40LrQsCDQsNGD0YLRgdC+0YDRgdC10YDQsC5cbiAgICogQHBhcmFtIHBlcnNvbklkIHtudW1iZXJ8c3RyaW5nfSBJRCDRgdC+0YLRgNGD0LTQvdC40LrQsCDQsNGD0YLRgdC+0YDRgdC10YDQsC5cbiAgICogQHBhcmFtIHRva2VuIHtzdHJpbmd9IENTUkYt0YLQvtC60LXQvSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8uXG4gICAqIEBwYXJhbSBjb250cm9scyB7b2JqZWN0fSDQndCw0YHRgtGA0L7QudC60LAg0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDRjdC70LXQvNC10L3RgtC+0LIg0YPQv9GA0LDQstC70LXQvdC40Y8uXG4gICAqIEBwYXJhbSBjb250cm9scy5kaXNhYmxlQWxsIHtib29sZWFufSDQntGC0LrQu9GO0YfQuNGC0Ywg0LLRgdC1INGN0LvQtdC80LXQvdGC0Ysg0YPQv9GA0LDQstC70LXQvdC40Y8uXG4gICAqIEBwYXJhbSBjb250cm9scy51cGRhdGUge2Jvb2xlYW59INCe0YLQvtCx0YDQsNC20LXQvdC40LUg0LrQvdC+0L/QutC4INC+0LHQvdC+0LLQu9C10L3QuNGPINGE0L7RgtC+0LPRgNCw0YTQuNC4ICjRg9GB0YLQsNC90L7QstC60LAg0L7RgdC90L7QstC90L7QuSkuXG4gICAqIEBwYXJhbSBjb250cm9scy51cGxvYWQge2Jvb2xlYW59INCe0YLQvtCx0YDQsNC20LXQvdC40LUg0LrQvdC+0L/QutC4INC30LDQs9GA0YPQt9C60Lgg0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqIEBwYXJhbSBjb250cm9scy5yZW1vdmUge2Jvb2xlYW59INCe0YLQvtCx0YDQsNC20LXQvdC40LUg0LrQvdC+0L/QutC4INGD0LTQsNC70LXQvdC40Y8g0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqIEBwYXJhbSBtYXN0ZXJBbGJ1bSB7Ym9vbGVhbn0g0JfQsNCz0YDRg9C30LrQsCDRhNC+0YLQvtCz0YDQsNGE0LjQuSDQuNC3INC80LDRgdGC0LXRgC3QsNC70LHQvtC80LAuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgICAgICAgICAgICAgcm9vdCxcbiAgICAgICAgICAgICAgICBlbXBsb3llZUlkLFxuICAgICAgICAgICAgICAgIHZpc2lvblBlcnNvbklkLFxuICAgICAgICAgICAgICAgIHBlcnNvbklkLFxuICAgICAgICAgICAgICAgIHRva2VuLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xzLFxuICAgICAgICAgICAgICAgIG1hc3RlckFsYnVtID0gdHJ1ZVxuICAgICAgICAgICAgICB9KSB7XG4gICAgaWYgKCFyb290KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCLQndC1INGD0LrQsNC30LDQvSBJRCDQutC+0YDQvdC10LLQvtCz0L4g0Y3Qu9C10LzQtdC90YLQsCDQtNC70Y8g0LPQsNC70LXRgNC10LghXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHJvb3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocm9vdCk7XG5cbiAgICBpZiAoISFyb290RWxlbWVudCkge1xuICAgICAgdGhpcy5yb290RWxlbWVudCA9IHJvb3RFbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCLQn9GA0L7QstC10YDRjNGC0LUg0YPQutCw0LfQsNC90L3Ri9C5IElEINC60L7RgNC90LXQstC+0LPQviDRjdC70LXQvNC10L3RgtCwINC00LvRjyDQs9Cw0LvQtdGA0LXQuCFcIik7XG4gICAgfVxuXG4gICAgaWYgKCFlbXBsb3llZUlkICYmICF2aXNpb25QZXJzb25JZCAmJiAhcGVyc29uSWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcItCd0LUg0YPQutCw0LfQsNC9IElEINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQvdCwINC/0L7RgNGC0LDQu9C1IFZpc2lvblwiKTtcbiAgICB9XG5cbiAgICB0aGlzLmVtcGxveWVlID0ge1xuICAgICAgaWQ6IG51bGwsXG4gICAgICBwZXJzb25JZDogbnVsbCxcbiAgICAgIHZpc2lvblBlcnNvbklkOiBudWxsLFxuICAgIH07XG5cbiAgICB0aGlzLmVtcGxveWVlSWQgPSBlbXBsb3llZUlkO1xuICAgIHRoaXMudmlzaW9uUGVyc29uSWQgPSB2aXNpb25QZXJzb25JZDtcbiAgICB0aGlzLnBlcnNvbklkID0gcGVyc29uSWQ7XG4gICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgIHRoaXMuY29udHJvbHMgPSBjb250cm9scztcbiAgICB0aGlzLm1hc3RlckFsYnVtID0gbWFzdGVyQWxidW07XG5cbiAgICB0aGlzLmRyYXcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQndCw0LfQvdCw0YfQsNC10LzRi9C5INC80LXRgtC+0LQg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0L7RiNC40LHQvtC6LlxuICAgKiBAdHlwZSB7bnVsbHxGdW5jdGlvbn0g0KTRg9C90LrRhtC40Y8g0L7QsdGA0LDQsdC+0YLRh9C40Log0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDQvtGI0LjQsdC+0LouXG4gICAqL1xuICBlcnJvckZ1bmN0aW9uID0gbnVsbDtcbiAgc3VjY2Vzc0Z1bmN0aW9uID0gbnVsbDtcblxuICAvKipcbiAgICog0J/QvtC70YPRh9C10L3QuNC1INC80LXRgtC+0LTQsCDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDQvtGI0LjQsdC+0LouXG4gICAqIEB0eXBlIHtudWxsfEZ1bmN0aW9ufSDQpNGD0L3QutGG0LjRjyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC+0YjQuNCx0L7Qui5cbiAgICovXG4gIGdldCBlcnJvckZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmVycm9yRnVuY3Rpb247XG4gIH1cblxuICAvKipcbiAgICog0J3QsNC30L3QsNGH0LXQvdC40LUg0LzQtdGC0L7QtNCwINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC+0YjQuNCx0L7Qui5cbiAgICogQHBhcmFtIGVycm9yRnVuY3Rpb24ge251bGx8RnVuY3Rpb259INCk0YPQvdC60YbQuNGPINC+0LHRgNCw0LHQvtGC0YfQuNC6INC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0L7RiNC40LHQvtC6LlxuICAgKi9cbiAgc2V0IGVycm9yRnVuY3Rpb24oZXJyb3JGdW5jdGlvbikge1xuICAgIGlmIChlcnJvckZ1bmN0aW9uKSB7XG4gICAgICB0aGlzLmVycm9yRnVuY3Rpb24gPSBlcnJvckZ1bmN0aW9uO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDQn9C+0LvRg9GH0LXQvdC40LUg0LzQtdGC0L7QtNCwINC00LvRjyDQvtCx0YDQsNCx0L7RgtC60Lgg0YPRgdC/0LXRiNC90L7Qs9C+INC00L7QsdCw0LLQu9C10L3QuNGPL9GD0LTQsNC70LXQvdC40Y8g0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqIEB0eXBlIHtudWxsfEZ1bmN0aW9ufSDQpNGD0L3QutGG0LjRjyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRg9GB0L/QtdGI0L3QvtCz0L4g0LTQvtCx0LDQstC70LXQvdC40Y8v0YPQtNCw0LvQtdC90LjRjyDRhNC+0YLQvtCz0YDQsNGE0LjQuC5cbiAgICovXG4gIGdldCBzdWNjZXNzRnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3VjY2Vzc0Z1bmN0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqINCd0LDQt9C90LDRh9C10L3QuNC1INC80LXRgtC+0LTQsCDQtNC70Y8g0L7QsdGA0LDQsdC+0YLQutC4INGD0YHQv9C10YjQvdC+0LPQviDQtNC+0LHQsNCy0LvQtdC90LjRjy/Rg9C00LDQu9C10L3QuNGPINGE0L7RgtC+0LPRgNCw0YTQuNC4LlxuICAgKiBAcGFyYW0gc3VjY2Vzc0Z1bmN0aW9uIHtudWxsfEZ1bmN0aW9ufSDQpNGD0L3QutGG0LjRjyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQvtCx0YDQsNCx0L7RgtC60Lgg0YPRgdC/0LXRiNC90L7Qs9C+INC00L7QsdCw0LLQu9C10L3QuNGPL9GD0LTQsNC70LXQvdC40Y8g0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqL1xuICBzZXQgc3VjY2Vzc0Z1bmN0aW9uKHN1Y2Nlc3NGdW5jdGlvbikge1xuICAgIGlmIChzdWNjZXNzRnVuY3Rpb24pIHtcbiAgICAgIHRoaXMuc3VjY2Vzc0Z1bmN0aW9uID0gc3VjY2Vzc0Z1bmN0aW9uO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDQntCx0L3QvtCy0LvQtdC90LjQtSDQv9Cw0YDQsNC80LXRgtGA0L7QsiDQs9Cw0LvQtdGA0LXQuC5cbiAgICogQHBhcmFtIGVtcGxveWVlSWQge251bWJlcnxudW1iZXJ9IElEINGB0L7RgtGA0YPQtNC90LjQutCwLlxuICAgKiBAcGFyYW0gdG9rZW4ge3N0cmluZ30gQ1NSRi3RgtC+0LrQtdC9INGB0LXRgdGB0Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPLlxuICAgKi9cbiAgdXBkYXRlKHtlbXBsb3llZUlkLCB0b2tlbn0pIHtcbiAgICB0aGlzLmVtcGxveWVlSWQgPSBlbXBsb3llZUlkO1xuICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcblxuICAgIHRoaXMuZHJhdygpO1xuICB9XG5cbiAgLyoqXG4gICAqINCf0L7Qu9GD0YfQuNGC0YwgSUQg0YHQvtGC0YDRg9C00L3QuNC60LAuXG4gICAqIEByZXR1cm4ge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwLlxuICAgKi9cbiAgZ2V0IGVtcGxveWVlSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW1wbG95ZWUuaWQ7XG4gIH1cblxuICAvKipcbiAgICog0J3QsNC30L3QsNGH0LXQvdC40LUg0Y3QutC30LXQvNC/0LvRj9GA0YMg0LPQsNC70LXRgNC10LggSUQg0YHQvtGC0YDRg9C00L3QuNC60LAuXG4gICAqIEBwYXJhbSBlbXBsb3llZUlkIHtudW1iZXJ8c3RyaW5nfSBJRCDRgdC+0YLRgNGD0LTQvdC40LrQsC5cbiAgICovXG4gIHNldCBlbXBsb3llZUlkKGVtcGxveWVlSWQpIHtcbiAgICBpZiAoZW1wbG95ZWVJZCkge1xuICAgICAgdGhpcy5lbXBsb3llZS5pZCA9IGVtcGxveWVlSWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqINCf0L7Qu9GD0YfQuNGC0YwgSUQg0YHQvtGC0YDRg9C00L3QuNC60LAg0LDRg9GC0YHQvtGA0YHQtdGA0LAuXG4gICAqIEByZXR1cm4ge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKi9cbiAgZ2V0IHZpc2lvblBlcnNvbklkKCkge1xuICAgIHJldHVybiB0aGlzLmVtcGxveWVlLnZpc2lvblBlcnNvbklkO1xuICB9XG5cbiAgLyoqXG4gICAqINCd0LDQt9C90LDRh9C10L3QuNC1INGN0LrQt9C10LzQv9C70Y/RgNGDINCz0LDQu9C10YDQtdC4IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKiBAcGFyYW0gdmlzaW9uUGVyc29uSWQge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKi9cbiAgc2V0IHZpc2lvblBlcnNvbklkKHZpc2lvblBlcnNvbklkKSB7XG4gICAgaWYgKHZpc2lvblBlcnNvbklkKSB7XG4gICAgICB0aGlzLmVtcGxveWVlLnZpc2lvblBlcnNvbklkID0gdmlzaW9uUGVyc29uSWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqINCf0L7Qu9GD0YfQuNGC0YwgSUQg0YHQvtGC0YDRg9C00L3QuNC60LAg0LDRg9GC0YHQvtGA0YHQtdGA0LAuXG4gICAqIEByZXR1cm4ge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKi9cbiAgZ2V0IHBlcnNvbklkKCkge1xuICAgIHJldHVybiB0aGlzLmVtcGxveWVlLnBlcnNvbklkO1xuICB9XG5cbiAgLyoqXG4gICAqINCd0LDQt9C90LDRh9C10L3QuNC1INGN0LrQt9C10LzQv9C70Y/RgNGDINCz0LDQu9C10YDQtdC4IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKiBAcGFyYW0gcGVyc29uSWQge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKi9cbiAgc2V0IHBlcnNvbklkKHBlcnNvbklkKSB7XG4gICAgaWYgKHBlcnNvbklkKSB7XG4gICAgICB0aGlzLmVtcGxveWVlLnBlcnNvbklkID0gcGVyc29uSWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqINCa0L7RgNC90LXQstC+0Lkg0Y3Qu9C10LzQtdC90YIsINCyINC60L7RgtC+0YDRi9C5INCx0YPQtNC10YIg0YDQtdC90LTQtdGA0LjRgtGM0YHRjyDQs9Cw0LvQtdGA0LXRjy5cbiAgICogQHJldHVybiB7bnVsbHxFbGVtZW50fSDQmtC+0YDQvdC10LLQvtC5INGN0LvQtdC80LXQvdGCINC00LvRjyDRgNC10L3QtNC10YDQsC5cbiAgICovXG4gIGdldCByb290RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5yb290RWxlbWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiDQn9C+0LvRg9GH0LjRgtGMIENTUkYt0YLQvtC60LXQvSDRgdC10YHRgdC40Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPLlxuICAgKiBAcmV0dXJuIHtudWxsfHN0cmluZ30gQ1NSRi3RgtC+0LrQtdC9INGB0LXRgdGB0LjQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8uXG4gICAqL1xuICBnZXQgdG9rZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9rZW47XG4gIH1cblxuICAvKipcbiAgICog0J3QsNC30L3QsNGH0LjRgtGMIENTUkYt0YLQvtC60LXQvSDRgdC10YHRgdC40Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPLlxuICAgKiBAcGFyYW0gdG9rZW4ge3N0cmluZ30gQ1NSRi3RgtC+0LrQtdC9INGB0LXRgdGB0LjQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8uXG4gICAqL1xuICBzZXQgdG9rZW4odG9rZW4pIHtcbiAgICBpZiAodG9rZW4pIHtcbiAgICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog0J/QvtC70YPRh9C40YLRjCDQt9C90LDRh9C10L3QuNC1INGB0L7RgdGC0L7Rj9C90LjRjyDQutC+0L3RgtGA0L7Qu9C+0LIuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59INCh0L7RgdGC0L7Rj9C90LjQtSDQutC+0L3RgtGA0L7Qu9C+0LIuXG4gICAqL1xuICBnZXQgY29udHJvbHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbHM7XG4gIH1cblxuICAvKipcbiAgICog0J3QsNC30L3QsNGH0LjRgtGMINC30L3QsNGH0LXQvdC40LUg0YHQvtGB0YLQvtGP0L3QuNGPINC60L7QvdGC0YDQvtC70L7Qsi5cbiAgICogQHBhcmFtIHZhbHVlIHtib29sZWFufSDQktC60LvRjtGH0LjRgtGML9C+0YLQutC70Y7Rh9C40YLRjCDQutC+0L3RgtGA0L7Qu9GLLlxuICAgKi9cbiAgc2V0IGNvbnRyb2xzKHZhbHVlKSB7XG4gICAgdGhpcy5jb250cm9scyA9IHtcbiAgICAgIC4uLnRoaXMuY29udHJvbHMsXG4gICAgICAuLi52YWx1ZVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICog0J/QvtC70YPRh9C40YLRjCDRhNC70LDQsyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgtC+0LPRgNCw0YTQuNC5INC40Lcg0LzQsNGB0YLQtdGALdCw0LvRjNCx0L7QvNCwLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSDQodC+0YHRgtC+0Y/QvdC40LUg0YTQu9Cw0LPQsCDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgtC+0LPRgNCw0YTQuNC5INC40Lcg0LzQsNGB0YLQtdGALdCw0LvRjNCx0L7QvNCwLlxuICAgKi9cbiAgZ2V0IG1hc3RlckFsYnVtKCkge1xuICAgIHJldHVybiB0aGlzLm1hc3RlckFsYnVtO1xuICB9XG5cbiAgLyoqXG4gICAqINCd0LDQt9C90LDRh9C40YLRjCDRhNC70LDQsyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgtC+0LPRgNCw0YTQuNC5INC40Lcg0LzQsNGB0YLQtdGALdCw0LvRjNCx0L7QvNCwLlxuICAgKiBAcGFyYW0gdmFsdWUge2Jvb2xlYW59INCS0LrQu9GO0YfQuNGC0Ywv0LLRi9C60LvRjtGH0LjRgtGMINC30LDQs9GA0YPQt9C60YMg0LjQtyDQvNCw0YHRgtC10YAt0LDQu9GM0LHQvtC80LAuXG4gICAqL1xuICBzZXQgbWFzdGVyQWxidW0odmFsdWUpIHtcbiAgICB0aGlzLm1hc3RlckFsYnVtID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICog0J7QsdGA0LDQsdC+0YLRh9C40Log0L7RiNC40LHQvtC6LlxuICAgKiBAcGFyYW0gcGFyYW1zLm1lc3NhZ2Uge3N0cmluZ30g0KHQvtC+0LHRidC10L3QuNC1INC+0LEg0L7RiNC40LHQutC1LlxuICAgKiBAcGFyYW0gcGFyYW1zLmJsb2NraW5nRXJyb3JNZXNzYWdlIHtzdHJpbmd9INCR0LvQvtC60LjRgNGD0Y7RidC10LUg0L/QvtGC0L7QuiDRgdC+0L7QsdGJ0LXQvdC40LUg0L7QsSDQvtGI0LjQsdC60LUuXG4gICAqL1xuICBoYW5kbGVFcnJvcihwYXJhbXMpIHtcbiAgICBjb25zdCB7bWVzc2FnZT17fSwgYmxvY2tpbmdFcnJvck1lc3NhZ2V9ID0gcGFyYW1zO1xuXG4gICAgaWYgKHRoaXMuZXJyb3JGdW5jdGlvbikge1xuICAgICAgbGV0IG1lc3NhZ2VTdHJpbmcgPSBcIlwiO1xuXG4gICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgIGlmKG1lc3NhZ2UuZGV0YWlsPy5lcnJvck1lc3NhZ2Upe1xuICAgICAgICAgICBtZXNzYWdlU3RyaW5nID0gbWVzc2FnZS5kZXRhaWw/LmVycm9yTWVzc2FnZTtcbiAgICAgICAgIH0gZWxzZSAgaWYgKG1lc3NhZ2UuZmF1bHRzdHJpbmcpIHtcbiAgICAgICAgICBtZXNzYWdlU3RyaW5nID0gbWVzc2FnZS5mYXVsdHN0cmluZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBPYmplY3Qua2V5cyhtZXNzYWdlKVxuICAgICAgICAgICAgLnJldmVyc2UoKVxuICAgICAgICAgICAgLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgbWVzc2FnZVN0cmluZyArPSBgJHttZXNzYWdlW2tleV19PGJyLz5gO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gbWVzc2FnZVN0cmluZy5sZW5ndGhcbiAgICAgICAgPyBtZXNzYWdlU3RyaW5nXG4gICAgICAgIDogSlNPTi5zdHJpbmdpZnkobWVzc2FnZSk7XG5cbiAgICAgIHRoaXMuZXJyb3JGdW5jdGlvbihlcnJvck1lc3NhZ2UsIFwi0J7RiNC40LHQutCwXCIpO1xuICAgIH0gZWxzZSBpZiAoYmxvY2tpbmdFcnJvck1lc3NhZ2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihibG9ja2luZ0Vycm9yTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRg9GB0L/QtdGI0L3QvtCz0L4g0LTQvtCx0LDQstC70LXQvdC40Y8v0YPQtNCw0LvQtdC90LjRjyDRhNC+0YLQvtCz0YDQsNGE0LjQuC5cbiAgIC8vICogQHBhcmFtIHBhcmFtcy5hY3Rpb24ge3N0cmluZ30g0L3QsNC30LLQsNC90LjQtSDRgdC+0LHRi9GC0LjRj1xuICAgKi9cbiAgaGFuZGxlU3VjY2VzcyhwYXJhbXMpIHtcbiAgICBpZih0aGlzLnN1Y2Nlc3NGdW5jdGlvbikge1xuICAgICAgdGhpcy5zdWNjZXNzRnVuY3Rpb24ocGFyYW1zKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog0J7QsdGR0YDRgtC60LAg0LTQu9GPINC30LDQv9GA0L7RgdC+0LIg0LogQVBJLlxuICAgKiBAcGFyYW0gcmVxdWVzdFBhdGgge3N0cmluZ30g0J3QsNC30LLQsNC90LjQtSDQvNC10YLQvtC00LAgQVBJLlxuICAgKiBAcGFyYW0gcmVxdWVzdEJvZHkge29iamVjdH0g0J/QsNGA0LDQvNC10YLRgNGLINC30LDQv9GA0L7RgdCwLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59INCf0YDQvtC80LjRgSDQt9Cw0L/RgNC+0YHQsC5cbiAgICovXG4gIHJlcXVlc3Qoe3JlcXVlc3RQYXRoLCByZXF1ZXN0Qm9keX0pIHtcbiAgICBjb25zdCByZXF1ZXN0RGVmYXVsdHMgPSB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgbW9kZTogXCJzYW1lLW9yaWdpblwiLFxuICAgICAgY3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIFwiWC1DU1JGVG9rZW5cIjogdGhpcy50b2tlblxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxuICAgIH07XG5cbiAgICByZXR1cm4gZmV0Y2goYC9hcGkvdjIvdmlzaW9uLyR7cmVxdWVzdFBhdGh9L2AsIHJlcXVlc3REZWZhdWx0cyk7XG4gIH1cblxuICAvKipcbiAgICog0JLRi9Cz0YDRg9C30LrQsCDQstGB0LXRhSDRhNC+0YLQvtCz0YDQsNGE0LjQuSDRgSDQv9C+0YDRgtCw0LvQsCBWaXNpb24uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn0g0J/RgNC+0LzQuNGBINGBINGA0LXQt9GD0LvRjNGC0LDRgtC+0Lwg0LLRi9C/0L7Qu9C90LXQvdC40Y8g0LfQsNC/0YDQvtGB0LAuXG4gICAqL1xuICBnZXRQaG90b3MoKSB7XG4gICAgY29uc3QgZW1wbG95ZWUgPSB7fTtcblxuICAgIGlmICh0aGlzLmVtcGxveWVlSWQgJiYgIXRoaXMudmlzaW9uUGVyc29uSWQpIHtcbiAgICAgIGVtcGxveWVlLmVtcGxveWVlSWQgPSB0aGlzLmVtcGxveWVlSWQ7XG4gICAgfSBlbHNlIGlmICh0aGlzLnZpc2lvblBlcnNvbklkKSB7XG4gICAgICBlbXBsb3llZS52aXNpb25fcGVyc29uX2lkID0gdGhpcy52aXNpb25QZXJzb25JZDtcbiAgICB9IGVsc2UgaWYgKHRoaXMucGVyc29uSWQpIHtcbiAgICAgIGVtcGxveWVlLnBlcnNvbklkID0gdGhpcy5wZXJzb25JZDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgIHJlcXVlc3RQYXRoOiBcImdldF9waG90b3NcIixcbiAgICAgIHJlcXVlc3RCb2R5OiB7XG4gICAgICAgIC4uLmVtcGxveWVlLFxuICAgICAgICBtYXN0ZXJBbGJ1bTogdGhpcy5tYXN0ZXJBbGJ1bVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqINCX0LDQv9GA0L7RgSDQvdCwINC00L7QsdCw0LLQu9C10L3QuNC1ICjQt9Cw0LPRgNGD0LfQutGDKSDRhNC+0YLQvtCz0YDQsNGE0LjQuC5cbiAgICogQHBhcmFtIGltYWdlIHtCdWZmZXJFbmNvZGluZ30g0KTQvtGC0L7Qs9GA0LDRhNC40Lgg0LIg0YTQvtGA0LzQsNGC0LUgQmFzZTY0LlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59INCf0YDQvtC80LjRgSDRgSDRgNC10LfRg9C70YzRgtCw0YLQvtC8INCy0YvQv9C+0LvQvdC10L3QuNGPINC30LDQv9GA0L7RgdCwLlxuICAgKi9cbiAgYWRkUGhvdG8oaW1hZ2UpIHtcbiAgICB0aGlzLnRvZ2dsZU92ZXJsYXlNZXNzYWdlKCfQl9Cw0LPRgNGD0LfQutCwLi4uJyk7XG5cbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgIHJlcXVlc3RQYXRoOiBcImFkZF9waG90b1wiLFxuICAgICAgcmVxdWVzdEJvZHk6IHtcbiAgICAgICAgZW1wbG95ZWVJZDogdGhpcy5lbXBsb3llZUlkLFxuICAgICAgICBpbWFnZVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqINCX0LDQv9GA0L7RgSDQvdCwINGD0LTQsNC70LXQvdC40LUg0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqIEBwYXJhbSBwaG90b0lkIHtOdW1iZXJ9IElEINGE0L7RgtC+0LPRgNCw0YTQuNC4INC90LAg0L/QvtGA0YLQsNC70LUgVmlzaW9uLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59INCf0YDQvtC80LjRgSDRgSDRgNC10LfRg9C70YzRgtCw0YLQvtC8INCy0YvQv9C+0LvQvdC10L3QuNGPINC30LDQv9GA0L7RgdCwLlxuICAgKi9cbiAgZGVsZXRlUGhvdG8ocGhvdG9JZCkge1xuICAgIHRoaXMudG9nZ2xlT3ZlcmxheU1lc3NhZ2UoJ9Cj0LTQsNC70LXQvdC40LUg0YTQvtGC0L7Qs9GA0LDRhNC40LguLi4nKTtcblxuICAgIGNvbnN0IGVtcGxveWVlSWQgPSB0aGlzLmVtcGxveWVlSWQ7XG5cbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgIHJlcXVlc3RQYXRoOiBcImRlbGV0ZV9waG90b1wiLFxuICAgICAgcmVxdWVzdEJvZHk6IHtcbiAgICAgICAgZW1wbG95ZWVfaWQ6IGVtcGxveWVlSWQsXG4gICAgICAgIHBob3RvX2lkOiBwaG90b0lkXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog0JfQsNC/0YDQvtGBINC90LAg0L7QsdC90L7QstC70LXQvdC40LUg0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqIEBwYXJhbSBwaG90b0lkIHtOdW1iZXJ9IElEINGE0L7RgtC+0LPRgNCw0YTQuNC4INC90LAg0L/QvtGA0YLQsNC70LUgVmlzaW9uLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59INCf0YDQvtC80LjRgSDRgSDRgNC10LfRg9C70YzRgtCw0YLQvtC8INCy0YvQv9C+0LvQvdC10L3QuNGPINC30LDQv9GA0L7RgdCwLlxuICAgKi9cbiAgdXBkYXRlUGhvdG8ocGhvdG9JZCkge1xuICAgIHRoaXMudG9nZ2xlT3ZlcmxheU1lc3NhZ2UoJ9Ce0LHQvdC+0LLQu9C10L3QuNC1INGE0L7RgtC+0LPRgNCw0YTQuNC4Li4uJyk7XG5cbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgIHJlcXVlc3RQYXRoOiBcInVwZGF0ZV9waG90b1wiLFxuICAgICAgcmVxdWVzdEJvZHk6IHtcbiAgICAgICAgZW1wbG95ZWVJZDogdGhpcy5lbXBsb3llZUlkLFxuICAgICAgICBwaG90b19pZDogcGhvdG9JZFxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqINCX0LDQv9GA0L7RgSDQvdCwINGD0YHRgtCw0L3QvtCy0LrRgyDRhNC+0YLQvtCz0YDQsNGE0LjQuCDQutCw0Log0L7RgdC90L7QstC90L7QuSDQtNC70Y8g0YHQvtGC0YDRg9C00L3QuNC60LAuXG4gICAqIEBwYXJhbSBwaG90b0lkIHtOdW1iZXJ9IElEINGE0L7RgtC+0LPRgNCw0YTQuNC4INC90LAg0L/QvtGA0YLQsNC70LUgVmlzaW9uLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59INCf0YDQvtC80LjRgSDRgSDRgNC10LfRg9C70YzRgtCw0YLQvtC8INCy0YvQv9C+0LvQvdC10L3QuNGPINC30LDQv9GA0L7RgdCwLlxuICAgKi9cbiAgc2V0QXNNYWluUGhvdG8ocGhvdG9JZCkge1xuICAgIHRoaXMudG9nZ2xlT3ZlcmxheU1lc3NhZ2UoJ9Ce0LHQvdC+0LLQu9C10L3QuNC1INC+0YHQvdC+0LLQvdC+0Lkg0YTQvtGC0L7Qs9GA0LDRhNC40LguLi4nKTtcblxuICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgcmVxdWVzdFBhdGg6IFwic2V0X21haW5fcGhvdG9cIixcbiAgICAgIHJlcXVlc3RCb2R5OiB7XG4gICAgICAgIGVtcGxveWVlSWQ6IHRoaXMuZW1wbG95ZWVJZCxcbiAgICAgICAgcGhvdG9JZDogcGhvdG9JZFxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqINCf0LXRgNC10LrQu9GO0YfQsNGC0LXQu9GMINCx0LvQvtC60LjRgNGD0Y7RidC10LPQviDRgdC+0L7QsdGJ0LXQvdC40Y8uXG4gICAqIEBwYXJhbSBtZXNzYWdlIHtzdHJpbmd8dW5kZWZpbmVkfG51bGx9INCh0L7QvtCx0YnQtdC90LjQtS5cbiAgICovXG4gIHRvZ2dsZU92ZXJsYXlNZXNzYWdlKG1lc3NhZ2UgPSBudWxsKSB7XG4gICAgY29uc3Qge2dhbGxlcnlDb250YWluZXJ9ID0gdGhpcztcblxuICAgIGlmICghZ2FsbGVyeUNvbnRhaW5lcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfQndC1INC90LDQudC00LXQvdCwINC60L7RgNC90LXQstC+0Lkg0Y3Qu9C10LzQtdC90YIg0LPQsNC70LXRgNC10LgnKTtcbiAgICB9XG5cbiAgICBpZiAobWVzc2FnZSkge1xuICAgICAgZ2FsbGVyeUNvbnRhaW5lci5kYXRhc2V0Lm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgZ2FsbGVyeUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd2aXNpb24tcGhvdG8tZ2FsbGVyeS0tbWVzc2FnZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnYWxsZXJ5Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2lvbi1waG90by1nYWxsZXJ5LS1tZXNzYWdlJyk7XG4gICAgICBnYWxsZXJ5Q29udGFpbmVyLmRhdGFzZXQubWVzc2FnZSA9ICcnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDQntGC0YDQuNGB0L7QstC60LAgRE9NINCz0LDQu9C10YDQtdC40LguXG4gICAqL1xuICBkcmF3KHBhcmFtcyA9IHt9KSB7XG4gICAgY29uc3Qgcm9vdEVsZW1lbnQgPSB0aGlzLnJvb3RFbGVtZW50O1xuXG4gICAgcm9vdEVsZW1lbnQuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cInZpc2lvbi1waG90by1nYWxsZXJ5XCI+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwiZmlsZVwiIGNsYXNzPVwidmlzaW9uLXBob3RvLWdhbGxlcnlfX2ZpbGUtZmllbGRcIiB0YWJpbmRleD1cIi0xXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2aXNpb24tcGhvdG8tZ2FsbGVyeV9faXRlbSB2aXNpb24tcGhvdG8tZ2FsbGVyeV9faXRlbS0tbWFpblwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2Zy1tYWluLXBob3RvXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidmlzaW9uLXBob3RvLWdhbGxlcnlfX2l0ZW1cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidmctZ2FsbGVyeVwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICBjb25zdCBnYWxsZXJ5Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi52aXNpb24tcGhvdG8tZ2FsbGVyeVwiKTtcblxuICAgIHRoaXMuZ2FsbGVyeUNvbnRhaW5lciA9IGdhbGxlcnlDb250YWluZXI7XG4gICAgdGhpcy50b2dnbGVPdmVybGF5TWVzc2FnZSgn0JfQsNCz0YDRg9C30LrQsC4uLicpO1xuXG4gICAgY29uc3QgbWFpblBob3RvQ29udGFpbmVyID0gcm9vdEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi52Zy1tYWluLXBob3RvXCIpO1xuICAgIGNvbnN0IGdhbGxlcnkgPSByb290RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnZnLWdhbGxlcnlcIik7XG4gICAgY29uc3Qge3VwbG9hZH0gPSB0aGlzLmNvbnRyb2xzO1xuXG4gICAgdGhpcy5nZXRQaG90b3MoKVxuICAgICAgLnRoZW4oXG4gICAgICAgIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICBtYWluUGhvdG9Db250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5jcmVhdGVQaG90b0VsZW1lbnQoe1xuICAgICAgICAgICAgbWFpbjogdHJ1ZSxcbiAgICAgICAgICAgIGVtcHR5OiB0cnVlLFxuICAgICAgICAgICAgcGhvdG9JZDogbnVsbFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKHVwbG9hZCkge1xuICAgICAgICAgICAgZ2FsbGVyeS5pbm5lckhUTUwgPSB0aGlzLmNyZWF0ZVBob3RvRWxlbWVudCh7XG4gICAgICAgICAgICAgIG1haW46IGZhbHNlLFxuICAgICAgICAgICAgICBlbXB0eTogdHJ1ZSxcbiAgICAgICAgICAgICAgcGhvdG9JZDogbnVsbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtYWluUGhvdG9Db250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5jcmVhdGVOb1Bob3RvRWxlbWVudCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuaW5pdEV2ZW50cygpO1xuICAgICAgICAgIHRoaXMudG9nZ2xlT3ZlcmxheU1lc3NhZ2UoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgIHRoaXMudG9nZ2xlT3ZlcmxheU1lc3NhZ2UoKTtcbiAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5pbml0RXZlbnRzKCk7XG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgIC50aGVuKFxuICAgICAgICByZXNwb25zZUpzb24gPT4ge1xuICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NQYXJhbXMgPSB7XG4gICAgICAgICAgICBhY3Rpb246IHBhcmFtcy5hY3Rpb24sXG4gICAgICAgICAgICBwaG90b3M6IHJlc3BvbnNlSnNvbixcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgaWYgKCFyZXNwb25zZUpzb24gfHwgIXJlc3BvbnNlSnNvbi5sZW5ndGgpIHtcbiAgICAgICAgICAgIG1haW5QaG90b0NvbnRhaW5lci5pbm5lckhUTUwgPSB0aGlzLmNyZWF0ZU5vUGhvdG9FbGVtZW50KCk7XG4gICAgICAgICAgICBnYWxsZXJ5LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlT3ZlcmxheU1lc3NhZ2UoKTtcblxuICAgICAgICAgICAgaWYgKHBhcmFtcy5hY3Rpb24gPT09ICdwaG90b1JlbW92ZU1haW4nKSB7XG4gICAgICAgICAgICAgIHRoaXMuaGFuZGxlU3VjY2VzcyhzdWNjZXNzUGFyYW1zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IG1haW5QaG90b0RhdGEgPSByZXNwb25zZUpzb24uZmluZCgoe21haW59KSA9PiBtYWluKTtcbiAgICAgICAgICBjb25zdCBnYWxsZXJ5UGhvdG9zRGF0YSA9IHJlc3BvbnNlSnNvbi5maWx0ZXIoKHttYWlufSkgPT4gIW1haW4pO1xuXG4gICAgICAgICAgaWYgKCEhbWFpblBob3RvRGF0YSkge1xuICAgICAgICAgICAgbWFpblBob3RvQ29udGFpbmVyLmlubmVySFRNTCA9IHRoaXMuY3JlYXRlUGhvdG9FbGVtZW50KFxuICAgICAgICAgICAgICBtYWluUGhvdG9EYXRhXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtYWluUGhvdG9Db250YWluZXIucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChnYWxsZXJ5UGhvdG9zRGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCBnYWxsZXJ5UGhvdG9zSHRtbCA9IFwiXCI7XG5cbiAgICAgICAgICAgIGdhbGxlcnlQaG90b3NEYXRhLmZvckVhY2goXG4gICAgICAgICAgICAgIHBob3RvRGF0YSA9PlxuICAgICAgICAgICAgICAgIChnYWxsZXJ5UGhvdG9zSHRtbCArPSB0aGlzLmNyZWF0ZVBob3RvRWxlbWVudChwaG90b0RhdGEpKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKHVwbG9hZCkge1xuICAgICAgICAgICAgICBnYWxsZXJ5UGhvdG9zSHRtbCArPSB0aGlzLmNyZWF0ZVBob3RvRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgbWFpbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgZW1wdHk6IHRydWUsXG4gICAgICAgICAgICAgICAgcGhvdG9JZDogbnVsbFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZ2FsbGVyeS5pbm5lckhUTUwgPSBnYWxsZXJ5UGhvdG9zSHRtbDtcbiAgICAgICAgICB9IGVsc2UgaWYgKCF1cGxvYWQpIHtcbiAgICAgICAgICAgIGdhbGxlcnkucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuaW5pdEV2ZW50cygpO1xuICAgICAgICAgIHRoaXMudG9nZ2xlT3ZlcmxheU1lc3NhZ2UoKTtcbiAgICAgICAgICB0aGlzLmhhbmRsZVN1Y2Nlc3Moc3VjY2Vzc1BhcmFtcyk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yID0+IHtcbiAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy50b2dnbGVPdmVybGF5TWVzc2FnZSgpO1xuICAgICAgICAgIHRoaXMuaW5pdEV2ZW50cygpO1xuICAgICAgICB9XG4gICAgICApXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICB0aGlzLnRvZ2dsZU92ZXJsYXlNZXNzYWdlKCk7XG4gICAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRFdmVudHMoKTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5pbml0RXZlbnRzKCk7XG4gIH1cblxuICAvKipcbiAgICog0KPQvdC40LLQtdGA0YHQsNC70YzQvdGL0Lkg0LzQtdGC0L7QtCDQtNC70Y8g0YHQvtC30LTQsNC90LjRjyDRjdC70LXQvNC10L3RgtCwINGE0L7RgtC+0LPRgNCw0YTQuNC4LlxuICAgKiBAcGFyYW0gcGFyYW1zLnBob3RvSWQge251bWJlcn0gSUQg0YTQvtGC0L7Qs9GA0LDRhNC40Lgg0L3QsCDQv9C+0YDRgtCw0LvQtSBWaXNpb24uXG4gICAqIEBwYXJhbSBwYXJhbXMubWFpbiB7Ym9vbGVhbn0gINCk0LvQsNCzINC+0YHQvdC+0LLQvdC+0LPQviDRhNC+0YLQvi5cbiAgICogQHBhcmFtIHBhcmFtcy5lbXB0eSB7Ym9vbGVhbn0g0KTQu9Cw0LMgXCLQv9GD0YHRgtC+0LPQvlwiINGE0L7RgtC+LCDQuNGB0L/QvtC70YzQt9GD0LXRgtGB0Y8g0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0LrQvdC+0L/QutC4INC30LDQs9GA0YPQt9C60LguXG4gICAqIEBwYXJhbSBwYXJhbXMucGF0aCB7c3RyaW5nfSDQn9GD0YLRjCDQuiDRhNC+0YLQvtCz0YDQsNGE0LjQuC5cbiAgICogQHBhcmFtIHBhcmFtcy5hdmF0YXJVcmwge3N0cmluZ30g0J/Rg9GC0Ywg0Log0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9INCt0LvQtdC80LXQvdGCINGE0L7RgtC+0LPRgNCw0YTQuNC4INCyINCy0LjQtNC1INGB0YLRgNC+0LrQuC5cbiAgICovXG4gIGNyZWF0ZVBob3RvRWxlbWVudChwYXJhbXMpIHtcbiAgICBjb25zdCB7cGhvdG9JZCwgbWFpbiwgZW1wdHksIHBhdGgsIGF2YXRhclVybH0gPSBwYXJhbXM7XG4gICAgY29uc3Qge2Rpc2FibGVBbGwsIHVwbG9hZCwgdXBkYXRlLCByZW1vdmUgPSAhZW1wdHl9ID0gdGhpcy5jb250cm9scztcbiAgICBsZXQgYnV0dG9ucyA9IFwiXCI7XG4gICAgbGV0IGVsZW1lbnRDbGFzc2VzID0gXCJcIjtcbiAgICBsZXQgYmFja2dyb3VuZEltYWdlID0gXCJcIjtcbiAgICBsZXQgbWFpbkF0dHJpYnV0ZSA9IFwiXCI7XG5cbiAgICBpZiAoIWF2YXRhclVybCAmJiBwYXRoKSB7XG4gICAgICBiYWNrZ3JvdW5kSW1hZ2UgPSBgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHtwYXRofSlcImA7XG4gICAgfVxuXG4gICAgaWYgKGF2YXRhclVybCkge1xuICAgICAgYmFja2dyb3VuZEltYWdlID0gYHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCR7YXZhdGFyVXJsfSlcImA7XG4gICAgfVxuXG4gICAgaWYgKG1haW4pIHtcbiAgICAgIG1haW5BdHRyaWJ1dGUgPSBgZGF0YS1tYWluPVwiJHttYWlufVwiYDtcblxuICAgICAgaWYgKGVtcHR5KSB7XG4gICAgICAgIGVsZW1lbnRDbGFzc2VzID0gXCJ2Zy1waG90byB2Zy1waG90by0tbWFpblwiO1xuICAgICAgICBidXR0b25zID0gdGhpcy5nZXRQaG90b0J1dHRvbnMoe1xuICAgICAgICAgIHVwbG9hZFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnRDbGFzc2VzID0gXCJ2Zy1waG90byB2Zy1waG90by0tbWFpblwiO1xuICAgICAgICBidXR0b25zID0gdGhpcy5nZXRQaG90b0J1dHRvbnMoe1xuICAgICAgICAgIHJlbW92ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGVtcHR5KSB7XG4gICAgICAgIGVsZW1lbnRDbGFzc2VzID0gXCJ2Zy1nYWxsZXJ5X19pdGVtIHZnLXBob3RvIHZnLXBob3RvLS11cGxvYWRcIjtcbiAgICAgICAgYnV0dG9ucyA9IHRoaXMuZ2V0UGhvdG9CdXR0b25zKHtcbiAgICAgICAgICB1cGxvYWRJY29uOiB1cGxvYWRcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50Q2xhc3NlcyA9IFwidmctZ2FsbGVyeV9faXRlbSB2Zy1waG90b1wiO1xuICAgICAgICBidXR0b25zID0gdGhpcy5nZXRQaG90b0J1dHRvbnMoe1xuICAgICAgICAgIHVwZGF0ZSxcbiAgICAgICAgICByZW1vdmVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGBcbiAgICAgIDxkaXYgY2xhc3M9XCIke2VsZW1lbnRDbGFzc2VzfVwiXG4gICAgICAgICR7YmFja2dyb3VuZEltYWdlfVxuICAgICAgICBkYXRhLXBob3RvLWlkPVwiJHtwaG90b0lkfVwiXG4gICAgICAgICR7bWFpbkF0dHJpYnV0ZX0+XG4gICAgICAgICR7ZGlzYWJsZUFsbCA/IFwiXCIgOiBidXR0b25zfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gIH1cblxuICAvKipcbiAgICog0KjQsNCx0LvQvtC9INGN0LvQtdC80LXQvdGC0LAg0LPQsNC70LXRgNC10Lgg0LHQtdC3INGE0L7RgtC+0LPRgNCw0YTQuNC4XG4gICAqIEByZXR1cm4ge3N0cmluZ30gSFRNTCBET00gU3RyaW5nXG4gICAqL1xuICBjcmVhdGVOb1Bob3RvRWxlbWVudCgpIHtcbiAgICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz1cInZnLXBob3RvIHZnLXBob3RvLS1tYWluXCI+XG4gICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCItMjU2IC0yNTYgMTAyNCAxMDI0XCI+XG4gICAgICAgICAgPHBhdGggZmlsbD1cIiM0YTUyNjZcIlxuICAgICAgICAgICAgZD1cIk00MzcgMzEwLjhjLTI4LjQtMjguNC02Mi4yLTQ5LjItOTkuMS02MS43IDM0LjEtMjUuMiA1Ni4yLTY1LjYgNTYuMi0xMTEuMUMzOTQuMSA2MS45IDMzMi4xIDAgMjU2IDBTMTE3LjkgNjEuOSAxMTcuOSAxMzguMWMwIDQ1LjUgMjIuMSA4NS45IDU2LjIgMTExLjEgLTM2LjkgMTIuNC03MC44IDMzLjMtOTkuMSA2MS43QzI2LjYgMzU5LjIgMCA0MjMuNSAwIDQ5MS44IDAgNTAzIDkgNTEyIDIwLjIgNTEyaDQ3MS43YzExLjEgMCAyMC4yLTkgMjAuMi0yMC4yQzUxMiA0MjMuNSA0ODUuNCAzNTkuMiA0MzcgMzEwLjh6TTE1OC4yIDEzOC4xYzAtNTMuOSA0My45LTk3LjggOTcuOC05Ny44IDUzLjkgMCA5Ny44IDQzLjkgOTcuOCA5Ny44IDAgNTMuOS00My45IDk3LjgtOTcuOCA5Ny44QzIwMi4xIDIzNS44IDE1OC4yIDE5MiAxNTguMiAxMzguMXpNNDEuMiA0NzEuN0M1MS40IDM2Mi4yIDE0My45IDI3Ni4yIDI1NiAyNzYuMnMyMDQuNiA4NiAyMTQuOCAxOTUuNUg0MS4yelwiLz5cbiAgICAgICAgPC9zdmc+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgLyoqXG4gICAqINCf0L7Qu9GD0YfQuNGC0Ywg0LrQvdC+0L/QutGDINC/0L4g0L/QtdGA0LXQtNCw0LLQsNC10LzRi9C8INC/0LDRgNCw0LzQtdGC0YDQsNC8LlxuICAgKiBAcGFyYW0gcGFyYW1zLmRpc2FibGVBbGwge2Jvb2xlYW59INCe0YLQutC70Y7Rh9C40YLRjCDQstGB0LUg0LrQvdC+0L/QutC4LlxuICAgKiBAcGFyYW0gcGFyYW1zLnJlbW92ZSB7Ym9vbGVhbn0g0JrQvdC+0L/QutCwINGD0LTQsNC70LXQvdC40Y8uXG4gICAqIEBwYXJhbSBwYXJhbXMudXBsb2FkIHtib29sZWFufSDQmtC90L7Qv9C60LAg0LfQsNCz0YDRg9C30LrQuC5cbiAgICogQHBhcmFtIHBhcmFtcy51cGxvYWRJY29uIHtib29sZWFufSDQmtC90L7Qv9C60LAg0LfQsNCz0YDRg9C30LrQuCDQsiDQstC40LTQtSDQuNC60L7QvdC60LguXG4gICAqIEBwYXJhbSBwYXJhbXMuc2VsZWN0IHtib29sZWFufSDQmtC90L7Qv9C60LAg0LLRi9Cx0L7RgNCwINGE0L7RgtC+0LPRgNCw0YTQuNC4LlxuICAgKi9cbiAgZ2V0UGhvdG9CdXR0b25zKHBhcmFtcykge1xuICAgIGlmIChwYXJhbXMuZGlzYWJsZUFsbCkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuXG4gICAgY29uc3QgYnV0dG9ucyA9IHtcbiAgICAgIHJlbW92ZTogYDxidXR0b24gY2xhc3M9XCJ2Zy1waG90b19fYnV0dG9uIHZnLWJ1dHRvbiB2Zy1idXR0b24tLXJlZFwiIGRhdGEtYWN0aW9uPVwicmVtb3ZlLXBob3RvXCI+0KPQtNCw0LvQuNGC0Yw8L2J1dHRvbj5gLFxuICAgICAgdXBsb2FkOiBgPGJ1dHRvbiBjbGFzcz1cInZnLXBob3RvX19idXR0b24gdmctYnV0dG9uXCIgZGF0YS1hY3Rpb249XCJ1cGxvYWQtcGhvdG9cIj7Ql9Cw0LPRgNGD0LfQuNGC0Yw8L2J1dHRvbj5gLFxuICAgICAgdXBsb2FkSWNvbjogYDxidXR0b24gY2xhc3M9XCJ2Zy1waG90b19fYnV0dG9uIHZnLWJ1dHRvbiB2Zy1idXR0b24tLXVwbG9hZFwiIGRhdGEtYWN0aW9uPVwidXBsb2FkLXBob3RvXCI+JiM0Mzs8L2J1dHRvbj5gLFxuICAgICAgdXBkYXRlOiBgPGJ1dHRvbiBjbGFzcz1cInZnLXBob3RvX19idXR0b24gdmctYnV0dG9uIHZnLWJ1dHRvbi0tZ3JlZW5cIiBkYXRhLWFjdGlvbj1cInVwZGF0ZS1waG90b1wiPtCS0YvQsdGA0LDRgtGMPC9idXR0b24+YFxuICAgIH07XG5cbiAgICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5yZWR1Y2UoKGJ1dHRvbnNTdHJpbmcsIGtleSkgPT4ge1xuICAgICAgaWYgKHBhcmFtc1trZXldKSB7XG4gICAgICAgIGJ1dHRvbnNTdHJpbmcgKz0gYnV0dG9uc1trZXldO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnV0dG9uc1N0cmluZztcbiAgICB9LCBcIlwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDRgdC+0LHRi9GC0LjQuSDQtNC70Y8g0LrQvdC+0L/QvtC6INCz0LDQu9C10YDQtdC4LlxuICAgKi9cbiAgaW5pdEV2ZW50cygpIHtcbiAgICBjb25zdCB7cm9vdEVsZW1lbnR9ID0gdGhpcztcbiAgICBjb25zdCBidXR0b25zID0gcm9vdEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcImJ1dHRvblwiKTtcblxuICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgdGhpcy5yb3V0ZXJbYnV0dG9uLmRhdGFzZXQuYWN0aW9uXSxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog0KDQvtGD0YLQtdGALlxuICAgKiBAdHlwZSB7e1wicmVtb3ZlLXBob3RvXCI6IGZ1bmN0aW9uKCopOiB2b2lkLCBcImZpbGUtaW5wdXQtY2hhbmdlZFwiOiBmdW5jdGlvbigqKTogdm9pZCwgXCJ1cGxvYWQtcGhvdG9cIjogZnVuY3Rpb24oKik6IHZvaWQsIFwidXBkYXRlLXBob3RvXCI6IGZ1bmN0aW9uKCopOiB2b2lkfX1cbiAgICovXG4gIHJvdXRlciA9IHtcbiAgICAvKipcbiAgICAgKiDQl9Cw0LPRgNGD0LfQutCwINGE0L7RgtC+0LPRgNCw0YTQuNC4INGB0L7RgtGA0YPQtNC90LjQutCwLlxuICAgICAqIEBwYXJhbSBldmVudCB7RXZlbnR9INCh0L7QsdGL0YLQuNC1LlxuICAgICAqL1xuICAgIFwidXBsb2FkLXBob3RvXCI6IGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IGZpbGVJbnB1dCA9IHRoaXMucm9vdEVsZW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImZpbGVcIl0nKTtcblxuICAgICAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcy5yb3V0ZXJbXCJmaWxlLWlucHV0LWNoYW5nZWRcIl0pO1xuICAgICAgZmlsZUlucHV0LmNsaWNrKCk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDQodC70YPRiNCw0YLQtdC70Ywg0YHQvtCx0YvRgtC40Y8g0LjQt9C80LXQvdC10L3QuNGPINGE0LDQudC70L7QstC+0LPQviDQv9C+0LvRjyDQstCy0L7QtNCwLlxuICAgICAqIEBwYXJhbSBldmVudCB7ZXZlbnR9INCh0L7QsdGL0YLQuNC1LlxuICAgICAqL1xuICAgIFwiZmlsZS1pbnB1dC1jaGFuZ2VkXCI6IGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IGZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07XG4gICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXG4gICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcblxuICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5hZGRQaG90byhyZWFkZXIucmVzdWx0KVxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgIHRoaXMuZHJhdyh7YWN0aW9uOiAndXBsb2FkUGhvdG8nfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKFxuICAgICAgICAgIGVycm9yID0+IHtcbiAgICAgICAgICAgIGlmKCFlcnJvcikge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgICAgICAuZmluYWxseSggKCkgPT4gdGhpcy50b2dnbGVPdmVybGF5TWVzc2FnZSgpKTtcbiAgICAgIH07XG5cbiAgICAgIHJlYWRlci5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHtcbiAgICAgICAgICBtZXNzYWdlOiByZWFkZXIuZXJyb3IsXG4gICAgICAgICAgYmxvY2tpbmdFcnJvck1lc3NhZ2U6IGDQntGI0LjQsdC60LAg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YLQvtCz0YDQsNGE0LjQuCAoLdC40LkpOiAke3JlYWRlci5lcnJvcn1gXG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqINCX0LDQv9GA0L7RgSDQvdCwINGD0LTQsNC70LXQvdC40LUg0YTQvtGC0L7Qs9GA0LDRhNC40Lgg0YHQvtGC0YDRg9C00L3QuNC60LAuXG4gICAgICogQHBhcmFtIGV2ZW50IHtFdmVudH0g0KHQvtCx0YvRgtC40LUuXG4gICAgICovXG4gICAgXCJyZW1vdmUtcGhvdG9cIjogZXZlbnQgPT4ge1xuICAgICAgY29uc3QgcGhvdG9FbGVtZW50ID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIudmctcGhvdG9cIik7XG4gICAgICBjb25zdCB7cGhvdG9JZH0gPSBwaG90b0VsZW1lbnQuZGF0YXNldDtcbiAgICAgIGNvbnN0IGlzTWFpblBob3RvID0gcGhvdG9FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygndmctcGhvdG8tLW1haW4nKTtcblxuICAgICAgaWYgKCEhcGhvdG9JZCkge1xuICAgICAgICB0aGlzLmRlbGV0ZVBob3RvKCtwaG90b0lkKS50aGVuKFxuICAgICAgICAgIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5mYXVsdGNvZGUpIHtcbiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICB0aGlzLmRyYXcoe2FjdGlvbjogaXNNYWluUGhvdG8gPyAncGhvdG9SZW1vdmVNYWluJyA6ICdwaG90b1JlbW92ZSd9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICog0JfQsNC/0YDQvtGBINC90LAg0L7QsdC90L7QstC70LXQvdC40LUg0YTQvtGC0L7Qs9GA0LDRhNC40Lgg0YHQvtGC0YDRg9C00L3QuNC60LAuXG4gICAgICogQHBhcmFtIGV2ZW50IHtFdmVudH0g0KHQvtCx0YvRgtC40LUuXG4gICAgICovXG4gICAgXCJ1cGRhdGUtcGhvdG9cIjogZXZlbnQgPT4ge1xuICAgICAgY29uc3QgcGhvdG9FbGVtZW50ID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIudmctcGhvdG9cIik7XG4gICAgICBjb25zdCB7cGhvdG9JZH0gPSBwaG90b0VsZW1lbnQuZGF0YXNldDtcbiAgICAgIGNvbnN0IGJ1dHRvbnMgPSBwaG90b0VsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJyk7XG5cbiAgICAgIGlmICghIXBob3RvSWQpIHtcbiAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpKTtcblxuICAgICAgICB0aGlzLnNldEFzTWFpblBob3RvKCtwaG90b0lkKS50aGVuKFxuICAgICAgICAgIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICB0aGlzLmRyYXcoe2FjdGlvbjogJ3Bob3RvQWxidW0nfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvciA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHtcbiAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwidGhpcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsImciLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInNlbGYiLCJzdXBwb3J0IiwiU3ltYm9sIiwiQmxvYiIsInZpZXdDbGFzc2VzIiwiaXNBcnJheUJ1ZmZlclZpZXciLCJBcnJheUJ1ZmZlciIsImlzVmlldyIsImluZGV4T2YiLCJ0b1N0cmluZyIsIm5vcm1hbGl6ZU5hbWUiLCJuYW1lIiwiU3RyaW5nIiwidGVzdCIsIlR5cGVFcnJvciIsInRvTG93ZXJDYXNlIiwibm9ybWFsaXplVmFsdWUiLCJ2YWx1ZSIsIml0ZXJhdG9yRm9yIiwiaXRlbXMiLCJpdGVyYXRvciIsIm5leHQiLCJzaGlmdCIsImRvbmUiLCJ1bmRlZmluZWQiLCJIZWFkZXJzIiwiaGVhZGVycyIsIm1hcCIsImZvckVhY2giLCJhcHBlbmQiLCJBcnJheSIsImlzQXJyYXkiLCJoZWFkZXIiLCJsZW5ndGgiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiY29uc3VtZWQiLCJib2R5IiwiX25vQm9keSIsImJvZHlVc2VkIiwiUHJvbWlzZSIsInJlamVjdCIsImZpbGVSZWFkZXJSZWFkeSIsInJlYWRlciIsInJlc29sdmUiLCJvbmxvYWQiLCJyZXN1bHQiLCJvbmVycm9yIiwiZXJyb3IiLCJyZWFkQmxvYkFzQXJyYXlCdWZmZXIiLCJibG9iIiwiRmlsZVJlYWRlciIsInByb21pc2UiLCJyZWFkQXNBcnJheUJ1ZmZlciIsImJ1ZmZlckNsb25lIiwiYnVmIiwic2xpY2UiLCJ2aWV3IiwiVWludDhBcnJheSIsImJ5dGVMZW5ndGgiLCJzZXQiLCJidWZmZXIiLCJCb2R5IiwiX2luaXRCb2R5IiwiX2JvZHlJbml0IiwiX2JvZHlUZXh0IiwiaXNQcm90b3R5cGVPZiIsIl9ib2R5QmxvYiIsIkZvcm1EYXRhIiwiX2JvZHlGb3JtRGF0YSIsIlVSTFNlYXJjaFBhcmFtcyIsIkRhdGFWaWV3IiwiX2JvZHlBcnJheUJ1ZmZlciIsInR5cGUiLCJyZWplY3RlZCIsIkVycm9yIiwiYXJyYXlCdWZmZXIiLCJieXRlT2Zmc2V0IiwidGhlbiIsInRleHQiLCJtYXRjaCIsImVuY29kaW5nIiwiZXhlYyIsInJlYWRBc1RleHQiLCJjaGFycyIsImkiLCJmcm9tQ2hhckNvZGUiLCJqb2luIiwicmVhZEFycmF5QnVmZmVyQXNUZXh0IiwiZm9ybURhdGEiLCJkZWNvZGUiLCJqc29uIiwiSlNPTiIsInBhcnNlIiwib2xkVmFsdWUiLCJoYXMiLCJjYWxsYmFjayIsInRoaXNBcmciLCJrZXlzIiwicHVzaCIsInZhbHVlcyIsImVudHJpZXMiLCJtZXRob2RzIiwiUmVxdWVzdCIsImlucHV0Iiwib3B0aW9ucyIsIm1ldGhvZCIsInVwY2FzZWQiLCJ1cmwiLCJjcmVkZW50aWFscyIsIm1vZGUiLCJzaWduYWwiLCJ0b1VwcGVyQ2FzZSIsIkFib3J0Q29udHJvbGxlciIsInJlZmVycmVyIiwiY2FjaGUiLCJyZVBhcmFtU2VhcmNoIiwicmVwbGFjZSIsIkRhdGUiLCJnZXRUaW1lIiwiZm9ybSIsInRyaW0iLCJzcGxpdCIsImJ5dGVzIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiUmVzcG9uc2UiLCJib2R5SW5pdCIsInN0YXR1cyIsIlJhbmdlRXJyb3IiLCJvayIsInN0YXR1c1RleHQiLCJjbG9uZSIsInJlc3BvbnNlIiwicmVkaXJlY3RTdGF0dXNlcyIsInJlZGlyZWN0IiwibG9jYXRpb24iLCJET01FeGNlcHRpb24iLCJlcnIiLCJtZXNzYWdlIiwic3RhY2siLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsImluaXQiLCJyZXF1ZXN0IiwiYWJvcnRlZCIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwiYWJvcnRYaHIiLCJhYm9ydCIsInJhd0hlYWRlcnMiLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJzdWJzdHIiLCJsaW5lIiwicGFydHMiLCJjb25zb2xlIiwid2FybiIsInJlc3BvbnNlVVJMIiwicmVzcG9uc2VUZXh0Iiwic2V0VGltZW91dCIsIm9udGltZW91dCIsIm9uYWJvcnQiLCJvcGVuIiwiaHJlZiIsImZpeFVybCIsIndpdGhDcmVkZW50aWFscyIsInJlc3BvbnNlVHlwZSIsIm5hbWVzIiwic2V0UmVxdWVzdEhlYWRlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNlbmQiLCJfdHlwZW9mIiwib3duS2V5cyIsInIiLCJ0IiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiZmlsdGVyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwiX2RlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJfZGVmaW5lUHJvcGVydGllcyIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiX3RvUHJvcGVydHlLZXkiLCJ0b1ByaW1pdGl2ZSIsIl90b1ByaW1pdGl2ZSIsInBvbHlmaWxsIiwiZmV0Y2giLCJWaXNpb25QaG90b0dhbGxlcnkiLCJfcmVmIiwiX3RoaXMiLCJlbXBsb3llZUlkIiwidmlzaW9uUGVyc29uSWQiLCJwZXJzb25JZCIsInRva2VuIiwiY29udHJvbHMiLCJfcmVmJG1hc3RlckFsYnVtIiwibWFzdGVyQWxidW0iLCJhIiwibiIsIl9jbGFzc0NhbGxDaGVjayIsImRpc2FibGVBbGwiLCJ1cGRhdGUiLCJ1cGxvYWQiLCJyZW1vdmUiLCJldmVudCIsImZpbGVJbnB1dCIsInJvb3RFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInJvdXRlciIsImNsaWNrIiwiZmlsZSIsInRhcmdldCIsImZpbGVzIiwicmVhZEFzRGF0YVVSTCIsImFkZFBob3RvIiwiZHJhdyIsImFjdGlvbiIsImhhbmRsZUVycm9yIiwiZmluYWxseSIsInRvZ2dsZU92ZXJsYXlNZXNzYWdlIiwiYmxvY2tpbmdFcnJvck1lc3NhZ2UiLCJjb25jYXQiLCJwaG90b0VsZW1lbnQiLCJjbG9zZXN0IiwicGhvdG9JZCIsImRhdGFzZXQiLCJpc01haW5QaG90byIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiZGVsZXRlUGhvdG8iLCJmYXVsdGNvZGUiLCJidXR0b25zIiwicXVlcnlTZWxlY3RvckFsbCIsImJ1dHRvbiIsInNldEF0dHJpYnV0ZSIsInNldEFzTWFpblBob3RvIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImVtcGxveWVlIiwiaWQiLCJlcnJvckZ1bmN0aW9uIiwic3VjY2Vzc0Z1bmN0aW9uIiwiX3JlZjIiLCJwYXJhbXMiLCJfcGFyYW1zJG1lc3NhZ2UiLCJfbWVzc2FnZSRkZXRhaWwiLCJfbWVzc2FnZSRkZXRhaWwyIiwibWVzc2FnZVN0cmluZyIsImRldGFpbCIsImVycm9yTWVzc2FnZSIsImZhdWx0c3RyaW5nIiwicmV2ZXJzZSIsInN0cmluZ2lmeSIsImxvZyIsIl9yZWYzIiwicmVxdWVzdFBhdGgiLCJyZXF1ZXN0Qm9keSIsInJlcXVlc3REZWZhdWx0cyIsInZpc2lvbl9wZXJzb25faWQiLCJpbWFnZSIsImVtcGxveWVlX2lkIiwicGhvdG9faWQiLCJnYWxsZXJ5Q29udGFpbmVyIiwiYWRkIiwiX3RoaXMyIiwiaW5uZXJIVE1MIiwibWFpblBob3RvQ29udGFpbmVyIiwiZ2FsbGVyeSIsImdldFBob3RvcyIsImNyZWF0ZVBob3RvRWxlbWVudCIsIm1haW4iLCJlbXB0eSIsImNyZWF0ZU5vUGhvdG9FbGVtZW50IiwiaW5pdEV2ZW50cyIsInJlc3BvbnNlSnNvbiIsInN1Y2Nlc3NQYXJhbXMiLCJwaG90b3MiLCJwYXJlbnRFbGVtZW50IiwiaGFuZGxlU3VjY2VzcyIsIm1haW5QaG90b0RhdGEiLCJmaW5kIiwiX3JlZjQiLCJnYWxsZXJ5UGhvdG9zRGF0YSIsIl9yZWY1IiwiZ2FsbGVyeVBob3Rvc0h0bWwiLCJwaG90b0RhdGEiLCJjYXRjaCIsInBhdGgiLCJhdmF0YXJVcmwiLCJfdGhpcyRjb250cm9scyIsIl90aGlzJGNvbnRyb2xzJHJlbW92ZSIsImVsZW1lbnRDbGFzc2VzIiwiYmFja2dyb3VuZEltYWdlIiwibWFpbkF0dHJpYnV0ZSIsImdldFBob3RvQnV0dG9ucyIsInVwbG9hZEljb24iLCJyZWR1Y2UiLCJidXR0b25zU3RyaW5nIiwiX3RoaXMzIl0sInNvdXJjZVJvb3QiOiIifQ==