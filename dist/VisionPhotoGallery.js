!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VisionPhotoGallery=e():t.VisionPhotoGallery=e()}(this,(function(){return function(){"use strict";var t={d:function(e,o){for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};t.d(e,{default:function(){return S}});var o="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==o&&o,r="URLSearchParams"in o,n="Symbol"in o&&"iterator"in Symbol,i="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch(t){return!1}}(),s="FormData"in o,a="ArrayBuffer"in o;if(a)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&u.indexOf(Object.prototype.toString.call(t))>-1};function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function c(t){return"string"!=typeof t&&(t=String(t)),t}function d(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function f(t){this.map={},t instanceof f?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(t){return new Promise((function(e,o){t.onload=function(){e(t.result)},t.onerror=function(){o(t.error)}}))}function m(t){var e=new FileReader,o=y(e);return e.readAsArrayBuffer(t),o}function v(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&i&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=v(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=v(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(m)}),this.text=function(){var t,e,o,r=p(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,o=y(e=new FileReader),e.readAsText(t),o;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),o=new Array(e.length),r=0;r<e.length;r++)o[r]=String.fromCharCode(e[r]);return o.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(t,e){t=h(t),e=c(e);var o=this.map[t];this.map[t]=o?o+", "+e:e},f.prototype.delete=function(t){delete this.map[h(t)]},f.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},f.prototype.set=function(t,e){this.map[h(t)]=c(e)},f.prototype.forEach=function(t,e){for(var o in this.map)this.map.hasOwnProperty(o)&&t.call(e,this.map[o],o,this)},f.prototype.keys=function(){var t=[];return this.forEach((function(e,o){t.push(o)})),d(t)},f.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),d(t)},f.prototype.entries=function(){var t=[];return this.forEach((function(e,o){t.push([o,e])})),d(t)},n&&(f.prototype[Symbol.iterator]=f.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(t,e){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var o,r,n=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(r=(o=e.method||this.method||"GET").toUpperCase(),b.indexOf(r)>-1?r:o),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var i=/([?&])_=[^&]*/;i.test(this.url)?this.url=this.url.replace(i,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function E(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var o=t.split("="),r=o.shift().replace(/\+/g," "),n=o.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(n))}})),e}function P(t,e){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},g.call(w.prototype),g.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},P.error=function(){var t=new P(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];P.redirect=function(t,e){if(-1===_.indexOf(e))throw new RangeError("Invalid status code");return new P(null,{status:e,headers:{location:t}})};var O=o.DOMException;try{new O}catch(t){(O=function(t,e){this.message=t,this.name=e;var o=Error(t);this.stack=o.stack}).prototype=Object.create(Error.prototype),O.prototype.constructor=O}function A(t,e){return new Promise((function(r,n){var s=new w(t,e);if(s.signal&&s.signal.aborted)return n(new O("Aborted","AbortError"));var u=new XMLHttpRequest;function l(){u.abort()}u.onload=function(){var t,e,o={status:u.status,statusText:u.statusText,headers:(t=u.getAllResponseHeaders()||"",e=new f,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var o=t.split(":"),r=o.shift().trim();if(r){var n=o.join(":").trim();e.append(r,n)}})),e)};o.url="responseURL"in u?u.responseURL:o.headers.get("X-Request-URL");var n="response"in u?u.response:u.responseText;setTimeout((function(){r(new P(n,o))}),0)},u.onerror=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},u.ontimeout=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},u.onabort=function(){setTimeout((function(){n(new O("Aborted","AbortError"))}),0)},u.open(s.method,function(t){try{return""===t&&o.location.href?o.location.href:t}catch(e){return t}}(s.url),!0),"include"===s.credentials?u.withCredentials=!0:"omit"===s.credentials&&(u.withCredentials=!1),"responseType"in u&&(i?u.responseType="blob":a&&s.headers.get("Content-Type")&&-1!==s.headers.get("Content-Type").indexOf("application/octet-stream")&&(u.responseType="arraybuffer")),!e||"object"!=typeof e.headers||e.headers instanceof f?s.headers.forEach((function(t,e){u.setRequestHeader(e,t)})):Object.getOwnPropertyNames(e.headers).forEach((function(t){u.setRequestHeader(t,c(e.headers[t]))})),s.signal&&(s.signal.addEventListener("abort",l),u.onreadystatechange=function(){4===u.readyState&&s.signal.removeEventListener("abort",l)}),u.send(void 0===s._bodyInit?null:s._bodyInit)}))}function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function T(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function k(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?T(Object(o),!0).forEach((function(e){j(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):T(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function B(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}A.polyfill=!0,o.fetch||(o.fetch=A,o.Headers=f,o.Request=w,o.Response=P);var S=function(){function t(e){var o=this,r=e.root,n=e.employeeId,i=e.visionPersonId,s=e.personId,a=e.token,u=e.controls,l=e.masterAlbum,h=void 0===l||l;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,"galleryContainer",null),j(this,"rootElement",null),j(this,"token",null),j(this,"controls",{disableAll:!1,update:!0,upload:!0,remove:!0}),j(this,"masterAlbum",!0),j(this,"errorFunction",null),j(this,"successFunction",null),j(this,"router",{"upload-photo":function(t){var e=o.rootElement.querySelector('input[type="file"]');e.addEventListener("change",o.router["file-input-changed"]),e.click()},"file-input-changed":function(t){var e=t.target.files[0],r=new FileReader;r.readAsDataURL(e),r.onload=function(){o.addPhoto(r.result).then((function(t){if(t.faultcode&&o.handleError({message:t}),t.ok)o.draw({action:"uploadPhoto"});else if(200!==t.status)return t.json()}),(function(t){o.handleError({message:t})}))},r.onerror=function(){o.handleError({message:r.error,blockingErrorMessage:"Ошибка загрузки фотографии (-ий): ".concat(r.error)})}},"remove-photo":function(t){var e=t.target.closest(".vg-photo"),r=e.dataset.photoId,n=e.classList.contains("vg-photo--main");r&&o.deletePhoto(+r).then((function(t){if(t.ok)o.draw({action:n?"photoRemove":"photoRemoveMain"});else if(200!==t.status)return t.json()}),(function(t){o.handleError({message:t})}))},"update-photo":function(t){var e=t.target.closest(".vg-photo"),r=e.dataset.photoId,n=e.querySelectorAll("button");r&&(n.forEach((function(t){return t.setAttribute("disabled","disabled")})),o.setAsMainPhoto(+r).then((function(t){if(t.ok)o.draw({action:"photoAlbum"});else if(200!==t.status)return t.json()}),(function(t){o.handleError({message:t})})))}}),!r)throw new Error("Не указан ID корневого элемента для галереи!");var c=document.getElementById(r);if(!c)throw new Error("Проверьте указанный ID корневого элемента для галереи!");if(this.rootElement=c,!n&&!i&&!s)throw new Error("Не указан ID пользователя на портале Vision");this.employee={id:null,personId:null,visionPersonId:null},this.employeeId=n,this.visionPersonId=i,this.personId=s,this.token=a,this.controls=u,this.masterAlbum=h,this.draw()}var e,o;return e=t,o=[{key:"errorFunction",get:function(){return this.errorFunction},set:function(t){t&&(this.errorFunction=t)}},{key:"successFunction",get:function(){return this.successFunction},set:function(t){t&&(this.successFunction=t)}},{key:"update",value:function(t){var e=t.employeeId,o=t.token;this.employeeId=e,this.token=o,this.draw()}},{key:"employeeId",get:function(){return this.employee.id},set:function(t){t&&(this.employee.id=t)}},{key:"visionPersonId",get:function(){return this.employee.visionPersonId},set:function(t){t&&(this.employee.visionPersonId=t)}},{key:"personId",get:function(){return this.employee.personId},set:function(t){t&&(this.employee.personId=t)}},{key:"rootElement",get:function(){return this.rootElement}},{key:"token",get:function(){return this.token},set:function(t){t&&(this.token=t)}},{key:"controls",get:function(){return this.controls},set:function(t){this.controls=k(k({},this.controls),t)}},{key:"masterAlbum",get:function(){return this.masterAlbum},set:function(t){this.masterAlbum=t}},{key:"handleError",value:function(t){var e=t.message,o=t.blockingErrorMessage;if(this.errorFunction){var r="";"object"===I(e)&&(e.faultstring?r=e.faultstring:Object.keys(e).reverse().forEach((function(t){r+="".concat(e[t],"<br/>")})));var n=r.length?r:JSON.stringify(e);this.errorFunction(n,"Ошибка")}else{if(o)throw new Error(o);console.log(e)}}},{key:"handleSuccess",value:function(t){this.successFunction&&this.successFunction(t)}},{key:"request",value:function(t){var e=t.requestPath,o=t.requestBody,r={method:"POST",mode:"same-origin",credentials:"same-origin",headers:{"Content-Type":"application/json","X-CSRFToken":this.token},body:JSON.stringify(o)};return fetch("/api/v2/vision/".concat(e,"/"),r)}},{key:"getPhotos",value:function(){var t={};return this.employeeId&&!this.visionPersonId?t.employeeId=this.employeeId:this.visionPersonId?t.vision_person_id=this.visionPersonId:this.personId&&(t.personId=this.personId),this.request({requestPath:"get_photos",requestBody:k(k({},t),{},{masterAlbum:this.masterAlbum})})}},{key:"addPhoto",value:function(t){return this.toggleOverlayMessage("Загрузка..."),this.request({requestPath:"add_photo",requestBody:{employeeId:this.employeeId,image:t}})}},{key:"deletePhoto",value:function(t){this.toggleOverlayMessage("Удаление фотографии...");var e=this.employeeId;return this.request({requestPath:"delete_photo",requestBody:{employee_id:e,photo_id:t}})}},{key:"updatePhoto",value:function(t){return this.toggleOverlayMessage("Обновление фотографии..."),this.request({requestPath:"update_photo",requestBody:{employeeId:this.employeeId,photo_id:t}})}},{key:"setAsMainPhoto",value:function(t){return this.toggleOverlayMessage("Обновление основной фотографии..."),this.request({requestPath:"set_main_photo",requestBody:{employeeId:this.employeeId,photoId:t}})}},{key:"toggleOverlayMessage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.galleryContainer;if(!e)throw new Error("Не найдена корневой элемент галереи");t?(e.dataset.message=t,e.classList.add("vision-photo-gallery--message")):(e.classList.remove("vision-photo-gallery--message"),e.dataset.message="")}},{key:"draw",value:function(t){var e=this,o=this.rootElement;o.innerHTML='\n      <div class="vision-photo-gallery">\n        <input type="file" class="vision-photo-gallery__file-field" tabindex="-1">\n        <div class="vision-photo-gallery__item vision-photo-gallery__item--main">\n          <div class="vg-main-photo"></div>\n        </div>\n        <div class="vision-photo-gallery__item">\n          <div class="vg-gallery"></div>\n        </div>\n      </div>\n    ';var r=document.querySelector(".vision-photo-gallery");this.galleryContainer=r,this.toggleOverlayMessage("Загрузка...");var n=o.querySelector(".vg-main-photo"),i=o.querySelector(".vg-gallery"),s=this.controls.upload;this.getPhotos().then((function(t){if(n.innerHTML=e.createPhotoElement({main:!0,empty:!0,photoId:null}),s&&(i.innerHTML=e.createPhotoElement({main:!1,empty:!0,photoId:null})),t.ok)return t.json();n.innerHTML=e.createNoPhotoElement(),e.initEvents(),e.toggleOverlayMessage()}),(function(t){e.toggleOverlayMessage(),e.handleError({message:t}),e.initEvents()})).then((function(o){if(!o||!o.length)return n.innerHTML=e.createNoPhotoElement(),i.parentElement.classList.add("hidden"),void e.toggleOverlayMessage();var r=o.find((function(t){return t.main})),a=o.filter((function(t){return!t.main}));if(r?n.innerHTML=e.createPhotoElement(r):n.parentElement.classList.add("hidden"),a.length){var u="";a.forEach((function(t){return u+=e.createPhotoElement(t)})),s&&(u+=e.createPhotoElement({main:!1,empty:!0,photoId:null})),i.innerHTML=u}else s||i.parentElement.classList.add("hidden");var l={action:t.action||e.action,photos:o};e.initEvents(),e.toggleOverlayMessage(),e.handleSuccess(l)}),(function(t){e.handleError({message:t}),e.toggleOverlayMessage(),e.initEvents()})).catch((function(t){e.toggleOverlayMessage(),e.handleError({message:t}),e.initEvents()})),this.initEvents()}},{key:"createPhotoElement",value:function(t){var e=t.photoId,o=t.main,r=t.empty,n=t.path,i=t.avatarUrl,s=this.controls,a=s.disableAll,u=s.upload,l=s.update,h=s.remove,c=void 0===h?!r:h,d="",f="",p="",y="";return!i&&n&&(p='style="background-image: url('.concat(n,')"')),i&&(p='style="background-image: url('.concat(i,')"')),o?(y='data-main="'.concat(o,'"'),r?(f="vg-photo vg-photo--main",d=this.getPhotoButtons({upload:u})):(f="vg-photo vg-photo--main",d=this.getPhotoButtons({remove:c}))):r?(f="vg-gallery__item vg-photo vg-photo--upload",d=this.getPhotoButtons({uploadIcon:u})):(f="vg-gallery__item vg-photo",d=this.getPhotoButtons({update:l,remove:c})),'\n      <div class="'.concat(f,'"\n        ').concat(p,'\n        data-photo-id="').concat(e,'"\n        ').concat(y,">\n        ").concat(a?"":d,"\n        </div>\n      ")}},{key:"createNoPhotoElement",value:function(){return'\n      <div class="vg-photo vg-photo--main">\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="-256 -256 1024 1024">\n          <path fill="#4a5266"\n            d="M437 310.8c-28.4-28.4-62.2-49.2-99.1-61.7 34.1-25.2 56.2-65.6 56.2-111.1C394.1 61.9 332.1 0 256 0S117.9 61.9 117.9 138.1c0 45.5 22.1 85.9 56.2 111.1 -36.9 12.4-70.8 33.3-99.1 61.7C26.6 359.2 0 423.5 0 491.8 0 503 9 512 20.2 512h471.7c11.1 0 20.2-9 20.2-20.2C512 423.5 485.4 359.2 437 310.8zM158.2 138.1c0-53.9 43.9-97.8 97.8-97.8 53.9 0 97.8 43.9 97.8 97.8 0 53.9-43.9 97.8-97.8 97.8C202.1 235.8 158.2 192 158.2 138.1zM41.2 471.7C51.4 362.2 143.9 276.2 256 276.2s204.6 86 214.8 195.5H41.2z"/>\n        </svg>\n      </div>\n    '}},{key:"getPhotoButtons",value:function(t){if(t.disableAll)return"";var e={remove:'<button class="vg-photo__button vg-button vg-button--red" data-action="remove-photo">Удалить</button>',upload:'<button class="vg-photo__button vg-button" data-action="upload-photo">Загрузить</button>',uploadIcon:'<button class="vg-photo__button vg-button vg-button--upload" data-action="upload-photo">&#43;</button>',update:'<button class="vg-photo__button vg-button vg-button--green" data-action="update-photo">Выбрать</button>'};return Object.keys(t).reduce((function(o,r){return t[r]&&(o+=e[r]),o}),"")}},{key:"initEvents",value:function(){var t=this;this.rootElement.querySelectorAll("button").forEach((function(e){e.addEventListener("click",t.router[e.dataset.action],!1)}))}}],o&&B(e.prototype,o),t}();return e.default}()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBQ0MsRUFBZWpSLEdBS2hELE9BSklrTyxFQUFPbE8sS0FDVGlSLEdBQWlCMUQsRUFBUXZOLElBR3BCaVIsSUFDTixNLHdCQU1MLFdBQWEsV0FDV3BSLEtBQWZvTSxZQUNxQnVCLGlCQUFpQixVQUVyQzlLLFNBQVEsU0FBQStLLEdBQ2RBLEVBQU81QyxpQkFDTCxRQUNBLEVBQUtzQixPQUFPc0IsRUFBT1AsUUFBUUwsU0FDM0IsUyxzQkE1cEJhekIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL1Zpc2lvblBob3RvR2FsbGVyeS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vVmlzaW9uUGhvdG9HYWxsZXJ5L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL1Zpc2lvblBob3RvR2FsbGVyeS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vVmlzaW9uUGhvdG9HYWxsZXJ5L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vVmlzaW9uUGhvdG9HYWxsZXJ5Ly4vbm9kZV9tb2R1bGVzL3doYXR3Zy1mZXRjaC9mZXRjaC5qcyIsIndlYnBhY2s6Ly9WaXNpb25QaG90b0dhbGxlcnkvLi9WaXNpb25QaG90b0dhbGxlcnkvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiVmlzaW9uUGhvdG9HYWxsZXJ5XCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIlZpc2lvblBob3RvR2FsbGVyeVwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCJ2YXIgZ2xvYmFsID1cbiAgKHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyAmJiBnbG9iYWxUaGlzKSB8fFxuICAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmIHNlbGYpIHx8XG4gICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyAmJiBnbG9iYWwpXG5cbnZhciBzdXBwb3J0ID0ge1xuICBzZWFyY2hQYXJhbXM6ICdVUkxTZWFyY2hQYXJhbXMnIGluIGdsb2JhbCxcbiAgaXRlcmFibGU6ICdTeW1ib2wnIGluIGdsb2JhbCAmJiAnaXRlcmF0b3InIGluIFN5bWJvbCxcbiAgYmxvYjpcbiAgICAnRmlsZVJlYWRlcicgaW4gZ2xvYmFsICYmXG4gICAgJ0Jsb2InIGluIGdsb2JhbCAmJlxuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG5ldyBCbG9iKClcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSkoKSxcbiAgZm9ybURhdGE6ICdGb3JtRGF0YScgaW4gZ2xvYmFsLFxuICBhcnJheUJ1ZmZlcjogJ0FycmF5QnVmZmVyJyBpbiBnbG9iYWxcbn1cblxuZnVuY3Rpb24gaXNEYXRhVmlldyhvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiBEYXRhVmlldy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihvYmopXG59XG5cbmlmIChzdXBwb3J0LmFycmF5QnVmZmVyKSB7XG4gIHZhciB2aWV3Q2xhc3NlcyA9IFtcbiAgICAnW29iamVjdCBJbnQ4QXJyYXldJyxcbiAgICAnW29iamVjdCBVaW50OEFycmF5XScsXG4gICAgJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJyxcbiAgICAnW29iamVjdCBJbnQxNkFycmF5XScsXG4gICAgJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICAnW29iamVjdCBJbnQzMkFycmF5XScsXG4gICAgJ1tvYmplY3QgVWludDMyQXJyYXldJyxcbiAgICAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcbiAgICAnW29iamVjdCBGbG9hdDY0QXJyYXldJ1xuICBdXG5cbiAgdmFyIGlzQXJyYXlCdWZmZXJWaWV3ID1cbiAgICBBcnJheUJ1ZmZlci5pc1ZpZXcgfHxcbiAgICBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgdmlld0NsYXNzZXMuaW5kZXhPZihPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSkgPiAtMVxuICAgIH1cbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG4gIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICBuYW1lID0gU3RyaW5nKG5hbWUpXG4gIH1cbiAgaWYgKC9bXmEtejAtOVxcLSMkJSYnKisuXl9gfH4hXS9pLnRlc3QobmFtZSkgfHwgbmFtZSA9PT0gJycpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGNoYXJhY3RlciBpbiBoZWFkZXIgZmllbGQgbmFtZTogXCInICsgbmFtZSArICdcIicpXG4gIH1cbiAgcmV0dXJuIG5hbWUudG9Mb3dlckNhc2UoKVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVWYWx1ZSh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgIHZhbHVlID0gU3RyaW5nKHZhbHVlKVxuICB9XG4gIHJldHVybiB2YWx1ZVxufVxuXG4vLyBCdWlsZCBhIGRlc3RydWN0aXZlIGl0ZXJhdG9yIGZvciB0aGUgdmFsdWUgbGlzdFxuZnVuY3Rpb24gaXRlcmF0b3JGb3IoaXRlbXMpIHtcbiAgdmFyIGl0ZXJhdG9yID0ge1xuICAgIG5leHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHZhbHVlID0gaXRlbXMuc2hpZnQoKVxuICAgICAgcmV0dXJuIHtkb25lOiB2YWx1ZSA9PT0gdW5kZWZpbmVkLCB2YWx1ZTogdmFsdWV9XG4gICAgfVxuICB9XG5cbiAgaWYgKHN1cHBvcnQuaXRlcmFibGUpIHtcbiAgICBpdGVyYXRvcltTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gaXRlcmF0b3JcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaXRlcmF0b3Jcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEhlYWRlcnMoaGVhZGVycykge1xuICB0aGlzLm1hcCA9IHt9XG5cbiAgaWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSB7XG4gICAgaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICB0aGlzLmFwcGVuZChuYW1lLCB2YWx1ZSlcbiAgICB9LCB0aGlzKVxuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaGVhZGVycykpIHtcbiAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24oaGVhZGVyKSB7XG4gICAgICB0aGlzLmFwcGVuZChoZWFkZXJbMF0sIGhlYWRlclsxXSlcbiAgICB9LCB0aGlzKVxuICB9IGVsc2UgaWYgKGhlYWRlcnMpIHtcbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhoZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIGhlYWRlcnNbbmFtZV0pXG4gICAgfSwgdGhpcylcbiAgfVxufVxuXG5IZWFkZXJzLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICBuYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKVxuICB2YWx1ZSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKVxuICB2YXIgb2xkVmFsdWUgPSB0aGlzLm1hcFtuYW1lXVxuICB0aGlzLm1hcFtuYW1lXSA9IG9sZFZhbHVlID8gb2xkVmFsdWUgKyAnLCAnICsgdmFsdWUgOiB2YWx1ZVxufVxuXG5IZWFkZXJzLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBmdW5jdGlvbihuYW1lKSB7XG4gIGRlbGV0ZSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxufVxuXG5IZWFkZXJzLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihuYW1lKSB7XG4gIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpXG4gIHJldHVybiB0aGlzLmhhcyhuYW1lKSA/IHRoaXMubWFwW25hbWVdIDogbnVsbFxufVxuXG5IZWFkZXJzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihuYW1lKSB7XG4gIHJldHVybiB0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShub3JtYWxpemVOYW1lKG5hbWUpKVxufVxuXG5IZWFkZXJzLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKVxufVxuXG5IZWFkZXJzLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24oY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLm1hcCkge1xuICAgIGlmICh0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB0aGlzLm1hcFtuYW1lXSwgbmFtZSwgdGhpcylcbiAgICB9XG4gIH1cbn1cblxuSGVhZGVycy5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgaXRlbXMgPSBbXVxuICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICBpdGVtcy5wdXNoKG5hbWUpXG4gIH0pXG4gIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcbn1cblxuSGVhZGVycy5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBpdGVtcyA9IFtdXG4gIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkge1xuICAgIGl0ZW1zLnB1c2godmFsdWUpXG4gIH0pXG4gIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcbn1cblxuSGVhZGVycy5wcm90b3R5cGUuZW50cmllcyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgaXRlbXMgPSBbXVxuICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICBpdGVtcy5wdXNoKFtuYW1lLCB2YWx1ZV0pXG4gIH0pXG4gIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcbn1cblxuaWYgKHN1cHBvcnQuaXRlcmFibGUpIHtcbiAgSGVhZGVycy5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXNcbn1cblxuZnVuY3Rpb24gY29uc3VtZWQoYm9keSkge1xuICBpZiAoYm9keS5ib2R5VXNlZCkge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKSlcbiAgfVxuICBib2R5LmJvZHlVc2VkID0gdHJ1ZVxufVxuXG5mdW5jdGlvbiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQpXG4gICAgfVxuICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICByZWplY3QocmVhZGVyLmVycm9yKVxuICAgIH1cbiAgfSlcbn1cblxuZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHtcbiAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgdmFyIHByb21pc2UgPSBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcbiAgcmV0dXJuIHByb21pc2Vcbn1cblxuZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICB2YXIgcHJvbWlzZSA9IGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpXG4gIHJlYWRlci5yZWFkQXNUZXh0KGJsb2IpXG4gIHJldHVybiBwcm9taXNlXG59XG5cbmZ1bmN0aW9uIHJlYWRBcnJheUJ1ZmZlckFzVGV4dChidWYpIHtcbiAgdmFyIHZpZXcgPSBuZXcgVWludDhBcnJheShidWYpXG4gIHZhciBjaGFycyA9IG5ldyBBcnJheSh2aWV3Lmxlbmd0aClcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICBjaGFyc1tpXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUodmlld1tpXSlcbiAgfVxuICByZXR1cm4gY2hhcnMuam9pbignJylcbn1cblxuZnVuY3Rpb24gYnVmZmVyQ2xvbmUoYnVmKSB7XG4gIGlmIChidWYuc2xpY2UpIHtcbiAgICByZXR1cm4gYnVmLnNsaWNlKDApXG4gIH0gZWxzZSB7XG4gICAgdmFyIHZpZXcgPSBuZXcgVWludDhBcnJheShidWYuYnl0ZUxlbmd0aClcbiAgICB2aWV3LnNldChuZXcgVWludDhBcnJheShidWYpKVxuICAgIHJldHVybiB2aWV3LmJ1ZmZlclxuICB9XG59XG5cbmZ1bmN0aW9uIEJvZHkoKSB7XG4gIHRoaXMuYm9keVVzZWQgPSBmYWxzZVxuXG4gIHRoaXMuX2luaXRCb2R5ID0gZnVuY3Rpb24oYm9keSkge1xuICAgIC8qXG4gICAgICBmZXRjaC1tb2NrIHdyYXBzIHRoZSBSZXNwb25zZSBvYmplY3QgaW4gYW4gRVM2IFByb3h5IHRvXG4gICAgICBwcm92aWRlIHVzZWZ1bCB0ZXN0IGhhcm5lc3MgZmVhdHVyZXMgc3VjaCBhcyBmbHVzaC4gSG93ZXZlciwgb25cbiAgICAgIEVTNSBicm93c2VycyB3aXRob3V0IGZldGNoIG9yIFByb3h5IHN1cHBvcnQgcG9sbHlmaWxscyBtdXN0IGJlIHVzZWQ7XG4gICAgICB0aGUgcHJveHktcG9sbHlmaWxsIGlzIHVuYWJsZSB0byBwcm94eSBhbiBhdHRyaWJ1dGUgdW5sZXNzIGl0IGV4aXN0c1xuICAgICAgb24gdGhlIG9iamVjdCBiZWZvcmUgdGhlIFByb3h5IGlzIGNyZWF0ZWQuIFRoaXMgY2hhbmdlIGVuc3VyZXNcbiAgICAgIFJlc3BvbnNlLmJvZHlVc2VkIGV4aXN0cyBvbiB0aGUgaW5zdGFuY2UsIHdoaWxlIG1haW50YWluaW5nIHRoZVxuICAgICAgc2VtYW50aWMgb2Ygc2V0dGluZyBSZXF1ZXN0LmJvZHlVc2VkIGluIHRoZSBjb25zdHJ1Y3RvciBiZWZvcmVcbiAgICAgIF9pbml0Qm9keSBpcyBjYWxsZWQuXG4gICAgKi9cbiAgICB0aGlzLmJvZHlVc2VkID0gdGhpcy5ib2R5VXNlZFxuICAgIHRoaXMuX2JvZHlJbml0ID0gYm9keVxuICAgIGlmICghYm9keSkge1xuICAgICAgdGhpcy5fYm9keVRleHQgPSAnJ1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHlcbiAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYmxvYiAmJiBCbG9iLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICB0aGlzLl9ib2R5QmxvYiA9IGJvZHlcbiAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgIHRoaXMuX2JvZHlGb3JtRGF0YSA9IGJvZHlcbiAgICB9IGVsc2UgaWYgKHN1cHBvcnQuc2VhcmNoUGFyYW1zICYmIFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5LnRvU3RyaW5nKClcbiAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIgJiYgc3VwcG9ydC5ibG9iICYmIGlzRGF0YVZpZXcoYm9keSkpIHtcbiAgICAgIHRoaXMuX2JvZHlBcnJheUJ1ZmZlciA9IGJ1ZmZlckNsb25lKGJvZHkuYnVmZmVyKVxuICAgICAgLy8gSUUgMTAtMTEgY2FuJ3QgaGFuZGxlIGEgRGF0YVZpZXcgYm9keS5cbiAgICAgIHRoaXMuX2JvZHlJbml0ID0gbmV3IEJsb2IoW3RoaXMuX2JvZHlBcnJheUJ1ZmZlcl0pXG4gICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIChBcnJheUJ1ZmZlci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSB8fCBpc0FycmF5QnVmZmVyVmlldyhib2R5KSkpIHtcbiAgICAgIHRoaXMuX2JvZHlBcnJheUJ1ZmZlciA9IGJ1ZmZlckNsb25lKGJvZHkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChib2R5KVxuICAgIH1cblxuICAgIGlmICghdGhpcy5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykpIHtcbiAgICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCcpXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlCbG9iICYmIHRoaXMuX2JvZHlCbG9iLnR5cGUpIHtcbiAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgdGhpcy5fYm9keUJsb2IudHlwZSlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOCcpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKHN1cHBvcnQuYmxvYikge1xuICAgIHRoaXMuYmxvYiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcbiAgICAgIGlmIChyZWplY3RlZCkge1xuICAgICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUJsb2IpXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5QXJyYXlCdWZmZXJdKSlcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyBibG9iJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikge1xuICAgICAgICB2YXIgaXNDb25zdW1lZCA9IGNvbnN1bWVkKHRoaXMpXG4gICAgICAgIGlmIChpc0NvbnN1bWVkKSB7XG4gICAgICAgICAgcmV0dXJuIGlzQ29uc3VtZWRcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFxuICAgICAgICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyLmJ1ZmZlci5zbGljZShcbiAgICAgICAgICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyLmJ5dGVPZmZzZXQsXG4gICAgICAgICAgICAgIHRoaXMuX2JvZHlBcnJheUJ1ZmZlci5ieXRlT2Zmc2V0ICsgdGhpcy5fYm9keUFycmF5QnVmZmVyLmJ5dGVMZW5ndGhcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJsb2IoKS50aGVuKHJlYWRCbG9iQXNBcnJheUJ1ZmZlcilcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgIGlmIChyZWplY3RlZCkge1xuICAgICAgcmV0dXJuIHJlamVjdGVkXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG4gICAgICByZXR1cm4gcmVhZEJsb2JBc1RleHQodGhpcy5fYm9keUJsb2IpXG4gICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVhZEFycmF5QnVmZmVyQXNUZXh0KHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikpXG4gICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyB0ZXh0JylcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcbiAgICB9XG4gIH1cblxuICBpZiAoc3VwcG9ydC5mb3JtRGF0YSkge1xuICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKGRlY29kZSlcbiAgICB9XG4gIH1cblxuICB0aGlzLmpzb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKVxuICB9XG5cbiAgcmV0dXJuIHRoaXNcbn1cblxuLy8gSFRUUCBtZXRob2RzIHdob3NlIGNhcGl0YWxpemF0aW9uIHNob3VsZCBiZSBub3JtYWxpemVkXG52YXIgbWV0aG9kcyA9IFsnREVMRVRFJywgJ0dFVCcsICdIRUFEJywgJ09QVElPTlMnLCAnUE9TVCcsICdQVVQnXVxuXG5mdW5jdGlvbiBub3JtYWxpemVNZXRob2QobWV0aG9kKSB7XG4gIHZhciB1cGNhc2VkID0gbWV0aG9kLnRvVXBwZXJDYXNlKClcbiAgcmV0dXJuIG1ldGhvZHMuaW5kZXhPZih1cGNhc2VkKSA+IC0xID8gdXBjYXNlZCA6IG1ldGhvZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gUmVxdWVzdChpbnB1dCwgb3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVxdWVzdCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQbGVhc2UgdXNlIHRoZSBcIm5ld1wiIG9wZXJhdG9yLCB0aGlzIERPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLicpXG4gIH1cblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICB2YXIgYm9keSA9IG9wdGlvbnMuYm9keVxuXG4gIGlmIChpbnB1dCBpbnN0YW5jZW9mIFJlcXVlc3QpIHtcbiAgICBpZiAoaW5wdXQuYm9keVVzZWQpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpXG4gICAgfVxuICAgIHRoaXMudXJsID0gaW5wdXQudXJsXG4gICAgdGhpcy5jcmVkZW50aWFscyA9IGlucHV0LmNyZWRlbnRpYWxzXG4gICAgaWYgKCFvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKGlucHV0LmhlYWRlcnMpXG4gICAgfVxuICAgIHRoaXMubWV0aG9kID0gaW5wdXQubWV0aG9kXG4gICAgdGhpcy5tb2RlID0gaW5wdXQubW9kZVxuICAgIHRoaXMuc2lnbmFsID0gaW5wdXQuc2lnbmFsXG4gICAgaWYgKCFib2R5ICYmIGlucHV0Ll9ib2R5SW5pdCAhPSBudWxsKSB7XG4gICAgICBib2R5ID0gaW5wdXQuX2JvZHlJbml0XG4gICAgICBpbnB1dC5ib2R5VXNlZCA9IHRydWVcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhpcy51cmwgPSBTdHJpbmcoaW5wdXQpXG4gIH1cblxuICB0aGlzLmNyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscyB8fCB0aGlzLmNyZWRlbnRpYWxzIHx8ICdzYW1lLW9yaWdpbidcbiAgaWYgKG9wdGlvbnMuaGVhZGVycyB8fCAhdGhpcy5oZWFkZXJzKSB7XG4gICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuICB9XG4gIHRoaXMubWV0aG9kID0gbm9ybWFsaXplTWV0aG9kKG9wdGlvbnMubWV0aG9kIHx8IHRoaXMubWV0aG9kIHx8ICdHRVQnKVxuICB0aGlzLm1vZGUgPSBvcHRpb25zLm1vZGUgfHwgdGhpcy5tb2RlIHx8IG51bGxcbiAgdGhpcy5zaWduYWwgPSBvcHRpb25zLnNpZ25hbCB8fCB0aGlzLnNpZ25hbFxuICB0aGlzLnJlZmVycmVyID0gbnVsbFxuXG4gIGlmICgodGhpcy5tZXRob2QgPT09ICdHRVQnIHx8IHRoaXMubWV0aG9kID09PSAnSEVBRCcpICYmIGJvZHkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCb2R5IG5vdCBhbGxvd2VkIGZvciBHRVQgb3IgSEVBRCByZXF1ZXN0cycpXG4gIH1cbiAgdGhpcy5faW5pdEJvZHkoYm9keSlcblxuICBpZiAodGhpcy5tZXRob2QgPT09ICdHRVQnIHx8IHRoaXMubWV0aG9kID09PSAnSEVBRCcpIHtcbiAgICBpZiAob3B0aW9ucy5jYWNoZSA9PT0gJ25vLXN0b3JlJyB8fCBvcHRpb25zLmNhY2hlID09PSAnbm8tY2FjaGUnKSB7XG4gICAgICAvLyBTZWFyY2ggZm9yIGEgJ18nIHBhcmFtZXRlciBpbiB0aGUgcXVlcnkgc3RyaW5nXG4gICAgICB2YXIgcmVQYXJhbVNlYXJjaCA9IC8oWz8mXSlfPVteJl0qL1xuICAgICAgaWYgKHJlUGFyYW1TZWFyY2gudGVzdCh0aGlzLnVybCkpIHtcbiAgICAgICAgLy8gSWYgaXQgYWxyZWFkeSBleGlzdHMgdGhlbiBzZXQgdGhlIHZhbHVlIHdpdGggdGhlIGN1cnJlbnQgdGltZVxuICAgICAgICB0aGlzLnVybCA9IHRoaXMudXJsLnJlcGxhY2UocmVQYXJhbVNlYXJjaCwgJyQxXz0nICsgbmV3IERhdGUoKS5nZXRUaW1lKCkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBPdGhlcndpc2UgYWRkIGEgbmV3ICdfJyBwYXJhbWV0ZXIgdG8gdGhlIGVuZCB3aXRoIHRoZSBjdXJyZW50IHRpbWVcbiAgICAgICAgdmFyIHJlUXVlcnlTdHJpbmcgPSAvXFw/L1xuICAgICAgICB0aGlzLnVybCArPSAocmVRdWVyeVN0cmluZy50ZXN0KHRoaXMudXJsKSA/ICcmJyA6ICc/JykgKyAnXz0nICsgbmV3IERhdGUoKS5nZXRUaW1lKClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuUmVxdWVzdC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBSZXF1ZXN0KHRoaXMsIHtib2R5OiB0aGlzLl9ib2R5SW5pdH0pXG59XG5cbmZ1bmN0aW9uIGRlY29kZShib2R5KSB7XG4gIHZhciBmb3JtID0gbmV3IEZvcm1EYXRhKClcbiAgYm9keVxuICAgIC50cmltKClcbiAgICAuc3BsaXQoJyYnKVxuICAgIC5mb3JFYWNoKGZ1bmN0aW9uKGJ5dGVzKSB7XG4gICAgICBpZiAoYnl0ZXMpIHtcbiAgICAgICAgdmFyIHNwbGl0ID0gYnl0ZXMuc3BsaXQoJz0nKVxuICAgICAgICB2YXIgbmFtZSA9IHNwbGl0LnNoaWZ0KCkucmVwbGFjZSgvXFwrL2csICcgJylcbiAgICAgICAgdmFyIHZhbHVlID0gc3BsaXQuam9pbignPScpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG4gICAgICAgIGZvcm0uYXBwZW5kKGRlY29kZVVSSUNvbXBvbmVudChuYW1lKSwgZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSlcbiAgICAgIH1cbiAgICB9KVxuICByZXR1cm4gZm9ybVxufVxuXG5mdW5jdGlvbiBwYXJzZUhlYWRlcnMocmF3SGVhZGVycykge1xuICB2YXIgaGVhZGVycyA9IG5ldyBIZWFkZXJzKClcbiAgLy8gUmVwbGFjZSBpbnN0YW5jZXMgb2YgXFxyXFxuIGFuZCBcXG4gZm9sbG93ZWQgYnkgYXQgbGVhc3Qgb25lIHNwYWNlIG9yIGhvcml6b250YWwgdGFiIHdpdGggYSBzcGFjZVxuICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzIzMCNzZWN0aW9uLTMuMlxuICB2YXIgcHJlUHJvY2Vzc2VkSGVhZGVycyA9IHJhd0hlYWRlcnMucmVwbGFjZSgvXFxyP1xcbltcXHQgXSsvZywgJyAnKVxuICAvLyBBdm9pZGluZyBzcGxpdCB2aWEgcmVnZXggdG8gd29yayBhcm91bmQgYSBjb21tb24gSUUxMSBidWcgd2l0aCB0aGUgY29yZS1qcyAzLjYuMCByZWdleCBwb2x5ZmlsbFxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ2l0aHViL2ZldGNoL2lzc3Vlcy83NDhcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzc1MVxuICBwcmVQcm9jZXNzZWRIZWFkZXJzXG4gICAgLnNwbGl0KCdcXHInKVxuICAgIC5tYXAoZnVuY3Rpb24oaGVhZGVyKSB7XG4gICAgICByZXR1cm4gaGVhZGVyLmluZGV4T2YoJ1xcbicpID09PSAwID8gaGVhZGVyLnN1YnN0cigxLCBoZWFkZXIubGVuZ3RoKSA6IGhlYWRlclxuICAgIH0pXG4gICAgLmZvckVhY2goZnVuY3Rpb24obGluZSkge1xuICAgICAgdmFyIHBhcnRzID0gbGluZS5zcGxpdCgnOicpXG4gICAgICB2YXIga2V5ID0gcGFydHMuc2hpZnQoKS50cmltKClcbiAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gcGFydHMuam9pbignOicpLnRyaW0oKVxuICAgICAgICBoZWFkZXJzLmFwcGVuZChrZXksIHZhbHVlKVxuICAgICAgfVxuICAgIH0pXG4gIHJldHVybiBoZWFkZXJzXG59XG5cbkJvZHkuY2FsbChSZXF1ZXN0LnByb3RvdHlwZSlcblxuZXhwb3J0IGZ1bmN0aW9uIFJlc3BvbnNlKGJvZHlJbml0LCBvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSZXNwb25zZSkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQbGVhc2UgdXNlIHRoZSBcIm5ld1wiIG9wZXJhdG9yLCB0aGlzIERPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLicpXG4gIH1cbiAgaWYgKCFvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHt9XG4gIH1cblxuICB0aGlzLnR5cGUgPSAnZGVmYXVsdCdcbiAgdGhpcy5zdGF0dXMgPSBvcHRpb25zLnN0YXR1cyA9PT0gdW5kZWZpbmVkID8gMjAwIDogb3B0aW9ucy5zdGF0dXNcbiAgdGhpcy5vayA9IHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMFxuICB0aGlzLnN0YXR1c1RleHQgPSBvcHRpb25zLnN0YXR1c1RleHQgPT09IHVuZGVmaW5lZCA/ICcnIDogJycgKyBvcHRpb25zLnN0YXR1c1RleHRcbiAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuICB0aGlzLnVybCA9IG9wdGlvbnMudXJsIHx8ICcnXG4gIHRoaXMuX2luaXRCb2R5KGJvZHlJbml0KVxufVxuXG5Cb2R5LmNhbGwoUmVzcG9uc2UucHJvdG90eXBlKVxuXG5SZXNwb25zZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBSZXNwb25zZSh0aGlzLl9ib2R5SW5pdCwge1xuICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgc3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0LFxuICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHRoaXMuaGVhZGVycyksXG4gICAgdXJsOiB0aGlzLnVybFxuICB9KVxufVxuXG5SZXNwb25zZS5lcnJvciA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogMCwgc3RhdHVzVGV4dDogJyd9KVxuICByZXNwb25zZS50eXBlID0gJ2Vycm9yJ1xuICByZXR1cm4gcmVzcG9uc2Vcbn1cblxudmFyIHJlZGlyZWN0U3RhdHVzZXMgPSBbMzAxLCAzMDIsIDMwMywgMzA3LCAzMDhdXG5cblJlc3BvbnNlLnJlZGlyZWN0ID0gZnVuY3Rpb24odXJsLCBzdGF0dXMpIHtcbiAgaWYgKHJlZGlyZWN0U3RhdHVzZXMuaW5kZXhPZihzdGF0dXMpID09PSAtMSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHN0YXR1cyBjb2RlJylcbiAgfVxuXG4gIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogc3RhdHVzLCBoZWFkZXJzOiB7bG9jYXRpb246IHVybH19KVxufVxuXG5leHBvcnQgdmFyIERPTUV4Y2VwdGlvbiA9IGdsb2JhbC5ET01FeGNlcHRpb25cbnRyeSB7XG4gIG5ldyBET01FeGNlcHRpb24oKVxufSBjYXRjaCAoZXJyKSB7XG4gIERPTUV4Y2VwdGlvbiA9IGZ1bmN0aW9uKG1lc3NhZ2UsIG5hbWUpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlXG4gICAgdGhpcy5uYW1lID0gbmFtZVxuICAgIHZhciBlcnJvciA9IEVycm9yKG1lc3NhZ2UpXG4gICAgdGhpcy5zdGFjayA9IGVycm9yLnN0YWNrXG4gIH1cbiAgRE9NRXhjZXB0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKVxuICBET01FeGNlcHRpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRE9NRXhjZXB0aW9uXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaChpbnB1dCwgaW5pdCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIHJlcXVlc3QgPSBuZXcgUmVxdWVzdChpbnB1dCwgaW5pdClcblxuICAgIGlmIChyZXF1ZXN0LnNpZ25hbCAmJiByZXF1ZXN0LnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICByZXR1cm4gcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ0Fib3J0ZWQnLCAnQWJvcnRFcnJvcicpKVxuICAgIH1cblxuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuXG4gICAgZnVuY3Rpb24gYWJvcnRYaHIoKSB7XG4gICAgICB4aHIuYWJvcnQoKVxuICAgIH1cblxuICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICBzdGF0dXM6IHhoci5zdGF0dXMsXG4gICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0LFxuICAgICAgICBoZWFkZXJzOiBwYXJzZUhlYWRlcnMoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8ICcnKVxuICAgICAgfVxuICAgICAgb3B0aW9ucy51cmwgPSAncmVzcG9uc2VVUkwnIGluIHhociA/IHhoci5yZXNwb25zZVVSTCA6IG9wdGlvbnMuaGVhZGVycy5nZXQoJ1gtUmVxdWVzdC1VUkwnKVxuICAgICAgdmFyIGJvZHkgPSAncmVzcG9uc2UnIGluIHhociA/IHhoci5yZXNwb25zZSA6IHhoci5yZXNwb25zZVRleHRcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUobmV3IFJlc3BvbnNlKGJvZHksIG9wdGlvbnMpKVxuICAgICAgfSwgMClcbiAgICB9XG5cbiAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcbiAgICAgIH0sIDApXG4gICAgfVxuXG4gICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcbiAgICAgIH0sIDApXG4gICAgfVxuXG4gICAgeGhyLm9uYWJvcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdBYm9ydGVkJywgJ0Fib3J0RXJyb3InKSlcbiAgICAgIH0sIDApXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZml4VXJsKHVybCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHVybCA9PT0gJycgJiYgZ2xvYmFsLmxvY2F0aW9uLmhyZWYgPyBnbG9iYWwubG9jYXRpb24uaHJlZiA6IHVybFxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gdXJsXG4gICAgICB9XG4gICAgfVxuXG4gICAgeGhyLm9wZW4ocmVxdWVzdC5tZXRob2QsIGZpeFVybChyZXF1ZXN0LnVybCksIHRydWUpXG5cbiAgICBpZiAocmVxdWVzdC5jcmVkZW50aWFscyA9PT0gJ2luY2x1ZGUnKSB7XG4gICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAocmVxdWVzdC5jcmVkZW50aWFscyA9PT0gJ29taXQnKSB7XG4gICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoJ3Jlc3BvbnNlVHlwZScgaW4geGhyKSB7XG4gICAgICBpZiAoc3VwcG9ydC5ibG9iKSB7XG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYidcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHN1cHBvcnQuYXJyYXlCdWZmZXIgJiZcbiAgICAgICAgcmVxdWVzdC5oZWFkZXJzLmdldCgnQ29udGVudC1UeXBlJykgJiZcbiAgICAgICAgcmVxdWVzdC5oZWFkZXJzLmdldCgnQ29udGVudC1UeXBlJykuaW5kZXhPZignYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJykgIT09IC0xXG4gICAgICApIHtcbiAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcidcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaW5pdCAmJiB0eXBlb2YgaW5pdC5oZWFkZXJzID09PSAnb2JqZWN0JyAmJiAhKGluaXQuaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpKSB7XG4gICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhpbml0LmhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCBub3JtYWxpemVWYWx1ZShpbml0LmhlYWRlcnNbbmFtZV0pKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSwgdmFsdWUpXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0LnNpZ25hbCkge1xuICAgICAgcmVxdWVzdC5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhYm9ydFhocilcblxuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBET05FIChzdWNjZXNzIG9yIGZhaWx1cmUpXG4gICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgIHJlcXVlc3Quc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgYWJvcnRYaHIpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB4aHIuc2VuZCh0eXBlb2YgcmVxdWVzdC5fYm9keUluaXQgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IHJlcXVlc3QuX2JvZHlJbml0KVxuICB9KVxufVxuXG5mZXRjaC5wb2x5ZmlsbCA9IHRydWVcblxuaWYgKCFnbG9iYWwuZmV0Y2gpIHtcbiAgZ2xvYmFsLmZldGNoID0gZmV0Y2hcbiAgZ2xvYmFsLkhlYWRlcnMgPSBIZWFkZXJzXG4gIGdsb2JhbC5SZXF1ZXN0ID0gUmVxdWVzdFxuICBnbG9iYWwuUmVzcG9uc2UgPSBSZXNwb25zZVxufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCBcIi4vYXBwLnNjc3NcIjtcbmltcG9ydCAnd2hhdHdnLWZldGNoJztcblxuLyoqXG4gKiDQmtC70LDRgdGBINCz0LDQu9C10YDQtdC4LlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaXNpb25QaG90b0dhbGxlcnkge1xuICBnYWxsZXJ5Q29udGFpbmVyID0gbnVsbDtcbiAgcm9vdEVsZW1lbnQgPSBudWxsO1xuICB0b2tlbiA9IG51bGw7XG4gIGNvbnRyb2xzID0ge1xuICAgIGRpc2FibGVBbGw6IGZhbHNlLFxuICAgIHVwZGF0ZTogdHJ1ZSxcbiAgICB1cGxvYWQ6IHRydWUsXG4gICAgcmVtb3ZlOiB0cnVlXG4gIH07XG4gIG1hc3RlckFsYnVtID0gdHJ1ZTtcblxuICAvKipcbiAgICog0JrQvtC90YHRgtGA0YPQutGC0L7RgCDRjdC60LfQtdC80L/Qu9GP0YDQsCDQutC70LDRgdGB0LAg0LPQsNC70LXRgNC10LguXG4gICAqIEBwYXJhbSByb290IHtzdHJpbmd9IElEINC60L7RgNC90LXQstC+0LPQviDRjdC70LXQvNC10L3RgtCwLCDQutGD0LTQsCDQsdGD0LTQtdGCINGA0LXQvdC00LXRgNC40YLRjNGB0Y8g0LPQsNC70LXRgNC10Y8uXG4gICAqIEBwYXJhbSBlbXBsb3llZUlkIHtudW1iZXJ8c3RyaW5nfSBJRCDRgdC+0YLRgNGD0LTQvdC40LrQsC5cbiAgICogQHBhcmFtIHZpc2lvblBlcnNvbklkIHtudW1iZXJ8c3RyaW5nfSBJRCDRgdC+0YLRgNGD0LTQvdC40LrQsCDQsNGD0YLRgdC+0YDRgdC10YDQsC5cbiAgICogQHBhcmFtIHBlcnNvbklkIHtudW1iZXJ8c3RyaW5nfSBJRCDRgdC+0YLRgNGD0LTQvdC40LrQsCDQsNGD0YLRgdC+0YDRgdC10YDQsC5cbiAgICogQHBhcmFtIHRva2VuIHtzdHJpbmd9IENTUkYt0YLQvtC60LXQvSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8uXG4gICAqIEBwYXJhbSBjb250cm9scyB7b2JqZWN0fSDQndCw0YHRgtGA0L7QudC60LAg0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDRjdC70LXQvNC10L3RgtC+0LIg0YPQv9GA0LDQstC70LXQvdC40Y8uXG4gICAqIEBwYXJhbSBjb250cm9scy5kaXNhYmxlQWxsIHtib29sZWFufSDQntGC0LrQu9GO0YfQuNGC0Ywg0LLRgdC1INGN0LvQtdC80LXQvdGC0Ysg0YPQv9GA0LDQstC70LXQvdC40Y8uXG4gICAqIEBwYXJhbSBjb250cm9scy51cGRhdGUge2Jvb2xlYW59INCe0YLQvtCx0YDQsNC20LXQvdC40LUg0LrQvdC+0L/QutC4INC+0LHQvdC+0LLQu9C10L3QuNGPINGE0L7RgtC+0LPRgNCw0YTQuNC4ICjRg9GB0YLQsNC90L7QstC60LAg0L7RgdC90L7QstC90L7QuSkuXG4gICAqIEBwYXJhbSBjb250cm9scy51cGxvYWQge2Jvb2xlYW59INCe0YLQvtCx0YDQsNC20LXQvdC40LUg0LrQvdC+0L/QutC4INC30LDQs9GA0YPQt9C60Lgg0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqIEBwYXJhbSBjb250cm9scy5yZW1vdmUge2Jvb2xlYW59INCe0YLQvtCx0YDQsNC20LXQvdC40LUg0LrQvdC+0L/QutC4INGD0LTQsNC70LXQvdC40Y8g0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqIEBwYXJhbSBtYXN0ZXJBbGJ1bSB7Ym9vbGVhbn0g0JfQsNCz0YDRg9C30LrQsCDRhNC+0YLQvtCz0YDQsNGE0LjQuSDQuNC3INC80LDRgdGC0LXRgC3QsNC70LHQvtC80LAuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgICAgICAgICAgICAgcm9vdCxcbiAgICAgICAgICAgICAgICBlbXBsb3llZUlkLFxuICAgICAgICAgICAgICAgIHZpc2lvblBlcnNvbklkLFxuICAgICAgICAgICAgICAgIHBlcnNvbklkLFxuICAgICAgICAgICAgICAgIHRva2VuLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xzLFxuICAgICAgICAgICAgICAgIG1hc3RlckFsYnVtID0gdHJ1ZVxuICAgICAgICAgICAgICB9KSB7XG4gICAgaWYgKCFyb290KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCLQndC1INGD0LrQsNC30LDQvSBJRCDQutC+0YDQvdC10LLQvtCz0L4g0Y3Qu9C10LzQtdC90YLQsCDQtNC70Y8g0LPQsNC70LXRgNC10LghXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHJvb3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocm9vdCk7XG5cbiAgICBpZiAoISFyb290RWxlbWVudCkge1xuICAgICAgdGhpcy5yb290RWxlbWVudCA9IHJvb3RFbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCLQn9GA0L7QstC10YDRjNGC0LUg0YPQutCw0LfQsNC90L3Ri9C5IElEINC60L7RgNC90LXQstC+0LPQviDRjdC70LXQvNC10L3RgtCwINC00LvRjyDQs9Cw0LvQtdGA0LXQuCFcIik7XG4gICAgfVxuXG4gICAgaWYgKCFlbXBsb3llZUlkICYmICF2aXNpb25QZXJzb25JZCAmJiAhcGVyc29uSWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcItCd0LUg0YPQutCw0LfQsNC9IElEINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQvdCwINC/0L7RgNGC0LDQu9C1IFZpc2lvblwiKTtcbiAgICB9XG5cbiAgICB0aGlzLmVtcGxveWVlID0ge1xuICAgICAgaWQ6IG51bGwsXG4gICAgICBwZXJzb25JZDogbnVsbCxcbiAgICAgIHZpc2lvblBlcnNvbklkOiBudWxsLFxuICAgIH07XG5cbiAgICB0aGlzLmVtcGxveWVlSWQgPSBlbXBsb3llZUlkO1xuICAgIHRoaXMudmlzaW9uUGVyc29uSWQgPSB2aXNpb25QZXJzb25JZDtcbiAgICB0aGlzLnBlcnNvbklkID0gcGVyc29uSWQ7XG4gICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgIHRoaXMuY29udHJvbHMgPSBjb250cm9scztcbiAgICB0aGlzLm1hc3RlckFsYnVtID0gbWFzdGVyQWxidW07XG5cbiAgICB0aGlzLmRyYXcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQndCw0LfQvdCw0YfQsNC10LzRi9C5INC80LXRgtC+0LQg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0L7RiNC40LHQvtC6LlxuICAgKiBAdHlwZSB7bnVsbHxGdW5jdGlvbn0g0KTRg9C90LrRhtC40Y8g0L7QsdGA0LDQsdC+0YLRh9C40Log0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDQvtGI0LjQsdC+0LouXG4gICAqL1xuICBlcnJvckZ1bmN0aW9uID0gbnVsbDtcbiAgc3VjY2Vzc0Z1bmN0aW9uID0gbnVsbDtcblxuICAvKipcbiAgICog0J/QvtC70YPRh9C10L3QuNC1INC80LXRgtC+0LTQsCDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDQvtGI0LjQsdC+0LouXG4gICAqIEB0eXBlIHtudWxsfEZ1bmN0aW9ufSDQpNGD0L3QutGG0LjRjyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC+0YjQuNCx0L7Qui5cbiAgICovXG4gIGdldCBlcnJvckZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmVycm9yRnVuY3Rpb247XG4gIH1cblxuICAvKipcbiAgICog0J3QsNC30L3QsNGH0LXQvdC40LUg0LzQtdGC0L7QtNCwINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC+0YjQuNCx0L7Qui5cbiAgICogQHBhcmFtIGVycm9yRnVuY3Rpb24ge251bGx8RnVuY3Rpb259INCk0YPQvdC60YbQuNGPINC+0LHRgNCw0LHQvtGC0YfQuNC6INC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0L7RiNC40LHQvtC6LlxuICAgKi9cbiAgc2V0IGVycm9yRnVuY3Rpb24oZXJyb3JGdW5jdGlvbikge1xuICAgIGlmIChlcnJvckZ1bmN0aW9uKSB7XG4gICAgICB0aGlzLmVycm9yRnVuY3Rpb24gPSBlcnJvckZ1bmN0aW9uO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDQn9C+0LvRg9GH0LXQvdC40LUg0LzQtdGC0L7QtNCwINC00LvRjyDQvtCx0YDQsNCx0L7RgtC60Lgg0YPRgdC/0LXRiNC90L7Qs9C+INC00L7QsdCw0LLQu9C10L3QuNGPL9GD0LTQsNC70LXQvdC40Y8g0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqIEB0eXBlIHtudWxsfEZ1bmN0aW9ufSDQpNGD0L3QutGG0LjRjyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRg9GB0L/QtdGI0L3QvtCz0L4g0LTQvtCx0LDQstC70LXQvdC40Y8v0YPQtNCw0LvQtdC90LjRjyDRhNC+0YLQvtCz0YDQsNGE0LjQuC5cbiAgICovXG4gIGdldCBzdWNjZXNzRnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3VjY2Vzc0Z1bmN0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqINCd0LDQt9C90LDRh9C10L3QuNC1INC80LXRgtC+0LTQsCDQtNC70Y8g0L7QsdGA0LDQsdC+0YLQutC4INGD0YHQv9C10YjQvdC+0LPQviDQtNC+0LHQsNCy0LvQtdC90LjRjy/Rg9C00LDQu9C10L3QuNGPINGE0L7RgtC+0LPRgNCw0YTQuNC4LlxuICAgKiBAcGFyYW0gc3VjY2Vzc0Z1bmN0aW9uIHtudWxsfEZ1bmN0aW9ufSDQpNGD0L3QutGG0LjRjyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQvtCx0YDQsNCx0L7RgtC60Lgg0YPRgdC/0LXRiNC90L7Qs9C+INC00L7QsdCw0LLQu9C10L3QuNGPL9GD0LTQsNC70LXQvdC40Y8g0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqL1xuICBzZXQgc3VjY2Vzc0Z1bmN0aW9uKHN1Y2Nlc3NGdW5jdGlvbikge1xuICAgIGlmIChzdWNjZXNzRnVuY3Rpb24pIHtcbiAgICAgIHRoaXMuc3VjY2Vzc0Z1bmN0aW9uID0gc3VjY2Vzc0Z1bmN0aW9uO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDQntCx0L3QvtCy0LvQtdC90LjQtSDQv9Cw0YDQsNC80LXRgtGA0L7QsiDQs9Cw0LvQtdGA0LXQuC5cbiAgICogQHBhcmFtIGVtcGxveWVlSWQge251bWJlcnxudW1iZXJ9IElEINGB0L7RgtGA0YPQtNC90LjQutCwLlxuICAgKiBAcGFyYW0gdG9rZW4ge3N0cmluZ30gQ1NSRi3RgtC+0LrQtdC9INGB0LXRgdGB0Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPLlxuICAgKi9cbiAgdXBkYXRlKHtlbXBsb3llZUlkLCB0b2tlbn0pIHtcbiAgICB0aGlzLmVtcGxveWVlSWQgPSBlbXBsb3llZUlkO1xuICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcblxuICAgIHRoaXMuZHJhdygpO1xuICB9XG5cbiAgLyoqXG4gICAqINCf0L7Qu9GD0YfQuNGC0YwgSUQg0YHQvtGC0YDRg9C00L3QuNC60LAuXG4gICAqIEByZXR1cm4ge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwLlxuICAgKi9cbiAgZ2V0IGVtcGxveWVlSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW1wbG95ZWUuaWQ7XG4gIH1cblxuICAvKipcbiAgICog0J3QsNC30L3QsNGH0LXQvdC40LUg0Y3QutC30LXQvNC/0LvRj9GA0YMg0LPQsNC70LXRgNC10LggSUQg0YHQvtGC0YDRg9C00L3QuNC60LAuXG4gICAqIEBwYXJhbSBlbXBsb3llZUlkIHtudW1iZXJ8c3RyaW5nfSBJRCDRgdC+0YLRgNGD0LTQvdC40LrQsC5cbiAgICovXG4gIHNldCBlbXBsb3llZUlkKGVtcGxveWVlSWQpIHtcbiAgICBpZiAoZW1wbG95ZWVJZCkge1xuICAgICAgdGhpcy5lbXBsb3llZS5pZCA9IGVtcGxveWVlSWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqINCf0L7Qu9GD0YfQuNGC0YwgSUQg0YHQvtGC0YDRg9C00L3QuNC60LAg0LDRg9GC0YHQvtGA0YHQtdGA0LAuXG4gICAqIEByZXR1cm4ge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKi9cbiAgZ2V0IHZpc2lvblBlcnNvbklkKCkge1xuICAgIHJldHVybiB0aGlzLmVtcGxveWVlLnZpc2lvblBlcnNvbklkO1xuICB9XG5cbiAgLyoqXG4gICAqINCd0LDQt9C90LDRh9C10L3QuNC1INGN0LrQt9C10LzQv9C70Y/RgNGDINCz0LDQu9C10YDQtdC4IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKiBAcGFyYW0gdmlzaW9uUGVyc29uSWQge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKi9cbiAgc2V0IHZpc2lvblBlcnNvbklkKHZpc2lvblBlcnNvbklkKSB7XG4gICAgaWYgKHZpc2lvblBlcnNvbklkKSB7XG4gICAgICB0aGlzLmVtcGxveWVlLnZpc2lvblBlcnNvbklkID0gdmlzaW9uUGVyc29uSWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqINCf0L7Qu9GD0YfQuNGC0YwgSUQg0YHQvtGC0YDRg9C00L3QuNC60LAg0LDRg9GC0YHQvtGA0YHQtdGA0LAuXG4gICAqIEByZXR1cm4ge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKi9cbiAgZ2V0IHBlcnNvbklkKCkge1xuICAgIHJldHVybiB0aGlzLmVtcGxveWVlLnBlcnNvbklkO1xuICB9XG5cbiAgLyoqXG4gICAqINCd0LDQt9C90LDRh9C10L3QuNC1INGN0LrQt9C10LzQv9C70Y/RgNGDINCz0LDQu9C10YDQtdC4IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKiBAcGFyYW0gcGVyc29uSWQge251bWJlcnxzdHJpbmd9IElEINGB0L7RgtGA0YPQtNC90LjQutCwINCw0YPRgtGB0L7RgNGB0LXRgNCwLlxuICAgKi9cbiAgc2V0IHBlcnNvbklkKHBlcnNvbklkKSB7XG4gICAgaWYgKHBlcnNvbklkKSB7XG4gICAgICB0aGlzLmVtcGxveWVlLnBlcnNvbklkID0gcGVyc29uSWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqINCa0L7RgNC90LXQstC+0Lkg0Y3Qu9C10LzQtdC90YIsINCyINC60L7RgtC+0YDRi9C5INCx0YPQtNC10YIg0YDQtdC90LTQtdGA0LjRgtGM0YHRjyDQs9Cw0LvQtdGA0LXRjy5cbiAgICogQHJldHVybiB7bnVsbHxFbGVtZW50fSDQmtC+0YDQvdC10LLQvtC5INGN0LvQtdC80LXQvdGCINC00LvRjyDRgNC10L3QtNC10YDQsC5cbiAgICovXG4gIGdldCByb290RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5yb290RWxlbWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiDQn9C+0LvRg9GH0LjRgtGMIENTUkYt0YLQvtC60LXQvSDRgdC10YHRgdC40Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPLlxuICAgKiBAcmV0dXJuIHtudWxsfHN0cmluZ30gQ1NSRi3RgtC+0LrQtdC9INGB0LXRgdGB0LjQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8uXG4gICAqL1xuICBnZXQgdG9rZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9rZW47XG4gIH1cblxuICAvKipcbiAgICog0J3QsNC30L3QsNGH0LjRgtGMIENTUkYt0YLQvtC60LXQvSDRgdC10YHRgdC40Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPLlxuICAgKiBAcGFyYW0gdG9rZW4ge3N0cmluZ30gQ1NSRi3RgtC+0LrQtdC9INGB0LXRgdGB0LjQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8uXG4gICAqL1xuICBzZXQgdG9rZW4odG9rZW4pIHtcbiAgICBpZiAodG9rZW4pIHtcbiAgICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog0J/QvtC70YPRh9C40YLRjCDQt9C90LDRh9C10L3QuNC1INGB0L7RgdGC0L7Rj9C90LjRjyDQutC+0L3RgtGA0L7Qu9C+0LIuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59INCh0L7RgdGC0L7Rj9C90LjQtSDQutC+0L3RgtGA0L7Qu9C+0LIuXG4gICAqL1xuICBnZXQgY29udHJvbHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbHM7XG4gIH1cblxuICAvKipcbiAgICog0J3QsNC30L3QsNGH0LjRgtGMINC30L3QsNGH0LXQvdC40LUg0YHQvtGB0YLQvtGP0L3QuNGPINC60L7QvdGC0YDQvtC70L7Qsi5cbiAgICogQHBhcmFtIHZhbHVlIHtib29sZWFufSDQktC60LvRjtGH0LjRgtGML9C+0YLQutC70Y7Rh9C40YLRjCDQutC+0L3RgtGA0L7Qu9GLLlxuICAgKi9cbiAgc2V0IGNvbnRyb2xzKHZhbHVlKSB7XG4gICAgdGhpcy5jb250cm9scyA9IHtcbiAgICAgIC4uLnRoaXMuY29udHJvbHMsXG4gICAgICAuLi52YWx1ZVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICog0J/QvtC70YPRh9C40YLRjCDRhNC70LDQsyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgtC+0LPRgNCw0YTQuNC5INC40Lcg0LzQsNGB0YLQtdGALdCw0LvRjNCx0L7QvNCwLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSDQodC+0YHRgtC+0Y/QvdC40LUg0YTQu9Cw0LPQsCDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgtC+0LPRgNCw0YTQuNC5INC40Lcg0LzQsNGB0YLQtdGALdCw0LvRjNCx0L7QvNCwLlxuICAgKi9cbiAgZ2V0IG1hc3RlckFsYnVtKCkge1xuICAgIHJldHVybiB0aGlzLm1hc3RlckFsYnVtO1xuICB9XG5cbiAgLyoqXG4gICAqINCd0LDQt9C90LDRh9C40YLRjCDRhNC70LDQsyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgtC+0LPRgNCw0YTQuNC5INC40Lcg0LzQsNGB0YLQtdGALdCw0LvRjNCx0L7QvNCwLlxuICAgKiBAcGFyYW0gdmFsdWUge2Jvb2xlYW59INCS0LrQu9GO0YfQuNGC0Ywv0LLRi9C60LvRjtGH0LjRgtGMINC30LDQs9GA0YPQt9C60YMg0LjQtyDQvNCw0YHRgtC10YAt0LDQu9GM0LHQvtC80LAuXG4gICAqL1xuICBzZXQgbWFzdGVyQWxidW0odmFsdWUpIHtcbiAgICB0aGlzLm1hc3RlckFsYnVtID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICog0J7QsdGA0LDQsdC+0YLRh9C40Log0L7RiNC40LHQvtC6LlxuICAgKiBAcGFyYW0gcGFyYW1zLm1lc3NhZ2Uge3N0cmluZ30g0KHQvtC+0LHRidC10L3QuNC1INC+0LEg0L7RiNC40LHQutC1LlxuICAgKiBAcGFyYW0gcGFyYW1zLmJsb2NraW5nRXJyb3JNZXNzYWdlIHtzdHJpbmd9INCR0LvQvtC60LjRgNGD0Y7RidC10LUg0L/QvtGC0L7QuiDRgdC+0L7QsdGJ0LXQvdC40LUg0L7QsSDQvtGI0LjQsdC60LUuXG4gICAqL1xuICBoYW5kbGVFcnJvcihwYXJhbXMpIHtcbiAgICBjb25zdCB7bWVzc2FnZSwgYmxvY2tpbmdFcnJvck1lc3NhZ2V9ID0gcGFyYW1zO1xuXG4gICAgaWYgKHRoaXMuZXJyb3JGdW5jdGlvbikge1xuICAgICAgbGV0IG1lc3NhZ2VTdHJpbmcgPSBcIlwiO1xuXG4gICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZmF1bHRzdHJpbmcpIHtcbiAgICAgICAgICBtZXNzYWdlU3RyaW5nID0gbWVzc2FnZS5mYXVsdHN0cmluZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBPYmplY3Qua2V5cyhtZXNzYWdlKVxuICAgICAgICAgICAgLnJldmVyc2UoKVxuICAgICAgICAgICAgLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgbWVzc2FnZVN0cmluZyArPSBgJHttZXNzYWdlW2tleV19PGJyLz5gO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gbWVzc2FnZVN0cmluZy5sZW5ndGhcbiAgICAgICAgPyBtZXNzYWdlU3RyaW5nXG4gICAgICAgIDogSlNPTi5zdHJpbmdpZnkobWVzc2FnZSk7XG5cbiAgICAgIHRoaXMuZXJyb3JGdW5jdGlvbihlcnJvck1lc3NhZ2UsIFwi0J7RiNC40LHQutCwXCIpO1xuICAgIH0gZWxzZSBpZiAoYmxvY2tpbmdFcnJvck1lc3NhZ2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihibG9ja2luZ0Vycm9yTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRg9GB0L/QtdGI0L3QvtCz0L4g0LTQvtCx0LDQstC70LXQvdC40Y8v0YPQtNCw0LvQtdC90LjRjyDRhNC+0YLQvtCz0YDQsNGE0LjQuC5cbiAgIC8vICogQHBhcmFtIHBhcmFtcy5hY3Rpb25Db2RlIHtzdHJpbmd9INCa0L7QtCDQtNC10LnRgdGC0LLQuNGPICgzNiAtINC00L7QsdCw0LLQu9C10L3QuNC1INGE0L7RgtC+LCAzNyAtINGD0LTQsNC70LXQvdC40LUg0YTQvtGC0L4pLlxuICAgLy8gKiBAcGFyYW0gcGFyYW1zLmFjdGlvbkRlc2NyaXB0aW9uIHtvYmplY3R9INC/0LDRgNCw0LzQtdGC0YDRiyDQu9C+0LPQsFxuICAgKi9cbiAgaGFuZGxlU3VjY2VzcyhwYXJhbXMpIHtcbiAgICBpZih0aGlzLnN1Y2Nlc3NGdW5jdGlvbikge1xuICAgICAgdGhpcy5zdWNjZXNzRnVuY3Rpb24ocGFyYW1zKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog0J7QsdGR0YDRgtC60LAg0LTQu9GPINC30LDQv9GA0L7RgdC+0LIg0LogQVBJLlxuICAgKiBAcGFyYW0gcmVxdWVzdFBhdGgge3N0cmluZ30g0J3QsNC30LLQsNC90LjQtSDQvNC10YLQvtC00LAgQVBJLlxuICAgKiBAcGFyYW0gcmVxdWVzdEJvZHkge29iamVjdH0g0J/QsNGA0LDQvNC10YLRgNGLINC30LDQv9GA0L7RgdCwLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59INCf0YDQvtC80LjRgSDQt9Cw0L/RgNC+0YHQsC5cbiAgICovXG4gIHJlcXVlc3Qoe3JlcXVlc3RQYXRoLCByZXF1ZXN0Qm9keX0pIHtcbiAgICBjb25zdCByZXF1ZXN0RGVmYXVsdHMgPSB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgbW9kZTogXCJzYW1lLW9yaWdpblwiLFxuICAgICAgY3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIFwiWC1DU1JGVG9rZW5cIjogdGhpcy50b2tlblxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxuICAgIH07XG5cbiAgICByZXR1cm4gZmV0Y2goYC9hcGkvdjIvdmlzaW9uLyR7cmVxdWVzdFBhdGh9L2AsIHJlcXVlc3REZWZhdWx0cyk7XG4gIH1cblxuICAvKipcbiAgICog0JLRi9Cz0YDRg9C30LrQsCDQstGB0LXRhSDRhNC+0YLQvtCz0YDQsNGE0LjQuSDRgSDQv9C+0YDRgtCw0LvQsCBWaXNpb24uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn0g0J/RgNC+0LzQuNGBINGBINGA0LXQt9GD0LvRjNGC0LDRgtC+0Lwg0LLRi9C/0L7Qu9C90LXQvdC40Y8g0LfQsNC/0YDQvtGB0LAuXG4gICAqL1xuICBnZXRQaG90b3MoKSB7XG4gICAgY29uc3QgZW1wbG95ZWUgPSB7fTtcblxuICAgIGlmICh0aGlzLmVtcGxveWVlSWQgJiYgIXRoaXMudmlzaW9uUGVyc29uSWQpIHtcbiAgICAgIGVtcGxveWVlLmVtcGxveWVlSWQgPSB0aGlzLmVtcGxveWVlSWQ7XG4gICAgfSBlbHNlIGlmICh0aGlzLnZpc2lvblBlcnNvbklkKSB7XG4gICAgICBlbXBsb3llZS52aXNpb25fcGVyc29uX2lkID0gdGhpcy52aXNpb25QZXJzb25JZDtcbiAgICB9IGVsc2UgaWYgKHRoaXMucGVyc29uSWQpIHtcbiAgICAgIGVtcGxveWVlLnBlcnNvbklkID0gdGhpcy5wZXJzb25JZDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgIHJlcXVlc3RQYXRoOiBcImdldF9waG90b3NcIixcbiAgICAgIHJlcXVlc3RCb2R5OiB7XG4gICAgICAgIC4uLmVtcGxveWVlLFxuICAgICAgICBtYXN0ZXJBbGJ1bTogdGhpcy5tYXN0ZXJBbGJ1bVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqINCX0LDQv9GA0L7RgSDQvdCwINC00L7QsdCw0LLQu9C10L3QuNC1ICjQt9Cw0LPRgNGD0LfQutGDKSDRhNC+0YLQvtCz0YDQsNGE0LjQuC5cbiAgICogQHBhcmFtIGltYWdlIHtCdWZmZXJFbmNvZGluZ30g0KTQvtGC0L7Qs9GA0LDRhNC40Lgg0LIg0YTQvtGA0LzQsNGC0LUgQmFzZTY0LlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59INCf0YDQvtC80LjRgSDRgSDRgNC10LfRg9C70YzRgtCw0YLQvtC8INCy0YvQv9C+0LvQvdC10L3QuNGPINC30LDQv9GA0L7RgdCwLlxuICAgKi9cbiAgYWRkUGhvdG8oaW1hZ2UpIHtcbiAgICB0aGlzLnRvZ2dsZU92ZXJsYXlNZXNzYWdlKCfQl9Cw0LPRgNGD0LfQutCwLi4uJyk7XG5cbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgIHJlcXVlc3RQYXRoOiBcImFkZF9waG90b1wiLFxuICAgICAgcmVxdWVzdEJvZHk6IHtcbiAgICAgICAgZW1wbG95ZWVJZDogdGhpcy5lbXBsb3llZUlkLFxuICAgICAgICBpbWFnZVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqINCX0LDQv9GA0L7RgSDQvdCwINGD0LTQsNC70LXQvdC40LUg0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqIEBwYXJhbSBwaG90b0lkIHtOdW1iZXJ9IElEINGE0L7RgtC+0LPRgNCw0YTQuNC4INC90LAg0L/QvtGA0YLQsNC70LUgVmlzaW9uLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59INCf0YDQvtC80LjRgSDRgSDRgNC10LfRg9C70YzRgtCw0YLQvtC8INCy0YvQv9C+0LvQvdC10L3QuNGPINC30LDQv9GA0L7RgdCwLlxuICAgKi9cbiAgZGVsZXRlUGhvdG8ocGhvdG9JZCkge1xuICAgIHRoaXMudG9nZ2xlT3ZlcmxheU1lc3NhZ2UoJ9Cj0LTQsNC70LXQvdC40LUg0YTQvtGC0L7Qs9GA0LDRhNC40LguLi4nKTtcblxuICAgIGNvbnN0IGVtcGxveWVlSWQgPSB0aGlzLmVtcGxveWVlSWQ7XG5cbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgIHJlcXVlc3RQYXRoOiBcImRlbGV0ZV9waG90b1wiLFxuICAgICAgcmVxdWVzdEJvZHk6IHtcbiAgICAgICAgZW1wbG95ZWVfaWQ6IGVtcGxveWVlSWQsXG4gICAgICAgIHBob3RvX2lkOiBwaG90b0lkXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog0JfQsNC/0YDQvtGBINC90LAg0L7QsdC90L7QstC70LXQvdC40LUg0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqIEBwYXJhbSBwaG90b0lkIHtOdW1iZXJ9IElEINGE0L7RgtC+0LPRgNCw0YTQuNC4INC90LAg0L/QvtGA0YLQsNC70LUgVmlzaW9uLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59INCf0YDQvtC80LjRgSDRgSDRgNC10LfRg9C70YzRgtCw0YLQvtC8INCy0YvQv9C+0LvQvdC10L3QuNGPINC30LDQv9GA0L7RgdCwLlxuICAgKi9cbiAgdXBkYXRlUGhvdG8ocGhvdG9JZCkge1xuICAgIHRoaXMudG9nZ2xlT3ZlcmxheU1lc3NhZ2UoJ9Ce0LHQvdC+0LLQu9C10L3QuNC1INGE0L7RgtC+0LPRgNCw0YTQuNC4Li4uJyk7XG5cbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgIHJlcXVlc3RQYXRoOiBcInVwZGF0ZV9waG90b1wiLFxuICAgICAgcmVxdWVzdEJvZHk6IHtcbiAgICAgICAgZW1wbG95ZWVJZDogdGhpcy5lbXBsb3llZUlkLFxuICAgICAgICBwaG90b19pZDogcGhvdG9JZFxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqINCX0LDQv9GA0L7RgSDQvdCwINGD0YHRgtCw0L3QvtCy0LrRgyDRhNC+0YLQvtCz0YDQsNGE0LjQuCDQutCw0Log0L7RgdC90L7QstC90L7QuSDQtNC70Y8g0YHQvtGC0YDRg9C00L3QuNC60LAuXG4gICAqIEBwYXJhbSBwaG90b0lkIHtOdW1iZXJ9IElEINGE0L7RgtC+0LPRgNCw0YTQuNC4INC90LAg0L/QvtGA0YLQsNC70LUgVmlzaW9uLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59INCf0YDQvtC80LjRgSDRgSDRgNC10LfRg9C70YzRgtCw0YLQvtC8INCy0YvQv9C+0LvQvdC10L3QuNGPINC30LDQv9GA0L7RgdCwLlxuICAgKi9cbiAgc2V0QXNNYWluUGhvdG8ocGhvdG9JZCkge1xuICAgIHRoaXMudG9nZ2xlT3ZlcmxheU1lc3NhZ2UoJ9Ce0LHQvdC+0LLQu9C10L3QuNC1INC+0YHQvdC+0LLQvdC+0Lkg0YTQvtGC0L7Qs9GA0LDRhNC40LguLi4nKTtcblxuICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgcmVxdWVzdFBhdGg6IFwic2V0X21haW5fcGhvdG9cIixcbiAgICAgIHJlcXVlc3RCb2R5OiB7XG4gICAgICAgIGVtcGxveWVlSWQ6IHRoaXMuZW1wbG95ZWVJZCxcbiAgICAgICAgcGhvdG9JZDogcGhvdG9JZFxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqINCf0LXRgNC10LrQu9GO0YfQsNGC0LXQu9GMINCx0LvQvtC60LjRgNGD0Y7RidC10LPQviDRgdC+0L7QsdGJ0LXQvdC40Y8uXG4gICAqIEBwYXJhbSBtZXNzYWdlIHtzdHJpbmd8dW5kZWZpbmVkfG51bGx9INCh0L7QvtCx0YnQtdC90LjQtS5cbiAgICovXG4gIHRvZ2dsZU92ZXJsYXlNZXNzYWdlKG1lc3NhZ2UgPSBudWxsKSB7XG4gICAgY29uc3Qge2dhbGxlcnlDb250YWluZXJ9ID0gdGhpcztcblxuICAgIGlmICghZ2FsbGVyeUNvbnRhaW5lcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfQndC1INC90LDQudC00LXQvdCwINC60L7RgNC90LXQstC+0Lkg0Y3Qu9C10LzQtdC90YIg0LPQsNC70LXRgNC10LgnKTtcbiAgICB9XG5cbiAgICBpZiAobWVzc2FnZSkge1xuICAgICAgZ2FsbGVyeUNvbnRhaW5lci5kYXRhc2V0Lm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgZ2FsbGVyeUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd2aXNpb24tcGhvdG8tZ2FsbGVyeS0tbWVzc2FnZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnYWxsZXJ5Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2lvbi1waG90by1nYWxsZXJ5LS1tZXNzYWdlJyk7XG4gICAgICBnYWxsZXJ5Q29udGFpbmVyLmRhdGFzZXQubWVzc2FnZSA9ICcnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDQntGC0YDQuNGB0L7QstC60LAgRE9NINCz0LDQu9C10YDQtdC40LguXG4gICAqL1xuICBkcmF3KHBhcmFtcykge1xuICAgIGNvbnN0IHJvb3RFbGVtZW50ID0gdGhpcy5yb290RWxlbWVudDtcblxuICAgIHJvb3RFbGVtZW50LmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJ2aXNpb24tcGhvdG8tZ2FsbGVyeVwiPlxuICAgICAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiBjbGFzcz1cInZpc2lvbi1waG90by1nYWxsZXJ5X19maWxlLWZpZWxkXCIgdGFiaW5kZXg9XCItMVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwidmlzaW9uLXBob3RvLWdhbGxlcnlfX2l0ZW0gdmlzaW9uLXBob3RvLWdhbGxlcnlfX2l0ZW0tLW1haW5cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidmctbWFpbi1waG90b1wiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInZpc2lvbi1waG90by1nYWxsZXJ5X19pdGVtXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZnLWdhbGxlcnlcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgY29uc3QgZ2FsbGVyeUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudmlzaW9uLXBob3RvLWdhbGxlcnlcIik7XG5cbiAgICB0aGlzLmdhbGxlcnlDb250YWluZXIgPSBnYWxsZXJ5Q29udGFpbmVyO1xuICAgIHRoaXMudG9nZ2xlT3ZlcmxheU1lc3NhZ2UoJ9CX0LDQs9GA0YPQt9C60LAuLi4nKTtcblxuICAgIGNvbnN0IG1haW5QaG90b0NvbnRhaW5lciA9IHJvb3RFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudmctbWFpbi1waG90b1wiKTtcbiAgICBjb25zdCBnYWxsZXJ5ID0gcm9vdEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi52Zy1nYWxsZXJ5XCIpO1xuICAgIGNvbnN0IHt1cGxvYWR9ID0gdGhpcy5jb250cm9scztcblxuICAgIHRoaXMuZ2V0UGhvdG9zKClcbiAgICAgIC50aGVuKFxuICAgICAgICByZXNwb25zZSA9PiB7XG4gICAgICAgICAgbWFpblBob3RvQ29udGFpbmVyLmlubmVySFRNTCA9IHRoaXMuY3JlYXRlUGhvdG9FbGVtZW50KHtcbiAgICAgICAgICAgIG1haW46IHRydWUsXG4gICAgICAgICAgICBlbXB0eTogdHJ1ZSxcbiAgICAgICAgICAgIHBob3RvSWQ6IG51bGxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmICh1cGxvYWQpIHtcbiAgICAgICAgICAgIGdhbGxlcnkuaW5uZXJIVE1MID0gdGhpcy5jcmVhdGVQaG90b0VsZW1lbnQoe1xuICAgICAgICAgICAgICBtYWluOiBmYWxzZSxcbiAgICAgICAgICAgICAgZW1wdHk6IHRydWUsXG4gICAgICAgICAgICAgIHBob3RvSWQ6IG51bGxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWFpblBob3RvQ29udGFpbmVyLmlubmVySFRNTCA9IHRoaXMuY3JlYXRlTm9QaG90b0VsZW1lbnQoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmluaXRFdmVudHMoKTtcbiAgICAgICAgICB0aGlzLnRvZ2dsZU92ZXJsYXlNZXNzYWdlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yID0+IHtcbiAgICAgICAgICB0aGlzLnRvZ2dsZU92ZXJsYXlNZXNzYWdlKCk7XG4gICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuaW5pdEV2ZW50cygpO1xuICAgICAgICB9XG4gICAgICApXG4gICAgICAudGhlbihcbiAgICAgICAgcmVzcG9uc2VKc29uID0+IHtcbiAgICAgICAgICBpZiAoIXJlc3BvbnNlSnNvbiB8fCAhcmVzcG9uc2VKc29uLmxlbmd0aCkge1xuICAgICAgICAgICAgbWFpblBob3RvQ29udGFpbmVyLmlubmVySFRNTCA9IHRoaXMuY3JlYXRlTm9QaG90b0VsZW1lbnQoKTtcbiAgICAgICAgICAgIGdhbGxlcnkucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVPdmVybGF5TWVzc2FnZSgpO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgbWFpblBob3RvRGF0YSA9IHJlc3BvbnNlSnNvbi5maW5kKCh7bWFpbn0pID0+IG1haW4pO1xuICAgICAgICAgIGNvbnN0IGdhbGxlcnlQaG90b3NEYXRhID0gcmVzcG9uc2VKc29uLmZpbHRlcigoe21haW59KSA9PiAhbWFpbik7XG5cbiAgICAgICAgICBpZiAoISFtYWluUGhvdG9EYXRhKSB7XG4gICAgICAgICAgICBtYWluUGhvdG9Db250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5jcmVhdGVQaG90b0VsZW1lbnQoXG4gICAgICAgICAgICAgIG1haW5QaG90b0RhdGFcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1haW5QaG90b0NvbnRhaW5lci5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGdhbGxlcnlQaG90b3NEYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IGdhbGxlcnlQaG90b3NIdG1sID0gXCJcIjtcblxuICAgICAgICAgICAgZ2FsbGVyeVBob3Rvc0RhdGEuZm9yRWFjaChcbiAgICAgICAgICAgICAgcGhvdG9EYXRhID0+XG4gICAgICAgICAgICAgICAgKGdhbGxlcnlQaG90b3NIdG1sICs9IHRoaXMuY3JlYXRlUGhvdG9FbGVtZW50KHBob3RvRGF0YSkpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAodXBsb2FkKSB7XG4gICAgICAgICAgICAgIGdhbGxlcnlQaG90b3NIdG1sICs9IHRoaXMuY3JlYXRlUGhvdG9FbGVtZW50KHtcbiAgICAgICAgICAgICAgICBtYWluOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlbXB0eTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwaG90b0lkOiBudWxsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBnYWxsZXJ5LmlubmVySFRNTCA9IGdhbGxlcnlQaG90b3NIdG1sO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIXVwbG9hZCkge1xuICAgICAgICAgICAgZ2FsbGVyeS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3Qgc3VjY2Vzc1BhcmFtcyA9IHtcbiAgICAgICAgICAgIGFjdGlvbjogcGFyYW1zLmFjdGlvbiB8fCB0aGlzLmFjdGlvbixcbiAgICAgICAgICAgIHBob3RvczogcmVzcG9uc2VKc29uLFxuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuaW5pdEV2ZW50cygpO1xuICAgICAgICAgIHRoaXMudG9nZ2xlT3ZlcmxheU1lc3NhZ2UoKTtcbiAgICAgICAgICB0aGlzLmhhbmRsZVN1Y2Nlc3Moc3VjY2Vzc1BhcmFtcyk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yID0+IHtcbiAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy50b2dnbGVPdmVybGF5TWVzc2FnZSgpO1xuICAgICAgICAgIHRoaXMuaW5pdEV2ZW50cygpO1xuICAgICAgICB9XG4gICAgICApXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICB0aGlzLnRvZ2dsZU92ZXJsYXlNZXNzYWdlKCk7XG4gICAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRFdmVudHMoKTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5pbml0RXZlbnRzKCk7XG4gIH1cblxuICAvKipcbiAgICog0KPQvdC40LLQtdGA0YHQsNC70YzQvdGL0Lkg0LzQtdGC0L7QtCDQtNC70Y8g0YHQvtC30LTQsNC90LjRjyDRjdC70LXQvNC10L3RgtCwINGE0L7RgtC+0LPRgNCw0YTQuNC4LlxuICAgKiBAcGFyYW0gcGFyYW1zLnBob3RvSWQge251bWJlcn0gSUQg0YTQvtGC0L7Qs9GA0LDRhNC40Lgg0L3QsCDQv9C+0YDRgtCw0LvQtSBWaXNpb24uXG4gICAqIEBwYXJhbSBwYXJhbXMubWFpbiB7Ym9vbGVhbn0gINCk0LvQsNCzINC+0YHQvdC+0LLQvdC+0LPQviDRhNC+0YLQvi5cbiAgICogQHBhcmFtIHBhcmFtcy5lbXB0eSB7Ym9vbGVhbn0g0KTQu9Cw0LMgXCLQv9GD0YHRgtC+0LPQvlwiINGE0L7RgtC+LCDQuNGB0L/QvtC70YzQt9GD0LXRgtGB0Y8g0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0LrQvdC+0L/QutC4INC30LDQs9GA0YPQt9C60LguXG4gICAqIEBwYXJhbSBwYXJhbXMucGF0aCB7c3RyaW5nfSDQn9GD0YLRjCDQuiDRhNC+0YLQvtCz0YDQsNGE0LjQuC5cbiAgICogQHBhcmFtIHBhcmFtcy5hdmF0YXJVcmwge3N0cmluZ30g0J/Rg9GC0Ywg0Log0YTQvtGC0L7Qs9GA0LDRhNC40LguXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9INCt0LvQtdC80LXQvdGCINGE0L7RgtC+0LPRgNCw0YTQuNC4INCyINCy0LjQtNC1INGB0YLRgNC+0LrQuC5cbiAgICovXG4gIGNyZWF0ZVBob3RvRWxlbWVudChwYXJhbXMpIHtcbiAgICBjb25zdCB7cGhvdG9JZCwgbWFpbiwgZW1wdHksIHBhdGgsIGF2YXRhclVybH0gPSBwYXJhbXM7XG4gICAgY29uc3Qge2Rpc2FibGVBbGwsIHVwbG9hZCwgdXBkYXRlLCByZW1vdmUgPSAhZW1wdHl9ID0gdGhpcy5jb250cm9scztcbiAgICBsZXQgYnV0dG9ucyA9IFwiXCI7XG4gICAgbGV0IGVsZW1lbnRDbGFzc2VzID0gXCJcIjtcbiAgICBsZXQgYmFja2dyb3VuZEltYWdlID0gXCJcIjtcbiAgICBsZXQgbWFpbkF0dHJpYnV0ZSA9IFwiXCI7XG5cbiAgICBpZiAoIWF2YXRhclVybCAmJiBwYXRoKSB7XG4gICAgICBiYWNrZ3JvdW5kSW1hZ2UgPSBgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHtwYXRofSlcImA7XG4gICAgfVxuXG4gICAgaWYgKGF2YXRhclVybCkge1xuICAgICAgYmFja2dyb3VuZEltYWdlID0gYHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCR7YXZhdGFyVXJsfSlcImA7XG4gICAgfVxuXG4gICAgaWYgKG1haW4pIHtcbiAgICAgIG1haW5BdHRyaWJ1dGUgPSBgZGF0YS1tYWluPVwiJHttYWlufVwiYDtcblxuICAgICAgaWYgKGVtcHR5KSB7XG4gICAgICAgIGVsZW1lbnRDbGFzc2VzID0gXCJ2Zy1waG90byB2Zy1waG90by0tbWFpblwiO1xuICAgICAgICBidXR0b25zID0gdGhpcy5nZXRQaG90b0J1dHRvbnMoe1xuICAgICAgICAgIHVwbG9hZFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnRDbGFzc2VzID0gXCJ2Zy1waG90byB2Zy1waG90by0tbWFpblwiO1xuICAgICAgICBidXR0b25zID0gdGhpcy5nZXRQaG90b0J1dHRvbnMoe1xuICAgICAgICAgIHJlbW92ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGVtcHR5KSB7XG4gICAgICAgIGVsZW1lbnRDbGFzc2VzID0gXCJ2Zy1nYWxsZXJ5X19pdGVtIHZnLXBob3RvIHZnLXBob3RvLS11cGxvYWRcIjtcbiAgICAgICAgYnV0dG9ucyA9IHRoaXMuZ2V0UGhvdG9CdXR0b25zKHtcbiAgICAgICAgICB1cGxvYWRJY29uOiB1cGxvYWRcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50Q2xhc3NlcyA9IFwidmctZ2FsbGVyeV9faXRlbSB2Zy1waG90b1wiO1xuICAgICAgICBidXR0b25zID0gdGhpcy5nZXRQaG90b0J1dHRvbnMoe1xuICAgICAgICAgIHVwZGF0ZSxcbiAgICAgICAgICByZW1vdmVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGBcbiAgICAgIDxkaXYgY2xhc3M9XCIke2VsZW1lbnRDbGFzc2VzfVwiXG4gICAgICAgICR7YmFja2dyb3VuZEltYWdlfVxuICAgICAgICBkYXRhLXBob3RvLWlkPVwiJHtwaG90b0lkfVwiXG4gICAgICAgICR7bWFpbkF0dHJpYnV0ZX0+XG4gICAgICAgICR7ZGlzYWJsZUFsbCA/IFwiXCIgOiBidXR0b25zfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gIH1cblxuICAvKipcbiAgICog0KjQsNCx0LvQvtC9INGN0LvQtdC80LXQvdGC0LAg0LPQsNC70LXRgNC10Lgg0LHQtdC3INGE0L7RgtC+0LPRgNCw0YTQuNC4XG4gICAqIEByZXR1cm4ge3N0cmluZ30gSFRNTCBET00gU3RyaW5nXG4gICAqL1xuICBjcmVhdGVOb1Bob3RvRWxlbWVudCgpIHtcbiAgICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz1cInZnLXBob3RvIHZnLXBob3RvLS1tYWluXCI+XG4gICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCItMjU2IC0yNTYgMTAyNCAxMDI0XCI+XG4gICAgICAgICAgPHBhdGggZmlsbD1cIiM0YTUyNjZcIlxuICAgICAgICAgICAgZD1cIk00MzcgMzEwLjhjLTI4LjQtMjguNC02Mi4yLTQ5LjItOTkuMS02MS43IDM0LjEtMjUuMiA1Ni4yLTY1LjYgNTYuMi0xMTEuMUMzOTQuMSA2MS45IDMzMi4xIDAgMjU2IDBTMTE3LjkgNjEuOSAxMTcuOSAxMzguMWMwIDQ1LjUgMjIuMSA4NS45IDU2LjIgMTExLjEgLTM2LjkgMTIuNC03MC44IDMzLjMtOTkuMSA2MS43QzI2LjYgMzU5LjIgMCA0MjMuNSAwIDQ5MS44IDAgNTAzIDkgNTEyIDIwLjIgNTEyaDQ3MS43YzExLjEgMCAyMC4yLTkgMjAuMi0yMC4yQzUxMiA0MjMuNSA0ODUuNCAzNTkuMiA0MzcgMzEwLjh6TTE1OC4yIDEzOC4xYzAtNTMuOSA0My45LTk3LjggOTcuOC05Ny44IDUzLjkgMCA5Ny44IDQzLjkgOTcuOCA5Ny44IDAgNTMuOS00My45IDk3LjgtOTcuOCA5Ny44QzIwMi4xIDIzNS44IDE1OC4yIDE5MiAxNTguMiAxMzguMXpNNDEuMiA0NzEuN0M1MS40IDM2Mi4yIDE0My45IDI3Ni4yIDI1NiAyNzYuMnMyMDQuNiA4NiAyMTQuOCAxOTUuNUg0MS4yelwiLz5cbiAgICAgICAgPC9zdmc+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgLyoqXG4gICAqINCf0L7Qu9GD0YfQuNGC0Ywg0LrQvdC+0L/QutGDINC/0L4g0L/QtdGA0LXQtNCw0LLQsNC10LzRi9C8INC/0LDRgNCw0LzQtdGC0YDQsNC8LlxuICAgKiBAcGFyYW0gcGFyYW1zLmRpc2FibGVBbGwge2Jvb2xlYW59INCe0YLQutC70Y7Rh9C40YLRjCDQstGB0LUg0LrQvdC+0L/QutC4LlxuICAgKiBAcGFyYW0gcGFyYW1zLnJlbW92ZSB7Ym9vbGVhbn0g0JrQvdC+0L/QutCwINGD0LTQsNC70LXQvdC40Y8uXG4gICAqIEBwYXJhbSBwYXJhbXMudXBsb2FkIHtib29sZWFufSDQmtC90L7Qv9C60LAg0LfQsNCz0YDRg9C30LrQuC5cbiAgICogQHBhcmFtIHBhcmFtcy51cGxvYWRJY29uIHtib29sZWFufSDQmtC90L7Qv9C60LAg0LfQsNCz0YDRg9C30LrQuCDQsiDQstC40LTQtSDQuNC60L7QvdC60LguXG4gICAqIEBwYXJhbSBwYXJhbXMuc2VsZWN0IHtib29sZWFufSDQmtC90L7Qv9C60LAg0LLRi9Cx0L7RgNCwINGE0L7RgtC+0LPRgNCw0YTQuNC4LlxuICAgKi9cbiAgZ2V0UGhvdG9CdXR0b25zKHBhcmFtcykge1xuICAgIGlmIChwYXJhbXMuZGlzYWJsZUFsbCkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuXG4gICAgY29uc3QgYnV0dG9ucyA9IHtcbiAgICAgIHJlbW92ZTogYDxidXR0b24gY2xhc3M9XCJ2Zy1waG90b19fYnV0dG9uIHZnLWJ1dHRvbiB2Zy1idXR0b24tLXJlZFwiIGRhdGEtYWN0aW9uPVwicmVtb3ZlLXBob3RvXCI+0KPQtNCw0LvQuNGC0Yw8L2J1dHRvbj5gLFxuICAgICAgdXBsb2FkOiBgPGJ1dHRvbiBjbGFzcz1cInZnLXBob3RvX19idXR0b24gdmctYnV0dG9uXCIgZGF0YS1hY3Rpb249XCJ1cGxvYWQtcGhvdG9cIj7Ql9Cw0LPRgNGD0LfQuNGC0Yw8L2J1dHRvbj5gLFxuICAgICAgdXBsb2FkSWNvbjogYDxidXR0b24gY2xhc3M9XCJ2Zy1waG90b19fYnV0dG9uIHZnLWJ1dHRvbiB2Zy1idXR0b24tLXVwbG9hZFwiIGRhdGEtYWN0aW9uPVwidXBsb2FkLXBob3RvXCI+JiM0Mzs8L2J1dHRvbj5gLFxuICAgICAgdXBkYXRlOiBgPGJ1dHRvbiBjbGFzcz1cInZnLXBob3RvX19idXR0b24gdmctYnV0dG9uIHZnLWJ1dHRvbi0tZ3JlZW5cIiBkYXRhLWFjdGlvbj1cInVwZGF0ZS1waG90b1wiPtCS0YvQsdGA0LDRgtGMPC9idXR0b24+YFxuICAgIH07XG5cbiAgICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5yZWR1Y2UoKGJ1dHRvbnNTdHJpbmcsIGtleSkgPT4ge1xuICAgICAgaWYgKHBhcmFtc1trZXldKSB7XG4gICAgICAgIGJ1dHRvbnNTdHJpbmcgKz0gYnV0dG9uc1trZXldO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnV0dG9uc1N0cmluZztcbiAgICB9LCBcIlwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDRgdC+0LHRi9GC0LjQuSDQtNC70Y8g0LrQvdC+0L/QvtC6INCz0LDQu9C10YDQtdC4LlxuICAgKi9cbiAgaW5pdEV2ZW50cygpIHtcbiAgICBjb25zdCB7cm9vdEVsZW1lbnR9ID0gdGhpcztcbiAgICBjb25zdCBidXR0b25zID0gcm9vdEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcImJ1dHRvblwiKTtcblxuICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgdGhpcy5yb3V0ZXJbYnV0dG9uLmRhdGFzZXQuYWN0aW9uXSxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog0KDQvtGD0YLQtdGALlxuICAgKiBAdHlwZSB7e1wicmVtb3ZlLXBob3RvXCI6IGZ1bmN0aW9uKCopOiB2b2lkLCBcImZpbGUtaW5wdXQtY2hhbmdlZFwiOiBmdW5jdGlvbigqKTogdm9pZCwgXCJ1cGxvYWQtcGhvdG9cIjogZnVuY3Rpb24oKik6IHZvaWQsIFwidXBkYXRlLXBob3RvXCI6IGZ1bmN0aW9uKCopOiB2b2lkfX1cbiAgICovXG4gIHJvdXRlciA9IHtcbiAgICAvKipcbiAgICAgKiDQl9Cw0LPRgNGD0LfQutCwINGE0L7RgtC+0LPRgNCw0YTQuNC4INGB0L7RgtGA0YPQtNC90LjQutCwLlxuICAgICAqIEBwYXJhbSBldmVudCB7RXZlbnR9INCh0L7QsdGL0YLQuNC1LlxuICAgICAqL1xuICAgIFwidXBsb2FkLXBob3RvXCI6IGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IGZpbGVJbnB1dCA9IHRoaXMucm9vdEVsZW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImZpbGVcIl0nKTtcblxuICAgICAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcy5yb3V0ZXJbXCJmaWxlLWlucHV0LWNoYW5nZWRcIl0pO1xuICAgICAgZmlsZUlucHV0LmNsaWNrKCk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDQodC70YPRiNCw0YLQtdC70Ywg0YHQvtCx0YvRgtC40Y8g0LjQt9C80LXQvdC10L3QuNGPINGE0LDQudC70L7QstC+0LPQviDQv9C+0LvRjyDQstCy0L7QtNCwLlxuICAgICAqIEBwYXJhbSBldmVudCB7ZXZlbnR9INCh0L7QsdGL0YLQuNC1LlxuICAgICAqL1xuICAgIFwiZmlsZS1pbnB1dC1jaGFuZ2VkXCI6IGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IGZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07XG4gICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXG4gICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcblxuICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5hZGRQaG90byhyZWFkZXIucmVzdWx0KS50aGVuKFxuICAgICAgICAgIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIGlmKHJlc3BvbnNlLmZhdWx0Y29kZSkge1xuICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZSxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICB0aGlzLmRyYXcoe2FjdGlvbjogJ3VwbG9hZFBob3RvJ30pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZWFkZXIub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XG4gICAgICAgICAgbWVzc2FnZTogcmVhZGVyLmVycm9yLFxuICAgICAgICAgIGJsb2NraW5nRXJyb3JNZXNzYWdlOiBg0J7RiNC40LHQutCwINC30LDQs9GA0YPQt9C60Lgg0YTQvtGC0L7Qs9GA0LDRhNC40LggKC3QuNC5KTogJHtyZWFkZXIuZXJyb3J9YFxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDQl9Cw0L/RgNC+0YEg0L3QsCDRg9C00LDQu9C10L3QuNC1INGE0L7RgtC+0LPRgNCw0YTQuNC4INGB0L7RgtGA0YPQtNC90LjQutCwLlxuICAgICAqIEBwYXJhbSBldmVudCB7RXZlbnR9INCh0L7QsdGL0YLQuNC1LlxuICAgICAqL1xuICAgIFwicmVtb3ZlLXBob3RvXCI6IGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IHBob3RvRWxlbWVudCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiLnZnLXBob3RvXCIpO1xuICAgICAgY29uc3Qge3Bob3RvSWR9ID0gcGhvdG9FbGVtZW50LmRhdGFzZXQ7XG4gICAgICBjb25zdCBpc01haW5QaG90byA9IHBob3RvRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3ZnLXBob3RvLS1tYWluJyk7XG5cbiAgICAgIGlmICghIXBob3RvSWQpIHtcbiAgICAgICAgdGhpcy5kZWxldGVQaG90bygrcGhvdG9JZCkudGhlbihcbiAgICAgICAgICByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgdGhpcy5kcmF3KHthY3Rpb246IGlzTWFpblBob3RvID8gJ3Bob3RvUmVtb3ZlJyA6ICdwaG90b1JlbW92ZU1haW4nfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvciA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHtcbiAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqINCX0LDQv9GA0L7RgSDQvdCwINC+0LHQvdC+0LLQu9C10L3QuNC1INGE0L7RgtC+0LPRgNCw0YTQuNC4INGB0L7RgtGA0YPQtNC90LjQutCwLlxuICAgICAqIEBwYXJhbSBldmVudCB7RXZlbnR9INCh0L7QsdGL0YLQuNC1LlxuICAgICAqL1xuICAgIFwidXBkYXRlLXBob3RvXCI6IGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IHBob3RvRWxlbWVudCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiLnZnLXBob3RvXCIpO1xuICAgICAgY29uc3Qge3Bob3RvSWR9ID0gcGhvdG9FbGVtZW50LmRhdGFzZXQ7XG4gICAgICBjb25zdCBidXR0b25zID0gcGhvdG9FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpO1xuXG4gICAgICBpZiAoISFwaG90b0lkKSB7XG4gICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKSk7XG5cbiAgICAgICAgdGhpcy5zZXRBc01haW5QaG90bygrcGhvdG9JZCkudGhlbihcbiAgICAgICAgICByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgdGhpcy5kcmF3KHthY3Rpb246ICdwaG90b0FsYnVtJ30pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInRoaXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZ2xvYmFsIiwiZ2xvYmFsVGhpcyIsInNlbGYiLCJzdXBwb3J0IiwiU3ltYm9sIiwiQmxvYiIsImUiLCJ2aWV3Q2xhc3NlcyIsImlzQXJyYXlCdWZmZXJWaWV3IiwiQXJyYXlCdWZmZXIiLCJpc1ZpZXciLCJpbmRleE9mIiwidG9TdHJpbmciLCJub3JtYWxpemVOYW1lIiwibmFtZSIsIlN0cmluZyIsInRlc3QiLCJUeXBlRXJyb3IiLCJ0b0xvd2VyQ2FzZSIsIm5vcm1hbGl6ZVZhbHVlIiwidmFsdWUiLCJpdGVyYXRvckZvciIsIml0ZW1zIiwiaXRlcmF0b3IiLCJuZXh0Iiwic2hpZnQiLCJkb25lIiwidW5kZWZpbmVkIiwiSGVhZGVycyIsImhlYWRlcnMiLCJtYXAiLCJmb3JFYWNoIiwiYXBwZW5kIiwiQXJyYXkiLCJpc0FycmF5IiwiaGVhZGVyIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImNvbnN1bWVkIiwiYm9keSIsImJvZHlVc2VkIiwiUHJvbWlzZSIsInJlamVjdCIsImZpbGVSZWFkZXJSZWFkeSIsInJlYWRlciIsInJlc29sdmUiLCJvbmxvYWQiLCJyZXN1bHQiLCJvbmVycm9yIiwiZXJyb3IiLCJyZWFkQmxvYkFzQXJyYXlCdWZmZXIiLCJibG9iIiwiRmlsZVJlYWRlciIsInByb21pc2UiLCJyZWFkQXNBcnJheUJ1ZmZlciIsImJ1ZmZlckNsb25lIiwiYnVmIiwic2xpY2UiLCJ2aWV3IiwiVWludDhBcnJheSIsImJ5dGVMZW5ndGgiLCJzZXQiLCJidWZmZXIiLCJCb2R5IiwiX2luaXRCb2R5IiwiX2JvZHlJbml0IiwiX2JvZHlUZXh0IiwiaXNQcm90b3R5cGVPZiIsIl9ib2R5QmxvYiIsIkZvcm1EYXRhIiwiX2JvZHlGb3JtRGF0YSIsIlVSTFNlYXJjaFBhcmFtcyIsIkRhdGFWaWV3IiwiX2JvZHlBcnJheUJ1ZmZlciIsInR5cGUiLCJyZWplY3RlZCIsIkVycm9yIiwiYXJyYXlCdWZmZXIiLCJieXRlT2Zmc2V0IiwidGhlbiIsInRleHQiLCJyZWFkQXNUZXh0IiwiY2hhcnMiLCJsZW5ndGgiLCJpIiwiZnJvbUNoYXJDb2RlIiwiam9pbiIsInJlYWRBcnJheUJ1ZmZlckFzVGV4dCIsImZvcm1EYXRhIiwiZGVjb2RlIiwianNvbiIsIkpTT04iLCJwYXJzZSIsIm9sZFZhbHVlIiwiaGFzIiwiY2FsbGJhY2siLCJ0aGlzQXJnIiwia2V5cyIsInB1c2giLCJ2YWx1ZXMiLCJlbnRyaWVzIiwibWV0aG9kcyIsIlJlcXVlc3QiLCJpbnB1dCIsIm9wdGlvbnMiLCJtZXRob2QiLCJ1cGNhc2VkIiwidXJsIiwiY3JlZGVudGlhbHMiLCJtb2RlIiwic2lnbmFsIiwidG9VcHBlckNhc2UiLCJyZWZlcnJlciIsImNhY2hlIiwicmVQYXJhbVNlYXJjaCIsInJlcGxhY2UiLCJEYXRlIiwiZ2V0VGltZSIsImZvcm0iLCJ0cmltIiwic3BsaXQiLCJieXRlcyIsImRlY29kZVVSSUNvbXBvbmVudCIsIlJlc3BvbnNlIiwiYm9keUluaXQiLCJzdGF0dXMiLCJvayIsInN0YXR1c1RleHQiLCJjbG9uZSIsInJlc3BvbnNlIiwicmVkaXJlY3RTdGF0dXNlcyIsInJlZGlyZWN0IiwiUmFuZ2VFcnJvciIsImxvY2F0aW9uIiwiRE9NRXhjZXB0aW9uIiwiZXJyIiwibWVzc2FnZSIsInN0YWNrIiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJpbml0IiwicmVxdWVzdCIsImFib3J0ZWQiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsImFib3J0WGhyIiwiYWJvcnQiLCJyYXdIZWFkZXJzIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwic3Vic3RyIiwibGluZSIsInBhcnRzIiwicmVzcG9uc2VVUkwiLCJyZXNwb25zZVRleHQiLCJzZXRUaW1lb3V0Iiwib250aW1lb3V0Iiwib25hYm9ydCIsIm9wZW4iLCJocmVmIiwiZml4VXJsIiwid2l0aENyZWRlbnRpYWxzIiwicmVzcG9uc2VUeXBlIiwic2V0UmVxdWVzdEhlYWRlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNlbmQiLCJwb2x5ZmlsbCIsImZldGNoIiwiVmlzaW9uUGhvdG9HYWxsZXJ5IiwiZW1wbG95ZWVJZCIsInZpc2lvblBlcnNvbklkIiwicGVyc29uSWQiLCJ0b2tlbiIsImNvbnRyb2xzIiwibWFzdGVyQWxidW0iLCJkaXNhYmxlQWxsIiwidXBkYXRlIiwidXBsb2FkIiwicmVtb3ZlIiwiZXZlbnQiLCJmaWxlSW5wdXQiLCJyb290RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJyb3V0ZXIiLCJjbGljayIsImZpbGUiLCJ0YXJnZXQiLCJmaWxlcyIsInJlYWRBc0RhdGFVUkwiLCJhZGRQaG90byIsImZhdWx0Y29kZSIsImhhbmRsZUVycm9yIiwiZHJhdyIsImFjdGlvbiIsImJsb2NraW5nRXJyb3JNZXNzYWdlIiwicGhvdG9FbGVtZW50IiwiY2xvc2VzdCIsInBob3RvSWQiLCJkYXRhc2V0IiwiaXNNYWluUGhvdG8iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImRlbGV0ZVBob3RvIiwiYnV0dG9ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJidXR0b24iLCJzZXRBdHRyaWJ1dGUiLCJzZXRBc01haW5QaG90byIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJlbXBsb3llZSIsImlkIiwiZXJyb3JGdW5jdGlvbiIsInN1Y2Nlc3NGdW5jdGlvbiIsInBhcmFtcyIsIm1lc3NhZ2VTdHJpbmciLCJmYXVsdHN0cmluZyIsInJldmVyc2UiLCJlcnJvck1lc3NhZ2UiLCJzdHJpbmdpZnkiLCJjb25zb2xlIiwibG9nIiwicmVxdWVzdFBhdGgiLCJyZXF1ZXN0Qm9keSIsInJlcXVlc3REZWZhdWx0cyIsInZpc2lvbl9wZXJzb25faWQiLCJpbWFnZSIsInRvZ2dsZU92ZXJsYXlNZXNzYWdlIiwiZW1wbG95ZWVfaWQiLCJwaG90b19pZCIsImdhbGxlcnlDb250YWluZXIiLCJhZGQiLCJpbm5lckhUTUwiLCJtYWluUGhvdG9Db250YWluZXIiLCJnYWxsZXJ5IiwiZ2V0UGhvdG9zIiwiY3JlYXRlUGhvdG9FbGVtZW50IiwibWFpbiIsImVtcHR5IiwiY3JlYXRlTm9QaG90b0VsZW1lbnQiLCJpbml0RXZlbnRzIiwicmVzcG9uc2VKc29uIiwicGFyZW50RWxlbWVudCIsIm1haW5QaG90b0RhdGEiLCJmaW5kIiwiZ2FsbGVyeVBob3Rvc0RhdGEiLCJmaWx0ZXIiLCJnYWxsZXJ5UGhvdG9zSHRtbCIsInBob3RvRGF0YSIsInN1Y2Nlc3NQYXJhbXMiLCJwaG90b3MiLCJoYW5kbGVTdWNjZXNzIiwiY2F0Y2giLCJwYXRoIiwiYXZhdGFyVXJsIiwiZWxlbWVudENsYXNzZXMiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJtYWluQXR0cmlidXRlIiwiZ2V0UGhvdG9CdXR0b25zIiwidXBsb2FkSWNvbiIsInJlZHVjZSIsImJ1dHRvbnNTdHJpbmciXSwic291cmNlUm9vdCI6IiJ9